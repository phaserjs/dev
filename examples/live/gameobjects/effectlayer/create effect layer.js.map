{
  "version": 3,
  "sources": ["../../../../../phaser-genesis/src/config/const.ts", "../../../../../phaser-genesis/src/config/ConfigStore.ts", "../../../../../phaser-genesis/src/config/backgroundcolor/SetBackgroundColor.ts", "../../../../../phaser-genesis/src/config/backgroundcolor/BackgroundColor.ts", "../../../../../phaser-genesis/src/config/banner/SetBanner.ts", "../../../../../phaser-genesis/src/config/batchsize/SetBatchSize.ts", "../../../../../phaser-genesis/src/config/size/GetHeight.ts", "../../../../../phaser-genesis/src/config/size/GetResolution.ts", "../../../../../phaser-genesis/src/config/size/GetWidth.ts", "../../../../../phaser-genesis/src/config/size/SetSize.ts", "../../../../../phaser-genesis/src/renderer/BindingQueue.ts", "../../../../../phaser-genesis/src/config/backgroundcolor/GetBackgroundColor.ts", "../../../../../phaser-genesis/src/config/renderer/SetRenderer.ts", "../../../../../phaser-genesis/src/config/defaultorigin/SetDefaultOrigin.ts", "../../../../../phaser-genesis/src/config/globalvar/SetGlobalVar.ts", "../../../../../phaser-genesis/src/config/globalvar/GlobalVar.ts", "../../../../../phaser-genesis/src/config/maxtextures/SetMaxTextures.ts", "../../../../../phaser-genesis/src/dom/GetElement.ts", "../../../../../phaser-genesis/src/config/parent/SetParent.ts", "../../../../../phaser-genesis/src/config/parent/Parent.ts", "../../../../../phaser-genesis/src/config/scenes/SetScenes.ts", "../../../../../phaser-genesis/src/config/scenes/Scenes.ts", "../../../../../phaser-genesis/src/geom/rectangle/RectangleContains.ts", "../../../../../phaser-genesis/src/geom/rectangle/Rectangle.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/AddViewport.ts", "../../../../../phaser-genesis/src/renderer/webgl1/GL.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/BindViewport.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/SetViewport.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/BindFramebuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/PopViewport.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/PopFramebuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/AddFramebuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/SetFramebuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/Draw.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/Flush.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/End.ts", "../../../../../phaser-genesis/src/renderer/webgl1/colors/GetRGBArray.ts", "../../../../../phaser-genesis/src/config/webglcontext/GetWebGLContext.ts", "../../../../../phaser-genesis/src/renderer/webgl1/textures/CreateGLTexture.ts", "../../../../../phaser-genesis/src/renderer/webgl1/fbo/DeleteFramebuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/textures/DeleteGLTexture.ts", "../../../../../phaser-genesis/src/math/pow2/IsSizePowerOfTwo.ts", "../../../../../phaser-genesis/src/renderer/webgl1/textures/SetGLTextureFilterMode.ts", "../../../../../phaser-genesis/src/renderer/webgl1/textures/UpdateGLTexture.ts", "../../../../../phaser-genesis/src/renderer/webgl1/textures/GLTextureBinding.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/ProcessBindingQueue.ts", "../../../../../phaser-genesis/src/config/maxtextures/GetMaxTextures.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/CheckShaderMaxIfStatements.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/CreateTempTextures.ts", "../../../../../phaser-genesis/src/config/batchsize/GetBatchSize.ts", "../../../../../phaser-genesis/src/renderer/webgl1/buffers/DeleteGLBuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/buffers/VertexBuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/buffers/IndexedVertexBuffer.ts", "../../../../../phaser-genesis/src/utils/array/matrix/CheckMatrix.ts", "../../../../../phaser-genesis/src/utils/array/matrix/MatrixToString.ts", "../../../../../phaser-genesis/src/utils/array/matrix/ReverseColumns.ts", "../../../../../phaser-genesis/src/utils/array/matrix/ReverseRows.ts", "../../../../../phaser-genesis/src/utils/array/matrix/TransposeMatrix.ts", "../../../../../phaser-genesis/src/utils/array/matrix/RotateMatrix.ts", "../../../../../phaser-genesis/src/utils/array/matrix/Rotate180.ts", "../../../../../phaser-genesis/src/utils/array/matrix/RotateLeft.ts", "../../../../../phaser-genesis/src/utils/array/matrix/RotateRight.ts", "../../../../../phaser-genesis/src/utils/array/NumberArray.ts", "../../../../../phaser-genesis/src/math/RoundAwayFromZero.ts", "../../../../../phaser-genesis/src/utils/array/NumberArrayStep.ts", "../../../../../phaser-genesis/src/utils/base64/ArrayBufferToBase64.ts", "../../../../../phaser-genesis/src/utils/base64/Base64ToArrayBuffer.ts", "../../../../../phaser-genesis/src/utils/string/UppercaseFirst.ts", "../../../../../phaser-genesis/src/utils/NOOP.ts", "../../../../../phaser-genesis/src/math/mat4/Matrix4.ts", "../../../../../phaser-genesis/src/math/mat4/Mat4Ortho.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/CreateAttributes.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/DeleteShaders.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/CreateProgram.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/CreateShader.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/CreateUniformSetter.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/CreateUniforms.ts", "../../../../../phaser-genesis/src/renderer/webgl1/GL_CONST.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/DefaultQuadAttributes.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/DefaultQuadUniforms.ts", "../../../../../phaser-genesis/src/renderer/webgl1/fbo/CreateDepthBuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/fbo/CreateFramebuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/glsl/SINGLE_QUAD_FRAG.ts", "../../../../../phaser-genesis/src/renderer/webgl1/glsl/SINGLE_QUAD_VERT.ts", "../../../../../phaser-genesis/src/textures/Frame.ts", "../../../../../phaser-genesis/src/textures/Texture.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/Shader.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/QuadShader.ts", "../../../../../phaser-genesis/src/renderer/webgl1/glsl/MULTI_QUAD_FRAG.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/MultiTextureQuadShader.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/SetDefaultBlendMode.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/SetDefaultFramebuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/SetDefaultShader.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/SetDefaultVertexBuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/SetDefaultViewport.ts", "../../../../../phaser-genesis/src/GameInstance.ts", "../../../../../phaser-genesis/src/math/mat4/Mat4Identity.ts", "../../../../../phaser-genesis/src/math/mat2d/Matrix2D.ts", "../../../../../phaser-genesis/src/math/angle/AngleBetween.ts", "../../../../../phaser-genesis/src/math/angle/AngleBetweenY.ts", "../../../../../phaser-genesis/src/math/const.ts", "../../../../../phaser-genesis/src/math/angle/CounterClockwise.ts", "../../../../../phaser-genesis/src/math/angle/NormalizeAngle.ts", "../../../../../phaser-genesis/src/math/angle/ReverseAngle.ts", "../../../../../phaser-genesis/src/math/angle/RotateAngleTo.ts", "../../../../../phaser-genesis/src/math/angle/ShortestAngleBetween.ts", "../../../../../phaser-genesis/src/math/Wrap.ts", "../../../../../phaser-genesis/src/math/angle/WrapAngle.ts", "../../../../../phaser-genesis/src/math/angle/WrapAngleDegrees.ts", "../../../../../phaser-genesis/src/math/angle/index.ts", "../../../../../phaser-genesis/src/camera/StaticCamera.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/RenderPass.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/AddShader.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/AddVertexBuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/BindShader.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/Begin.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/BindBlendMode.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/BindTexture.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/BindVertexBuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/PopVertexBuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/SetVertexBuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/GetVertexBufferEntry.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/PopShader.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/SetShader.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/SetTexture.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/Start.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/UnbindTexture.ts", "../../../../../phaser-genesis/src/renderer/webgl1/WebGLRendererInstance.ts", "../../../../../phaser-genesis/src/renderer/webgl1/WebGLRenderer.ts", "../../../../../phaser-genesis/src/config/webgl/WebGL.ts", "../../../../../phaser-genesis/src/config/webglcontext/SetWebGLContext.ts", "../../../../../phaser-genesis/src/gameobjects/DIRTY_CONST.ts", "../../../../../phaser-genesis/src/components/transform/GetVertices.ts", "../../../../../phaser-genesis/src/components/bounds/BoundsComponent.ts", "../../../../../phaser-genesis/src/components/input/InputComponent.ts", "../../../../../phaser-genesis/src/math/vec2/Vec2.ts", "../../../../../phaser-genesis/src/renderer/webgl1/colors/PackColors.ts", "../../../../../phaser-genesis/src/components/transform/UpdateVertices.ts", "../../../../../phaser-genesis/src/components/transform/PreRenderVertices.ts", "../../../../../phaser-genesis/src/components/transform/UpdateLocalTransform.ts", "../../../../../phaser-genesis/src/math/mat2d/Mat2dCopyFrom.ts", "../../../../../phaser-genesis/src/components/transform/UpdateWorldTransform.ts", "../../../../../phaser-genesis/src/renderer/webgl1/colors/PackColor.ts", "../../../../../phaser-genesis/src/components/Vertex.ts", "../../../../../phaser-genesis/src/renderer/webgl1/draw/BatchTexturedQuad.ts", "../../../../../phaser-genesis/src/config/defaultorigin/GetDefaultOriginX.ts", "../../../../../phaser-genesis/src/config/defaultorigin/GetDefaultOriginY.ts", "../../../../../phaser-genesis/src/display/RemoveChildrenBetween.ts", "../../../../../phaser-genesis/src/display/DestroyChildren.ts", "../../../../../phaser-genesis/src/gameobjects/events/DestroyEvent.ts", "../../../../../phaser-genesis/src/events/Emit.ts", "../../../../../phaser-genesis/src/geom/rectangle/GetRectangleSize.ts", "../../../../../phaser-genesis/src/display/DepthFirstSearch.ts", "../../../../../phaser-genesis/src/display/GetChildIndex.ts", "../../../../../phaser-genesis/src/display/RemoveChildAt.ts", "../../../../../phaser-genesis/src/display/RemoveChild.ts", "../../../../../phaser-genesis/src/gameobjects/events/AddedToWorldEvent.ts", "../../../../../phaser-genesis/src/gameobjects/events/PostUpdateEvent.ts", "../../../../../phaser-genesis/src/gameobjects/events/RemovedFromWorldEvent.ts", "../../../../../phaser-genesis/src/gameobjects/events/UpdateEvent.ts", "../../../../../phaser-genesis/src/display/SetWorld.ts", "../../../../../phaser-genesis/src/display/SetParent.ts", "../../../../../phaser-genesis/src/display/ReparentChildren.ts", "../../../../../phaser-genesis/src/components/transform/TRANSFORM_CONST.ts", "../../../../../phaser-genesis/src/gameobjects/GameObject.ts", "../../../../../phaser-genesis/src/gameobjects/container/Container.ts", "../../../../../phaser-genesis/src/renderer/canvas/draw/DrawTexturedQuad.ts", "../../../../../phaser-genesis/src/gameobjects/sprite/SetFrame.ts", "../../../../../phaser-genesis/src/textures/TextureManagerInstance.ts", "../../../../../phaser-genesis/src/textures/GetTexture.ts", "../../../../../phaser-genesis/src/gameobjects/sprite/SetTexture.ts", "../../../../../phaser-genesis/src/gameobjects/sprite/Sprite.ts", "../../../../../phaser-genesis/src/renderer/webgl1/draw/BatchSingleQuad.ts", "../../../../../phaser-genesis/src/renderer/webgl1/draw/DrawTexturedQuad.ts", "../../../../../phaser-genesis/src/gameobjects/layer/Layer.ts", "../../../../../phaser-genesis/src/gameobjects/renderlayer/RenderLayer.ts", "../../../../../phaser-genesis/src/gameobjects/effectlayer/EffectLayer.ts", "../../../../../phaser-genesis/src/math/Clamp.ts", "../../../../../phaser-genesis/src/textures/CreateCanvas.ts", "../../../../../phaser-genesis/src/display/AddChild.ts", "../../../../../phaser-genesis/src/display/AddChildren.ts", "../../../../../phaser-genesis/src/display/RemoveChildren.ts", "../../../../../phaser-genesis/src/dom/AddToDOM.ts", "../../../../../phaser-genesis/src/dom/DOMContentLoaded.ts", "../../../../../phaser-genesis/src/dom/ParseXML.ts", "../../../../../phaser-genesis/src/events/EventEmitter.ts", "../../../../../phaser-genesis/src/events/EventInstance.ts", "../../../../../phaser-genesis/src/events/Off.ts", "../../../../../phaser-genesis/src/events/On.ts", "../../../../../phaser-genesis/src/events/Once.ts", "../../../../../phaser-genesis/src/config/banner/GetBanner.ts", "../../../../../phaser-genesis/src/config/globalvar/GetGlobalVar.ts", "../../../../../phaser-genesis/src/config/parent/GetParent.ts", "../../../../../phaser-genesis/src/config/renderer/GetRenderer.ts", "../../../../../phaser-genesis/src/scenes/CreateSceneRenderData.ts", "../../../../../phaser-genesis/src/config/scenes/GetScenes.ts", "../../../../../phaser-genesis/src/scenes/ResetSceneRenderData.ts", "../../../../../phaser-genesis/src/scenes/SceneManagerInstance.ts", "../../../../../phaser-genesis/src/scenes/SceneManager.ts", "../../../../../phaser-genesis/src/config/SetConfigDefaults.ts", "../../../../../phaser-genesis/src/textures/TextureManager.ts", "../../../../../phaser-genesis/src/Game.ts", "../../../../../phaser-genesis/src/loader/File.ts", "../../../../../phaser-genesis/src/loader/GetURL.ts", "../../../../../phaser-genesis/src/loader/ImageTagLoader.ts", "../../../../../phaser-genesis/src/loader/files/ImageFile.ts", "../../../../../phaser-genesis/src/loader/Loader.ts", "../../../../../phaser-genesis/src/scenes/GetConfigValue.ts", "../../../../../phaser-genesis/src/scenes/Install.ts", "../../../../../phaser-genesis/src/scenes/Scene.ts", "../../../../../phaser-genesis/src/world/events/WorldRenderEvent.ts", "../../../../../phaser-genesis/src/world/events/WorldShutdownEvent.ts", "../../../../../phaser-genesis/src/world/CalculateTotalRenderable.ts", "../../../../../phaser-genesis/src/world/HasDirtyChildren.ts", "../../../../../phaser-genesis/src/world/UpdateCachedLayers.ts", "../../../../../phaser-genesis/src/world/WorldDepthFirstSearch.ts", "../../../../../phaser-genesis/src/world/BuildRenderList.ts", "../../../../../phaser-genesis/src/math/mat2d/Mat2dEquals.ts", "../../../../../phaser-genesis/src/world/MergeRenderData.ts", "../../../../../phaser-genesis/src/world/ResetWorldRenderData.ts", "../../../../../phaser-genesis/src/world/BaseWorld.ts", "../../../../../phaser-genesis/src/world/CreateWorldRenderData.ts", "../../../../../phaser-genesis/src/world/StaticWorld.ts", "../../../src/gameobjects/effectlayer/create effect layer.ts"],
  "sourcesContent": ["export const CONFIG_DEFAULTS = {\r\n    AUTO: 'Auto',\r\n    BACKGROUND_COLOR: 'BackgroundColor',\r\n    BANNER: 'Banner',\r\n    BATCH_SIZE: 'BatchSize',\r\n    CANVAS_CONTEXT: 'CanvasContext',\r\n    CANVAS: 'Canvas',\r\n    DEFAULT_ORIGIN: 'DefaultOrigin',\r\n    GLOBAL_VAR: 'GlobalVar',\r\n    MAX_TEXTURES: 'MaxTextures',\r\n    PARENT: 'Parent',\r\n    RENDERER: 'Renderer',\r\n    SCENES: 'Scenes',\r\n    SIZE: 'Size',\r\n    WEBGL_CONTEXT: 'WebGLContext',\r\n    WEBGL: 'WebGL'\r\n};\r\n", "export const ConfigStore = new Map();\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetBackgroundColor (color: number): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.BACKGROUND_COLOR, color);\r\n}\r\n", "import { SetBackgroundColor } from './SetBackgroundColor';\r\n\r\nexport function BackgroundColor (color: number): () => void\r\n{\r\n    return (): void =>\r\n    {\r\n        SetBackgroundColor(color);\r\n    };\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetBanner (title: string = '', version: string = '', url: string = '', color: string = '#fff', background: string = 'linear-gradient(#3e0081 40%, #00bcc3)'): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.BANNER, { title, version, url, color, background });\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetBatchSize (size: number): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.BATCH_SIZE, size);\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetHeight (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.SIZE).height;\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetResolution (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.SIZE).resolution;\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetWidth (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.SIZE).width;\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetSize (width: number = 800, height: number = 600, resolution: number = 1): void\r\n{\r\n    if (resolution === 0)\r\n    {\r\n        resolution = window.devicePixelRatio;\r\n    }\r\n\r\n    ConfigStore.set(CONFIG_DEFAULTS.SIZE, { width, height, resolution });\r\n}\r\n", "import { IGLTextureBindingConfig } from './webgl1/textures/IGLTextureBindingConfig';\r\nimport { ITexture } from '../textures/ITexture';\r\n\r\nexport type BindingQueueEntry = {\r\n    texture: ITexture,\r\n    glConfig: IGLTextureBindingConfig\r\n};\r\n\r\nconst queue: BindingQueueEntry[] = [];\r\n\r\nexport const BindingQueue =\r\n{\r\n    add: (texture: ITexture, glConfig?: IGLTextureBindingConfig): void =>\r\n    {\r\n        queue.push({ texture, glConfig });\r\n    },\r\n\r\n    get: (): BindingQueueEntry[] =>\r\n    {\r\n        return queue;\r\n    },\r\n\r\n    clear: (): void =>\r\n    {\r\n        queue.length = 0;\r\n    }\r\n};\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetBackgroundColor (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.BACKGROUND_COLOR);\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\nimport { IRendererConstructor } from '../../renderer/IRendererConstructor';\r\n\r\nexport function SetRenderer (renderer: IRendererConstructor): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.RENDERER, renderer);\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetDefaultOrigin (x: number = 0.5, y: number = x): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.DEFAULT_ORIGIN, { x, y });\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetGlobalVar (name: string): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.GLOBAL_VAR, name);\r\n}\r\n", "import { SetGlobalVar } from './SetGlobalVar';\r\n\r\nexport function GlobalVar (name: string): () => void\r\n{\r\n    return (): void =>\r\n    {\r\n        SetGlobalVar(name);\r\n    };\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetMaxTextures (max: number): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.MAX_TEXTURES, max);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Attempts to get the target DOM element based on the given value, which can be either\r\n * a string, in which case it will be looked-up by ID, or an element node. If nothing\r\n * can be found it will return a reference to the document.body.\r\n *\r\n * @function Phaser.DOM.GetElement\r\n * @since 4.0.0\r\n *\r\n * @param {(string | HTMLElement)} [target] - The DOM element to look-up.\r\n * \r\n * @returns {HTMLElement} The HTML Element that was found.\r\n */\r\nexport function GetElement (target?: string | HTMLElement): HTMLElement\r\n{\r\n    let element: HTMLElement;\r\n\r\n    if (target)\r\n    {\r\n        if (typeof target === 'string')\r\n        {\r\n            //  Hopefully an element ID\r\n            element = document.getElementById(target);\r\n        }\r\n        else if (typeof target === 'object' && target.nodeType === 1)\r\n        {\r\n            //  Quick test for a HTMLElement\r\n            element = target;\r\n        }\r\n    }\r\n\r\n    if (!element)\r\n    {\r\n        element = document.body;\r\n    }\r\n\r\n    return element;\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\nimport { GetElement } from '../../dom/GetElement';\r\n\r\nexport function SetParent (parentElement?: string | HTMLElement): void\r\n{\r\n    //  If this function was called and `null` *wasn't* given as the parent\r\n    //  then we try to figure it out, or fallback to the document body\r\n    if (parentElement)\r\n    {\r\n        ConfigStore.set(CONFIG_DEFAULTS.PARENT, GetElement(parentElement));\r\n    }\r\n}\r\n", "import { SetParent } from './SetParent';\r\n\r\nexport function Parent (parentElement?: string | HTMLElement): () => void\r\n{\r\n    return (): void =>\r\n    {\r\n        SetParent(parentElement);\r\n    };\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\nimport { ISceneConstructor } from '../../scenes/ISceneConstructor';\r\n\r\nexport function SetScenes (scenes?: ISceneConstructor | Array<ISceneConstructor>): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.SCENES, [].concat(scenes));\r\n}\r\n", "import { ISceneConstructor } from '../../scenes/ISceneConstructor';\r\nimport { SetScenes } from './SetScenes';\r\n\r\nexport function Scenes (scenes?: ISceneConstructor | Array<ISceneConstructor>): () => void\r\n{\r\n    return (): void =>\r\n    {\r\n        SetScenes(scenes);\r\n    };\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { IRectangle } from './IRectangle';\r\n\r\n/**\r\n * Checks if a given point is inside a Rectangle's bounds.\r\n */\r\nexport function RectangleContains (rect: IRectangle, x: number, y: number): boolean\r\n{\r\n    if (rect.width <= 0 || rect.height <= 0)\r\n    {\r\n        return false;\r\n    }\r\n\r\n    return (rect.x <= x && rect.x + rect.width >= x && rect.y <= y && rect.y + rect.height >= y);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { RectangleContains } from './RectangleContains';\r\n\r\nexport class Rectangle\r\n{\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n\r\n    constructor (x: number = 0, y: number = 0, width: number = 0, height: number = 0)\r\n    {\r\n        this.set(x, y, width, height);\r\n    }\r\n\r\n    set (x: number = 0, y: number = 0, width: number = 0, height: number = 0): this\r\n    {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        return this;\r\n    }\r\n\r\n    contains (x: number, y: number): boolean\r\n    {\r\n        return RectangleContains(this, x, y);\r\n    }\r\n\r\n    set right (value: number)\r\n    {\r\n        if (value <= this.x)\r\n        {\r\n            this.width = 0;\r\n        }\r\n        else\r\n        {\r\n            this.width = value - this.x;\r\n        }\r\n    }\r\n\r\n    get right (): number\r\n    {\r\n        return this.x + this.width;\r\n    }\r\n\r\n    set bottom (value: number)\r\n    {\r\n        if (value <= this.y)\r\n        {\r\n            this.height = 0;\r\n        }\r\n        else\r\n        {\r\n            this.height = value - this.y;\r\n        }\r\n    }\r\n\r\n    get bottom (): number\r\n    {\r\n        return this.y + this.height;\r\n    }\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { Rectangle } from '../../../geom/rectangle/Rectangle';\r\n\r\nexport function AddViewport (renderPass: IRenderPass, x: number = 0, y: number = 0, width: number = 0, height: number = 0): Rectangle\r\n{\r\n    const viewport = new Rectangle(x, y, width, height);\r\n\r\n    renderPass.viewportStack.push(viewport);\r\n\r\n    return viewport;\r\n}\r\n", "export let gl: WebGLRenderingContext;\r\n\r\nexport const GL =\r\n{\r\n    get: (): WebGLRenderingContext =>\r\n    {\r\n        return gl;\r\n    },\r\n\r\n    set: (context: WebGLRenderingContext | undefined): void =>\r\n    {\r\n        gl = context;\r\n    }\r\n};\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { Rectangle } from '../../../geom/rectangle';\r\nimport { gl } from '../GL';\r\n\r\nexport function BindViewport (renderPass: IRenderPass, viewport?: Rectangle): void\r\n{\r\n    if (!viewport)\r\n    {\r\n        viewport = renderPass.currentViewport;\r\n\r\n        if (!viewport)\r\n        {\r\n            return;\r\n        }\r\n    }\r\n\r\n    const glv = gl.getParameter(gl.VIEWPORT);\r\n\r\n    if (glv[0] !== viewport.x || glv[1] !== viewport.y || glv[2] !== viewport.width || glv[3] !== viewport.height)\r\n    {\r\n        gl.viewport(viewport.x, viewport.y, viewport.width, viewport.height);\r\n    }\r\n}\r\n", "import { AddViewport } from './AddViewport';\r\nimport { BindViewport } from './BindViewport';\r\nimport { IRenderPass } from './IRenderPass';\r\n\r\nexport function SetViewport (renderPass: IRenderPass, x: number = 0, y: number = 0, width: number = 0, height: number = 0): void\r\n{\r\n    const entry = AddViewport(renderPass, x, y, width, height);\r\n\r\n    BindViewport(renderPass, entry);\r\n\r\n    renderPass.currentViewport = entry;\r\n}\r\n", "import { FramebufferStackEntry } from './RenderPass';\r\nimport { IRenderPass } from './IRenderPass';\r\nimport { SetViewport } from './SetViewport';\r\nimport { gl } from '../GL';\r\n\r\nexport function BindFramebuffer (renderPass: IRenderPass, clear: boolean = true, entry?: FramebufferStackEntry): void\r\n{\r\n    if (!entry)\r\n    {\r\n        entry = renderPass.currentFramebuffer;\r\n    }\r\n\r\n    const { framebuffer, viewport } = entry;\r\n\r\n    //  TODO - Only bind if different\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\r\n\r\n    if (clear)\r\n    {\r\n        gl.clearColor(0, 0, 0, 0);\r\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n    }\r\n\r\n    if (viewport)\r\n    {\r\n        SetViewport(renderPass, viewport.x, viewport.y, viewport.width, viewport.height);\r\n    }\r\n}\r\n", "import { BindViewport } from './BindViewport';\r\nimport { IRenderPass } from './IRenderPass';\r\n\r\nexport function PopViewport (renderPass: IRenderPass): void\r\n{\r\n    const stack = renderPass.viewportStack;\r\n\r\n    //  > 1 because index 0 contains the default, which we don't want to remove\r\n    if (stack.length > 1)\r\n    {\r\n        stack.pop();\r\n    }\r\n\r\n    renderPass.currentViewport = stack[ stack.length - 1 ];\r\n\r\n    BindViewport(renderPass);\r\n}\r\n", "import { BindFramebuffer } from './BindFramebuffer';\r\nimport { IRenderPass } from './IRenderPass';\r\nimport { PopViewport } from './PopViewport';\r\n\r\nexport function PopFramebuffer (renderPass: IRenderPass): void\r\n{\r\n    const stack = renderPass.framebufferStack;\r\n\r\n    //  > 1 because index 0 contains the default, which we don't want to remove\r\n    if (stack.length > 1)\r\n    {\r\n        if (renderPass.currentFramebuffer.viewport)\r\n        {\r\n            PopViewport(renderPass);\r\n        }\r\n\r\n        stack.pop();\r\n    }\r\n\r\n    renderPass.currentFramebuffer = stack[ stack.length - 1 ];\r\n\r\n    BindFramebuffer(renderPass, false);\r\n}\r\n", "import { FramebufferStackEntry } from './RenderPass';\r\nimport { IRenderPass } from './IRenderPass';\r\nimport { Rectangle } from '../../../geom/rectangle/Rectangle';\r\n\r\nexport function AddFramebuffer (renderPass: IRenderPass, framebuffer: WebGLFramebuffer, viewport?: Rectangle): FramebufferStackEntry\r\n{\r\n    const entry = { framebuffer, viewport };\r\n\r\n    renderPass.framebufferStack.push(entry);\r\n\r\n    return entry;\r\n}\r\n", "import { AddFramebuffer } from './AddFramebuffer';\r\nimport { BindFramebuffer } from './BindFramebuffer';\r\nimport { IRenderPass } from './IRenderPass';\r\nimport { Rectangle } from '../../../geom/rectangle';\r\n\r\nexport function SetFramebuffer (renderPass: IRenderPass, framebuffer: WebGLFramebuffer, clear: boolean = true, viewport?: Rectangle): void\r\n{\r\n    const entry = AddFramebuffer(renderPass, framebuffer, viewport);\r\n\r\n    BindFramebuffer(renderPass, clear, entry);\r\n\r\n    renderPass.currentFramebuffer = entry;\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { PopFramebuffer } from './PopFramebuffer';\r\nimport { SetFramebuffer } from './SetFramebuffer';\r\nimport { gl } from '../GL';\r\n\r\nexport function Draw (renderPass: IRenderPass): void\r\n{\r\n    const count = renderPass.count;\r\n\r\n    if (count === 0)\r\n    {\r\n        return;\r\n    }\r\n\r\n    const currentBuffer = renderPass.currentVertexBuffer;\r\n    const currentShader = renderPass.currentShader;\r\n\r\n    const renderToFramebuffer = currentShader.shader.renderToFramebuffer;\r\n\r\n    if (renderToFramebuffer)\r\n    {\r\n        SetFramebuffer(renderPass, currentShader.shader.framebuffer, true);\r\n    }\r\n\r\n    if (count === currentBuffer.batchSize)\r\n    {\r\n        const type = (currentBuffer.isDynamic) ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\r\n\r\n        gl.bufferData(gl.ARRAY_BUFFER, currentBuffer.data, type);\r\n    }\r\n    else\r\n    {\r\n        const subsize = (currentBuffer.indexed) ? count * currentBuffer.entryElementSize : count * currentBuffer.vertexElementSize;\r\n\r\n        const view = currentBuffer.vertexViewF32.subarray(0, subsize);\r\n\r\n        gl.bufferSubData(gl.ARRAY_BUFFER, 0, view);\r\n    }\r\n\r\n    if (currentBuffer.indexed)\r\n    {\r\n        gl.drawElements(gl.TRIANGLES, count * currentBuffer.entryIndexSize, gl.UNSIGNED_SHORT, 0);\r\n    }\r\n    else\r\n    {\r\n        gl.drawArrays(gl.TRIANGLES, 0, count);\r\n    }\r\n\r\n    if (renderToFramebuffer)\r\n    {\r\n        PopFramebuffer(renderPass);\r\n    }\r\n}\r\n", "import { Draw } from './Draw';\r\nimport { IRenderPass } from './IRenderPass';\r\n\r\nexport function Flush (renderPass: IRenderPass, forceCount?: number): boolean\r\n{\r\n    if (forceCount)\r\n    {\r\n        renderPass.count = forceCount;\r\n    }\r\n\r\n    const count = renderPass.count;\r\n\r\n    if (count === 0)\r\n    {\r\n        return false;\r\n    }\r\n\r\n    Draw(renderPass);\r\n\r\n    renderPass.prevCount = count;\r\n\r\n    renderPass.count = 0;\r\n\r\n    renderPass.flushTotal++;\r\n\r\n    return true;\r\n}\r\n", "import { Flush } from './Flush';\r\nimport { IRenderPass } from './IRenderPass';\r\n\r\nexport function End (renderPass: IRenderPass): void\r\n{\r\n    Flush(renderPass);\r\n}\r\n", "export function GetRGBArray (color: number, output: number[] = []): number[]\r\n{\r\n    const r: number = color >> 16 & 0xFF;\r\n    const g: number = color >> 8 & 0xFF;\r\n    const b: number = color & 0xFF;\r\n    const a: number = (color > 16777215) ? color >>> 24 : 255;\r\n\r\n    output[0] = r / 255;\r\n    output[1] = g / 255;\r\n    output[2] = b / 255;\r\n    output[3] = a / 255;\r\n\r\n    return output;\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetWebGLContext (): WebGLContextAttributes\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.WEBGL_CONTEXT);\r\n}\r\n", "import { IGLTextureBinding } from './IGLTextureBinding';\r\nimport { gl } from '../GL';\r\n\r\nexport function CreateGLTexture <T extends IGLTextureBinding> (binding: T): WebGLTexture\r\n{\r\n    const { parent, flipY, unpackPremultiplyAlpha, minFilter, magFilter, wrapS, wrapT, generateMipmap, isPOT } = binding;\r\n\r\n    const source = parent.image;\r\n\r\n    let width = parent.width;\r\n    let height = parent.height;\r\n\r\n    const glTexture: WebGLTexture = gl.createTexture();\r\n\r\n    gl.activeTexture(gl.TEXTURE0);\r\n    gl.bindTexture(gl.TEXTURE_2D, glTexture);\r\n\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, flipY);\r\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, unpackPremultiplyAlpha);\r\n\r\n    if (source)\r\n    {\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, source);\r\n\r\n        width = source.width;\r\n        height = source.height;\r\n    }\r\n    else\r\n    {\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\r\n    }\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter);\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT);\r\n\r\n    if (generateMipmap && isPOT)\r\n    {\r\n        gl.generateMipmap(gl.TEXTURE_2D);\r\n    }\r\n\r\n    binding.texture = glTexture;\r\n\r\n    return glTexture;\r\n}\r\n", "import { gl } from '../GL';\r\n\r\nexport function DeleteFramebuffer (framebuffer: WebGLFramebuffer): void\r\n{\r\n    if (gl && gl.isFramebuffer(framebuffer))\r\n    {\r\n        gl.deleteFramebuffer(framebuffer);\r\n    }\r\n}\r\n", "import { gl } from '../GL';\r\n\r\nexport function DeleteGLTexture (texture: WebGLTexture): void\r\n{\r\n    if (gl.isTexture(texture))\r\n    {\r\n        gl.deleteTexture(texture);\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Checks if the given `width` and `height` are a power of two.\r\n * Useful for checking texture dimensions.\r\n *\r\n * @function Phaser.Math.Pow2.IsSize\r\n * @since 3.0.0\r\n *\r\n * @param {number} width - The width.\r\n * @param {number} height - The height.\r\n *\r\n * @return {boolean} `true` if `width` and `height` are a power of two, otherwise `false`.\r\n */\r\nexport function IsSizePowerOfTwo (width: number, height: number): boolean\r\n{\r\n    if (width < 1 || height < 1)\r\n    {\r\n        return false;\r\n    }\r\n\r\n    return ((width & (width - 1)) === 0) && ((height & (height - 1)) === 0);\r\n}\r\n", "import { gl } from '../GL';\r\n\r\nexport function SetGLTextureFilterMode (texture: WebGLTexture, linear: boolean = true): void\r\n{\r\n    gl.activeTexture(gl.TEXTURE0);\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n\r\n    const mode = (linear) ? gl.LINEAR : gl.NEAREST;\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, mode);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, mode);\r\n}\r\n", "import { IGLTextureBinding } from './IGLTextureBinding';\r\nimport { gl } from '../GL';\r\n\r\nexport function UpdateGLTexture <T extends IGLTextureBinding> (binding: T): WebGLTexture\r\n{\r\n    const source = binding.parent.image;\r\n    const width = source.width;\r\n    const height = source.height;\r\n\r\n    if (width > 0 && height > 0)\r\n    {\r\n        gl.activeTexture(gl.TEXTURE0);\r\n        gl.bindTexture(gl.TEXTURE_2D, binding.texture);\r\n\r\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, binding.flipY);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, source);\r\n    }\r\n\r\n    return binding.texture;\r\n}\r\n", "import { CreateGLTexture } from './CreateGLTexture';\r\nimport { DeleteFramebuffer } from '../fbo/DeleteFramebuffer';\r\nimport { DeleteGLTexture } from './DeleteGLTexture';\r\nimport { IGLTextureBinding } from './IGLTextureBinding';\r\nimport { IGLTextureBindingConfig } from './IGLTextureBindingConfig';\r\nimport { ITexture } from '../../../textures/ITexture';\r\nimport { IsSizePowerOfTwo } from '../../../math/pow2/IsSizePowerOfTwo';\r\nimport { SetGLTextureFilterMode } from './SetGLTextureFilterMode';\r\nimport { UpdateGLTexture } from './UpdateGLTexture';\r\nimport { gl } from '../GL';\r\n\r\nexport class GLTextureBinding implements IGLTextureBinding\r\n{\r\n    parent: ITexture;\r\n\r\n    texture: WebGLTexture;\r\n    framebuffer: WebGLFramebuffer;\r\n    depthbuffer: WebGLRenderbuffer;\r\n\r\n    index: number = 0;\r\n    indexCounter: number = -1;\r\n\r\n    dirtyIndex: boolean = true;\r\n    unpackPremultiplyAlpha: boolean = true;\r\n\r\n    minFilter: GLenum;\r\n    magFilter: GLenum;\r\n    wrapS: GLenum;\r\n    wrapT: GLenum;\r\n\r\n    flipY: boolean = false;\r\n    isPOT: boolean = false;\r\n    generateMipmap: boolean = false;\r\n\r\n    constructor (parent: ITexture, config: IGLTextureBindingConfig = {})\r\n    {\r\n        this.parent = parent;\r\n\r\n        this.isPOT = IsSizePowerOfTwo(parent.width, parent.height);\r\n\r\n        const {\r\n            texture = null,\r\n            framebuffer = null,\r\n            depthbuffer = null,\r\n            unpackPremultiplyAlpha = true,\r\n            minFilter = (this.isPOT) ? gl.LINEAR_MIPMAP_LINEAR : gl.LINEAR,\r\n            magFilter = gl.LINEAR,\r\n            wrapS = gl.CLAMP_TO_EDGE,\r\n            wrapT = gl.CLAMP_TO_EDGE,\r\n            generateMipmap = this.isPOT,\r\n            flipY = false\r\n        } = config;\r\n\r\n        this.minFilter = minFilter;\r\n        this.magFilter = magFilter;\r\n        this.wrapS = wrapS;\r\n        this.wrapT = wrapT;\r\n        this.generateMipmap = generateMipmap;\r\n        this.flipY = flipY;\r\n        this.unpackPremultiplyAlpha = unpackPremultiplyAlpha;\r\n\r\n        if (framebuffer)\r\n        {\r\n            this.framebuffer = framebuffer;\r\n        }\r\n\r\n        if (depthbuffer)\r\n        {\r\n            this.depthbuffer = depthbuffer;\r\n        }\r\n\r\n        if (texture)\r\n        {\r\n            this.texture = texture;\r\n        }\r\n        else\r\n        {\r\n            CreateGLTexture(this);\r\n        }\r\n    }\r\n\r\n    //  Needed?\r\n    setFilter (linear: boolean): void\r\n    {\r\n        if (this.texture)\r\n        {\r\n            SetGLTextureFilterMode(this.texture, linear);\r\n        }\r\n    }\r\n\r\n    create (): WebGLTexture\r\n    {\r\n        const texture = this.texture;\r\n\r\n        if (texture)\r\n        {\r\n            DeleteGLTexture(texture);\r\n        }\r\n\r\n        return CreateGLTexture(this);\r\n    }\r\n\r\n    update (): WebGLTexture\r\n    {\r\n        const texture = this.texture;\r\n\r\n        if (!texture)\r\n        {\r\n            return CreateGLTexture(this);\r\n        }\r\n        else\r\n        {\r\n            return UpdateGLTexture(this);\r\n        }\r\n    }\r\n\r\n    setIndex (index: number): void\r\n    {\r\n        this.dirtyIndex = (index !== this.index);\r\n        this.index = index;\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        DeleteGLTexture(this.texture);\r\n        DeleteFramebuffer(this.framebuffer);\r\n\r\n        this.parent = null;\r\n        this.texture = null;\r\n        this.framebuffer = null;\r\n    }\r\n}\r\n", "import { BindingQueue } from '../../BindingQueue';\r\nimport { GLTextureBinding } from '../textures/GLTextureBinding';\r\n\r\nexport function ProcessBindingQueue (): void\r\n{\r\n    const queue = BindingQueue.get();\r\n\r\n    queue.forEach(entry =>\r\n    {\r\n        const { texture, glConfig } = entry;\r\n\r\n        if (!texture.binding)\r\n        {\r\n            texture.binding = new GLTextureBinding(texture, glConfig);\r\n        }\r\n    });\r\n\r\n    BindingQueue.clear();\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetMaxTextures (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.MAX_TEXTURES);\r\n}\r\n", "import { gl } from '../GL';\r\n\r\n//  From Pixi v5\r\n\r\nconst fragTemplate = [\r\n    'precision mediump float;',\r\n    'void main(void){',\r\n    'float test = 0.1;',\r\n    '%forloop%',\r\n    'gl_FragColor = vec4(0.0);',\r\n    '}'\r\n].join('\\n');\r\n\r\nfunction GenerateSrc (maxIfs: number): string\r\n{\r\n    let src = '';\r\n\r\n    for (let i = 0; i < maxIfs; ++i)\r\n    {\r\n        if (i > 0)\r\n        {\r\n            src += '\\nelse ';\r\n        }\r\n\r\n        if (i < maxIfs - 1)\r\n        {\r\n            src += `if(test == ${i}.0){}`;\r\n        }\r\n    }\r\n\r\n    return src;\r\n}\r\n\r\nexport function CheckShaderMaxIfStatements (maxIfs: number): number\r\n{\r\n    const shader = gl.createShader(gl.FRAGMENT_SHADER);\r\n\r\n    // eslint-disable-next-line no-constant-condition\r\n    while (true)\r\n    {\r\n        const fragmentSrc = fragTemplate.replace(/%forloop%/gi, GenerateSrc(maxIfs));\r\n\r\n        gl.shaderSource(shader, fragmentSrc);\r\n        gl.compileShader(shader);\r\n\r\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS))\r\n        {\r\n            maxIfs = (maxIfs / 2) | 0;\r\n        }\r\n        else\r\n        {\r\n            // valid!\r\n            break;\r\n        }\r\n    }\r\n\r\n    return maxIfs;\r\n}\r\n", "import { GetMaxTextures, SetMaxTextures } from '../../../config/maxtextures/';\r\n\r\nimport { CheckShaderMaxIfStatements } from '../shaders/CheckShaderMaxIfStatements';\r\nimport { IRenderPass } from './IRenderPass';\r\nimport { gl } from '../GL';\r\n\r\n//  As per the WebGL spec, the browser should always support at least 8 texture units\r\n\r\nexport function CreateTempTextures (renderPass: IRenderPass): void\r\n{\r\n    let maxGPUTextures: number = CheckShaderMaxIfStatements(gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS));\r\n\r\n    const maxConfigTextures = GetMaxTextures();\r\n\r\n    if (maxConfigTextures === 0 || (maxConfigTextures > 0 && maxConfigTextures > maxGPUTextures))\r\n    {\r\n        //  Insert gpu limit into config value\r\n        SetMaxTextures(maxGPUTextures);\r\n    }\r\n    else if (maxConfigTextures > 0 && maxConfigTextures < maxGPUTextures)\r\n    {\r\n        //  Limit to config setting, or 8, whichever is higher\r\n        maxGPUTextures = Math.max(8, maxConfigTextures);\r\n    }\r\n\r\n    const tempTextures = renderPass.tempTextures;\r\n\r\n    if (tempTextures.length)\r\n    {\r\n        tempTextures.forEach(texture =>\r\n        {\r\n            gl.deleteTexture(texture);\r\n        });\r\n    }\r\n\r\n    const index = [];\r\n\r\n    //  Create temp textures to stop WebGL errors on mac os\r\n    for (let texturesIndex: number = 0; texturesIndex < maxGPUTextures; texturesIndex++)\r\n    {\r\n        const tempTexture = gl.createTexture();\r\n\r\n        gl.activeTexture(gl.TEXTURE0 + texturesIndex);\r\n\r\n        gl.bindTexture(gl.TEXTURE_2D, tempTexture);\r\n\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([ 0, 0, 255, 255 ]));\r\n\r\n        tempTextures[texturesIndex] = tempTexture;\r\n\r\n        index.push(texturesIndex);\r\n    }\r\n\r\n    renderPass.maxTextures = maxGPUTextures;\r\n\r\n    renderPass.textureIndex = index;\r\n\r\n    //  ID Zero is reserved for FBO Textures\r\n    renderPass.currentActiveTexture = 1;\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetBatchSize (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.BATCH_SIZE);\r\n}\r\n", "import { gl } from '../GL';\r\n\r\nexport function DeleteGLBuffer (buffer: WebGLBuffer): void\r\n{\r\n    if (gl.isBuffer(buffer))\r\n    {\r\n        gl.deleteBuffer(buffer);\r\n    }\r\n}\r\n", "import { DeleteGLBuffer } from './DeleteGLBuffer';\r\nimport { IVertexBuffer } from './IVertexBuffer';\r\nimport { IVertexBufferConfig } from './IVertexBufferConfig';\r\nimport { gl } from '../GL';\r\n\r\nexport class VertexBuffer implements IVertexBuffer\r\n{\r\n    /**\r\n     * Maximum number of entries per batch before a flush takes place.\r\n     * For a Mesh, this is the number of triangles / faces in the vertex buffer.\r\n     * Typically each face consists of 3 verticies.\r\n     *\r\n     * @type {number}\r\n     */\r\n    batchSize: number;\r\n\r\n    /**\r\n     * The size, in bytes, per entry in the array buffer.\r\n     *\r\n     * @type {number}\r\n     */\r\n    dataSize: number;\r\n\r\n    /**\r\n     * The amount of elements / floats a single vertex consists of.\r\n     *\r\n     * The default is 6:\r\n     *\r\n     * position (x,y - 2 floats)\r\n     * texture coord (x,y - 2 floats)\r\n     * texture index (uint)\r\n     * packed color (uint)\r\n     *\r\n     * @type {number}\r\n     */\r\n    vertexElementSize: number;\r\n\r\n    /**\r\n     * The size, in bytes, of a single vertex in the array buffer.\r\n     *\r\n     * This is `vertexElementSize * dataSize`.\r\n     *\r\n     * @type {number}\r\n     */\r\n    vertexByteSize: number;\r\n\r\n    /**\r\n     * The size, in bytes, of a single entry in the array buffer.\r\n     *\r\n     * This is `vertexByteSize * 4` for a quad.\r\n     *\r\n     * @type {number}\r\n     */\r\n    entryByteSize: number;\r\n\r\n    /**\r\n     * The size, in bytes, of the Array Buffer.\r\n     *\r\n     * This is `batchSize * entryByteSize`\r\n     *\r\n     * @type {number}\r\n     */\r\n    bufferByteSize: number;\r\n\r\n    /**\r\n     * The Array Buffer.\r\n     *\r\n     * @type {ArrayBuffer}\r\n     */\r\n    data: ArrayBuffer;\r\n\r\n    /**\r\n     * Float32 View of the Array Buffer.\r\n     *\r\n     * @type {Float32Array}\r\n     */\r\n    vertexViewF32: Float32Array;\r\n\r\n    /**\r\n     * Uint32 View of the Array Buffer.\r\n     *\r\n     * @type {Uint32Array}\r\n     */\r\n    vertexViewU32: Uint32Array;\r\n\r\n    /**\r\n     * The data array buffer.\r\n     *\r\n     * @type {WebGLBuffer}\r\n     */\r\n    vertexBuffer: WebGLBuffer;\r\n\r\n    indexed: boolean = false;\r\n\r\n    isDynamic: boolean = false;\r\n\r\n    /**\r\n     * The total number of entries added to the buffer so far, or reserved to be added.\r\n     *\r\n     * This is the total number of indices / verticies, not faces.\r\n     * Typically there are 3 verts per face, so this value is usually batchSize x 3 for a Mesh.\r\n     *\r\n     * @type {number}\r\n     */\r\n    count: number = 0;\r\n\r\n    /**\r\n     * The current buffer offset.\r\n     *\r\n     * @type {number}\r\n     */\r\n    offset: number = 0;\r\n\r\n    elementsPerEntry: number;\r\n\r\n    constructor (config: IVertexBufferConfig = {})\r\n    {\r\n        const {\r\n            batchSize = 1,\r\n            dataSize = 4,\r\n            isDynamic = true,\r\n            elementsPerEntry = 4,\r\n            vertexElementSize = 6\r\n        } = config;\r\n\r\n        this.batchSize = batchSize;\r\n        this.dataSize = dataSize;\r\n        this.vertexElementSize = vertexElementSize;\r\n        this.isDynamic = isDynamic;\r\n        this.elementsPerEntry = elementsPerEntry;\r\n\r\n        //  Derive the remaining values\r\n        this.vertexByteSize = vertexElementSize * dataSize;\r\n        this.entryByteSize = this.vertexByteSize * elementsPerEntry;\r\n        this.bufferByteSize = batchSize * this.entryByteSize;\r\n\r\n        this.create();\r\n    }\r\n\r\n    resize (batchSize: number): void\r\n    {\r\n        this.batchSize = batchSize;\r\n        this.bufferByteSize = batchSize * this.entryByteSize;\r\n\r\n        if (this.vertexBuffer)\r\n        {\r\n            DeleteGLBuffer(this.vertexBuffer);\r\n        }\r\n\r\n        this.create();\r\n    }\r\n\r\n    create (): void\r\n    {\r\n        const data = new ArrayBuffer(this.bufferByteSize);\r\n\r\n        this.data = data;\r\n\r\n        this.vertexViewF32 = new Float32Array(data);\r\n        this.vertexViewU32 = new Uint32Array(data);\r\n\r\n        this.vertexBuffer = gl.createBuffer();\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\r\n\r\n        const type = (this.isDynamic) ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\r\n\r\n        gl.bufferData(gl.ARRAY_BUFFER, data, type);\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n    }\r\n\r\n    add (count: number): void\r\n    {\r\n        this.count += count;\r\n        this.offset += (this.vertexElementSize * count);\r\n    }\r\n\r\n    reset (): void\r\n    {\r\n        this.count = 0;\r\n        this.offset = 0;\r\n    }\r\n\r\n    canContain (count: number): boolean\r\n    {\r\n        return ((this.count + count) <= this.batchSize);\r\n    }\r\n\r\n    free (): number\r\n    {\r\n        return Math.max(0, 1 - (this.count / this.batchSize));\r\n    }\r\n\r\n    bind (): void\r\n    {\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        DeleteGLBuffer(this.vertexBuffer);\r\n\r\n        this.data = null;\r\n        this.vertexViewF32 = null;\r\n        this.vertexViewU32 = null;\r\n        this.vertexBuffer = null;\r\n    }\r\n}\r\n", "import { DeleteGLBuffer } from './DeleteGLBuffer';\r\nimport { IIndexedVertexBuffer } from './IIndexedVertexBuffer';\r\nimport { IVertexBufferConfig } from './IVertexBufferConfig';\r\nimport { VertexBuffer } from './VertexBuffer';\r\nimport { gl } from '../GL';\r\n\r\nexport class IndexedVertexBuffer extends VertexBuffer implements IIndexedVertexBuffer\r\n{\r\n    /**\r\n     * The size, in bytes, per entry in the element index array.\r\n     *\r\n     * @type {number}\r\n     */\r\n    indexSize: number;\r\n\r\n    /**\r\n     * The size, in quantity of elements, of a single entry in the element index array.\r\n     *\r\n     * This is `vertexElementSize * 4` for a quad.\r\n     *\r\n     * @type {number}\r\n     */\r\n    entryElementSize: number;\r\n\r\n    /**\r\n     * The total number of entries per entry in the element index array.\r\n     *\r\n     * For a quad, the IBO contains 6 entries per entry:\r\n     *\r\n     * 0, 1, 2\r\n     * 2, 3, 0\r\n     *\r\n     * @type {number}\r\n     */\r\n    entryIndexSize: number;\r\n\r\n    /**\r\n     * The Element Array Buffer.\r\n     *\r\n     * @type {Uint16Array}\r\n     */\r\n    index: Uint16Array;\r\n\r\n    /**\r\n     * The element array buffer.\r\n     *\r\n     * @type {WebGLBuffer}\r\n     */\r\n    indexBuffer: WebGLBuffer;\r\n\r\n    indexLayout: number[];\r\n\r\n    constructor (config: IVertexBufferConfig = {})\r\n    {\r\n        super(config);\r\n\r\n        const {\r\n            indexSize = 4,\r\n            entryIndexSize = 6,\r\n            indexLayout = null\r\n        } = config;\r\n\r\n        this.indexed = true;\r\n\r\n        this.indexSize = indexSize;\r\n        this.entryIndexSize = entryIndexSize;\r\n\r\n        //  Derive the remaining values\r\n        this.entryElementSize = this.vertexElementSize * this.elementsPerEntry;\r\n\r\n        const seededIndexBuffer = [];\r\n\r\n        if (indexLayout)\r\n        {\r\n            this.indexLayout = indexLayout;\r\n\r\n            //  Seed the index buffer\r\n            for (let i = 0; i < (this.batchSize * indexSize); i += indexSize)\r\n            {\r\n                for (let c = 0; c < indexLayout.length; c++)\r\n                {\r\n                    seededIndexBuffer.push(i + indexLayout[c]);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.create();\r\n        this.createIndexBuffer(seededIndexBuffer);\r\n    }\r\n\r\n    createIndexBuffer (seededIndex: number[]): void\r\n    {\r\n        this.index = new Uint16Array(seededIndex);\r\n\r\n        this.indexBuffer = gl.createBuffer();\r\n\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\r\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.index, gl.STATIC_DRAW);\r\n\r\n        //  Free memory\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\r\n        seededIndex = [];\r\n    }\r\n\r\n    bind (): void\r\n    {\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        super.destroy();\r\n\r\n        DeleteGLBuffer(this.indexBuffer);\r\n\r\n        this.index = null;\r\n        this.indexLayout = null;\r\n        this.indexBuffer = null;\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Checks if an array can be used as a matrix.\r\n *\r\n * A matrix is a two-dimensional array (array of arrays), where all sub-arrays (rows) have the same length. There must be at least two rows:\r\n *\r\n * ```\r\n *    [\r\n *        [ 1, 1, 1, 1, 1, 1 ],\r\n *        [ 2, 0, 0, 0, 0, 4 ],\r\n *        [ 2, 0, 1, 2, 0, 4 ],\r\n *        [ 2, 0, 3, 4, 0, 4 ],\r\n *        [ 2, 0, 0, 0, 0, 4 ],\r\n *        [ 3, 3, 3, 3, 3, 3 ]\r\n *    ]\r\n * ```\r\n */\r\nexport function CheckMatrix (matrix: unknown[][]): boolean\r\n{\r\n    if (!Array.isArray(matrix) || matrix.length < 2 || !Array.isArray(matrix[0]))\r\n    {\r\n        return false;\r\n    }\r\n\r\n    //  How long is the first row?\r\n    const size = matrix[0].length;\r\n\r\n    //  Validate the rest of the rows are the same length\r\n    for (let i = 1; i < matrix.length; i++)\r\n    {\r\n        if (matrix[i].length !== size)\r\n        {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { CheckMatrix } from './CheckMatrix';\r\n\r\n/**\r\n * Generates a string (which you can pass to console.log) from the given Array Matrix.\r\n */\r\nexport function MatrixToString (matrix: unknown[][]): string\r\n{\r\n    let str = '';\r\n\r\n    if (!CheckMatrix(matrix))\r\n    {\r\n        return str;\r\n    }\r\n\r\n    for (let r = 0; r < matrix.length; r++)\r\n    {\r\n        for (let c = 0; c < matrix[r].length; c++)\r\n        {\r\n            const cell = matrix[r][c].toString();\r\n\r\n            if (cell !== 'undefined')\r\n            {\r\n                str = str.padEnd(2, cell);\r\n            }\r\n            else\r\n            {\r\n                str += '?';\r\n            }\r\n\r\n            if (c < matrix[r].length - 1)\r\n            {\r\n                str += ' |';\r\n            }\r\n        }\r\n\r\n        if (r < matrix.length - 1)\r\n        {\r\n            str += '\\n';\r\n\r\n            for (let i = 0; i < matrix[r].length; i++)\r\n            {\r\n                str += '---';\r\n\r\n                if (i < matrix[r].length - 1)\r\n                {\r\n                    str += '+';\r\n                }\r\n            }\r\n\r\n            str += '\\n';\r\n        }\r\n\r\n    }\r\n\r\n    return str;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Reverses the columns in the given Array Matrix.\r\n */\r\nexport function ReverseColumns (matrix: unknown[][]): unknown[][]\r\n{\r\n    return matrix.reverse();\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Reverses the rows in the given Array Matrix.\r\n */\r\nexport function ReverseRows (matrix: unknown[][]): unknown[][]\r\n{\r\n    for (let i = 0; i < matrix.length; i++)\r\n    {\r\n        matrix[i].reverse();\r\n    }\r\n\r\n    return matrix;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Transposes the elements of the given matrix (array of arrays).\r\n *\r\n * The transpose of a matrix is a new matrix whose rows are the columns of the original.\r\n */\r\nexport function TransposeMatrix (matrix: unknown[][]): unknown[][]\r\n{\r\n    const sourceRowCount = matrix.length;\r\n    const sourceColCount = matrix[0].length;\r\n\r\n    const result = new Array(sourceColCount);\r\n\r\n    for (let i = 0; i < sourceColCount; i++)\r\n    {\r\n        result[i] = new Array(sourceRowCount);\r\n\r\n        for (let j = sourceRowCount - 1; j > -1; j--)\r\n        {\r\n            result[i][j] = matrix[j][i];\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { CheckMatrix } from './CheckMatrix';\r\nimport { TransposeMatrix } from './TransposeMatrix';\r\n\r\n/**\r\n * Rotates the array matrix based on the given rotation value.\r\n *\r\n * The value can be given in degrees: 90, -90, 270, -270 or 180,\r\n * or a string command: `rotateLeft`, `rotateRight` or `rotate180`.\r\n *\r\n * Based on the routine from {@link http://jsfiddle.net/MrPolywhirl/NH42z/}.\r\n */\r\nexport function RotateMatrix (matrix: unknown[][], direction: number | string = 90): unknown[][]\r\n{\r\n    if (!CheckMatrix(matrix))\r\n    {\r\n        return matrix;\r\n    }\r\n\r\n    if (typeof direction !== 'string')\r\n    {\r\n        direction = ((direction % 360) + 360) % 360;\r\n    }\r\n\r\n    if (direction === 90 || direction === -270 || direction === 'rotateLeft')\r\n    {\r\n        matrix = TransposeMatrix(matrix);\r\n        matrix.reverse();\r\n    }\r\n    else if (direction === -90 || direction === 270 || direction === 'rotateRight')\r\n    {\r\n        matrix.reverse();\r\n        matrix = TransposeMatrix(matrix);\r\n    }\r\n    else if (Math.abs(direction as number) === 180 || direction === 'rotate180')\r\n    {\r\n        for (let i = 0; i < matrix.length; i++)\r\n        {\r\n            matrix[i].reverse();\r\n        }\r\n\r\n        matrix.reverse();\r\n    }\r\n\r\n    return matrix;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { RotateMatrix } from './RotateMatrix';\r\n\r\n/**\r\n * Rotates the array matrix 180 degrees.\r\n *\r\n * @function Phaser.Utils.Array.Matrix.Rotate180\r\n * @since 3.0.0\r\n *\r\n * @generic T\r\n * @genericUse {T[][]} - [matrix,$return]\r\n *\r\n * @param {T[][]} [matrix] - The array to rotate.\r\n *\r\n * @return {T[][]} The rotated matrix array. The source matrix should be discard for the returned matrix.\r\n */\r\nexport function Rotate180 (matrix: unknown[][]): unknown[][]\r\n{\r\n    return RotateMatrix(matrix, 180);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { RotateMatrix } from './RotateMatrix';\r\n\r\n/**\r\n * Rotates the array matrix to the left (or 90 degrees)\r\n *\r\n * @function Phaser.Utils.Array.Matrix.RotateLeft\r\n * @since 3.0.0\r\n *\r\n * @generic T\r\n * @genericUse {T[][]} - [matrix,$return]\r\n *\r\n * @param {T[][]} [matrix] - The array to rotate.\r\n *\r\n * @return {T[][]} The rotated matrix array. The source matrix should be discard for the returned matrix.\r\n */\r\nexport function RotateLeft (matrix: unknown[][]): unknown[][]\r\n{\r\n    return RotateMatrix(matrix, 90);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { RotateMatrix } from './RotateMatrix';\r\n\r\n/**\r\n * Rotates the array matrix to the left (or -90 degrees)\r\n *\r\n * @function Phaser.Utils.Array.Matrix.RotateRight\r\n * @since 3.0.0\r\n *\r\n * @generic T\r\n * @genericUse {T[][]} - [matrix,$return]\r\n *\r\n * @param {T[][]} [matrix] - The array to rotate.\r\n *\r\n * @return {T[][]} The rotated matrix array. The source matrix should be discard for the returned matrix.\r\n */\r\nexport function RotateRight (matrix: unknown[][]): unknown[][]\r\n{\r\n    return RotateMatrix(matrix, -90);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Create an array representing the range of numbers (usually integers), between, and inclusive of,\r\n * the given `start` and `end` arguments. For example:\r\n *\r\n * `var array = numberArray(2, 4); // array = [2, 3, 4]`\r\n * `var array = numberArray(0, 9); // array = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]`\r\n *\r\n * This is equivalent to `numberArrayStep(start, end, 1)`.\r\n *\r\n * You can optionally provide a prefix and / or suffix string. If given the array will contain\r\n * strings, not integers. For example:\r\n *\r\n * `var array = numberArray(1, 4, 'Level '); // array = [\"Level 1\", \"Level 2\", \"Level 3\", \"Level 4\"]`\r\n * `var array = numberArray(5, 7, 'HD-', '.png'); // array = [\"HD-5.png\", \"HD-6.png\", \"HD-7.png\"]`\r\n *\r\n * @param {number} start - The minimum value the array starts with.\r\n * @param {number} end - The maximum value the array contains.\r\n * @param {string} [prefix] - Optional prefix to place before the number. If provided the array will contain strings, not integers.\r\n * @param {string} [suffix] - Optional suffix to place after the number. If provided the array will contain strings, not integers.\r\n *\r\n * @return {(number[]|string[])} The array of number values, or strings if a prefix or suffix was provided.\r\n */\r\nexport function NumberArray (start: number, end: number, prefix?: string, suffix?: string): (string | number)[]\r\n{\r\n    const result: (string | number)[] = [];\r\n\r\n    for (let i = start; i <= end; i++)\r\n    {\r\n        if (prefix || suffix)\r\n        {\r\n            let key = (prefix) ? prefix + i.toString() : i.toString();\r\n\r\n            if (suffix)\r\n            {\r\n                key = key.concat(suffix);\r\n            }\r\n\r\n            result.push(key);\r\n        }\r\n        else\r\n        {\r\n            result.push(i);\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Round a given number so it is further away from zero. That is, positive numbers are rounded up, and negative numbers are rounded down.\r\n *\r\n * @function Phaser.Math.RoundAwayFromZero\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The number to round.\r\n *\r\n * @return {number} The rounded number, rounded away from zero.\r\n */\r\nexport function RoundAwayFromZero (value: number): number\r\n{\r\n    // \"Opposite\" of truncate.\r\n    return (value > 0) ? Math.ceil(value) : Math.floor(value);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { RoundAwayFromZero } from '../../math/RoundAwayFromZero';\r\n\r\n/**\r\n * Create an array of numbers (positive and/or negative) progressing from `start`\r\n * up to but not including `end` by advancing by `step`.\r\n *\r\n * If `start` is less than `end` a zero-length range is created unless a negative `step` is specified.\r\n *\r\n * Certain values for `start` and `end` (eg. NaN/undefined/null) are currently coerced to 0;\r\n * for forward compatibility make sure to pass in actual numbers.\r\n *\r\n * @example\r\n * NumberArrayStep(4);\r\n * // => [0, 1, 2, 3]\r\n *\r\n * NumberArrayStep(1, 5);\r\n * // => [1, 2, 3, 4]\r\n *\r\n * NumberArrayStep(0, 20, 5);\r\n * // => [0, 5, 10, 15]\r\n *\r\n * NumberArrayStep(0, -4, -1);\r\n * // => [0, -1, -2, -3]\r\n *\r\n * NumberArrayStep(1, 4, 0);\r\n * // => [1, 1, 1]\r\n *\r\n * NumberArrayStep(0);\r\n * // => []\r\n *\r\n * @param {number} [start=0] - The start of the range.\r\n * @param {number} [end=null] - The end of the range.\r\n * @param {number} [step=1] - The value to increment or decrement by.\r\n *\r\n * @return {number[]} The array of number values.\r\n */\r\nexport function NumberArrayStep (start: number, end: number, step: number): number[]\r\n{\r\n    const result: number[] = [];\r\n\r\n    const total = Math.max(RoundAwayFromZero((end - start) / (step || 1)), 0);\r\n\r\n    for (let i = 0; i < total; i++)\r\n    {\r\n        result.push(start);\r\n\r\n        start += step;\r\n    }\r\n\r\n    return result;\r\n}\r\n", "/**\r\n * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\r\n\r\n/**\r\n * Converts an ArrayBuffer into a base64 string.\r\n *\r\n * The resulting string can optionally be a data uri if the `mediaType` argument is provided.\r\n *\r\n * See https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs for more details.\r\n *\r\n * @function Phaser.Utils.Base64.ArrayBufferToBase64\r\n * @since 3.18.0\r\n *\r\n * @param {ArrayBuffer} arrayBuffer - The Array Buffer to encode.\r\n * @param {string} [mediaType] - An optional media type, i.e. `audio/ogg` or `image/jpeg`. If included the resulting string will be a data URI.\r\n *\r\n * @return {string} The base64 encoded Array Buffer.\r\n */\r\nexport function ArrayBufferToBase64 (arrayBuffer: ArrayBuffer, mediaType: string): string\r\n{\r\n    const bytes = new Uint8Array(arrayBuffer);\r\n    const len = bytes.length;\r\n\r\n    let base64 = (mediaType) ? 'data:' + mediaType + ';base64,' : '';\r\n\r\n    for (let i = 0; i < len; i += 3)\r\n    {\r\n        base64 += chars[bytes[i] >> 2];\r\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\r\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\r\n        base64 += chars[bytes[i + 2] & 63];\r\n    }\r\n\r\n    if ((len % 3) === 2)\r\n    {\r\n        base64 = base64.substring(0, base64.length - 1) + '=';\r\n    }\r\n    else if (len % 3 === 1)\r\n    {\r\n        base64 = base64.substring(0, base64.length - 2) + '==';\r\n    }\r\n\r\n    return base64;\r\n}\r\n", "/**\r\n * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\r\n\r\n//  Use a lookup table to find the index.\r\nconst lookup = new Uint8Array(256);\r\n\r\nfor (let i = 0; i < chars.length; i++)\r\n{\r\n    lookup[chars.charCodeAt(i)] = i;\r\n}\r\n\r\n/**\r\n * Converts a base64 string, either with or without a data uri, into an Array Buffer.\r\n *\r\n * @function Phaser.Utils.Base64.Base64ToArrayBuffer\r\n * @since 3.18.0\r\n *\r\n * @param {string} base64 - The base64 string to be decoded. Can optionally contain a data URI header, which will be stripped out prior to decoding.\r\n *\r\n * @return {ArrayBuffer} An ArrayBuffer decoded from the base64 data.\r\n */\r\nexport function Base64ToArrayBuffer (base64: string): ArrayBuffer\r\n{\r\n    //  Is it a data uri? if so, strip the header away\r\n    base64 = base64.substr(base64.indexOf(',') + 1);\r\n\r\n    const len = base64.length;\r\n    let bufferLength = len * 0.75;\r\n    let p = 0;\r\n    let encoded1;\r\n    let encoded2;\r\n    let encoded3;\r\n    let encoded4;\r\n\r\n    if (base64[len - 1] === '=')\r\n    {\r\n        bufferLength--;\r\n\r\n        if (base64[len - 2] === '=')\r\n        {\r\n            bufferLength--;\r\n        }\r\n    }\r\n\r\n    const arrayBuffer = new ArrayBuffer(bufferLength);\r\n    const bytes = new Uint8Array(arrayBuffer);\r\n\r\n    for (let i = 0; i < len; i += 4)\r\n    {\r\n        encoded1 = lookup[base64.charCodeAt(i)];\r\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\r\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\r\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\r\n\r\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\r\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\r\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\r\n    }\r\n\r\n    return arrayBuffer;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Capitalizes the first letter of a string if there is one.\r\n * @example\r\n * UppercaseFirst('abc');\r\n * // returns 'Abc'\r\n * @example\r\n * UppercaseFirst('the happy family');\r\n * // returns 'The happy family'\r\n * @example\r\n * UppercaseFirst('');\r\n * // returns ''\r\n *\r\n * @function Phaser.Utils.String.UppercaseFirst\r\n * @since 3.0.0\r\n *\r\n * @param {string} str - The string to capitalize.\r\n *\r\n * @return {string} A new string, same as the first, but with the first letter capitalized.\r\n */\r\nexport function UppercaseFirst (str: string): string\r\n{\r\n    return str && str[0].toUpperCase() + str.slice(1);\r\n}\r\n", "export function NOOP (): void\r\n{\r\n    //  No-op\r\n}\r\n", "import { NOOP } from '../../utils';\r\n\r\n//  4x4 Matrix in column-major format\r\n\r\n/**\r\n * data[0] = m00\r\n * data[1] = m01\r\n * data[2] = m02\r\n * data[3] = m03\r\n * data[4] = m10\r\n * data[5] = m11\r\n * data[6] = m12\r\n * data[7] = m13\r\n * data[8] = m20\r\n * data[9] = m21\r\n * data[10] = m22\r\n * data[11] = m23\r\n * data[12] = m30\r\n * data[13] = m31\r\n * data[14] = m32\r\n * data[15] = m33\r\n */\r\n\r\nexport class Matrix4\r\n{\r\n    data: Float32Array;\r\n\r\n    onChange: (mat4: Matrix4) => void;\r\n\r\n    constructor (src?: Matrix4 | Float32List)\r\n    {\r\n        const data = new Float32Array(16);\r\n\r\n        this.data = data;\r\n        this.onChange = NOOP;\r\n\r\n        if (src)\r\n        {\r\n            if (Array.isArray(src))\r\n            {\r\n                this.fromArray(src);\r\n            }\r\n            else\r\n            {\r\n                this.fromArray((src as Matrix4).data);\r\n            }\r\n        }\r\n        else\r\n        {\r\n            data[0] = 1;\r\n            data[5] = 1;\r\n            data[10] = 1;\r\n            data[15] = 1;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param m00 - 1st value of 1st row\r\n     * @param m01 - 2nd value of 1st row\r\n     * @param m02 - 3rd value of 1st row\r\n     * @param m03 - 4th value of 1st row\r\n     * @param m10 - 1st value of 2nd row\r\n     * @param m11 - 2nd value of 2nd row\r\n     * @param m12 - 3rd value of 2nd row\r\n     * @param m13 - 4th value of 2nd row\r\n     * @param m20 - 1st value of 3rd row\r\n     * @param m21 - 2nd value of 3rd row\r\n     * @param m22 - 3rd value of 3rd row\r\n     * @param m23 - 4th value of 3rd row\r\n     * @param m30 - 1st value of 4th row\r\n     * @param m31 - 2nd value of 4th row\r\n     * @param m32 - 3rd value of 4th row\r\n     * @param m33 - 4th value of 4th row\r\n     */\r\n    set (m00: number, m01: number, m02: number, m03: number, m10: number, m11: number, m12: number, m13: number, m20: number, m21: number, m22: number, m23: number, m30: number, m31: number, m32: number, m33: number): this\r\n    {\r\n        const data = this.data;\r\n\r\n        data[ 0 ] = m00;\r\n        data[ 1 ] = m01;\r\n        data[ 2 ] = m02;\r\n        data[ 3 ] = m03;\r\n\r\n        data[ 4 ] = m10;\r\n        data[ 5 ] = m11;\r\n        data[ 6 ] = m12;\r\n        data[ 7 ] = m13;\r\n\r\n        data[ 8 ] = m20;\r\n        data[ 9 ] = m21;\r\n        data[ 10 ] = m22;\r\n        data[ 11 ] = m23;\r\n\r\n        data[ 12 ] = m30;\r\n        data[ 13 ] = m31;\r\n        data[ 14 ] = m32;\r\n        data[ 15 ] = m33;\r\n\r\n        this.onChange(this);\r\n\r\n        return this;\r\n    }\r\n\r\n    toArray (dst: Float32List = [], index: number = 0): Float32List\r\n    {\r\n        const data = this.data;\r\n\r\n        for (let i = 0; i < 16; i++)\r\n        {\r\n            dst[ index + i ] = data[i];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    fromArray (src: Float32List, index: number = 0): this\r\n    {\r\n        const data = this.data;\r\n\r\n        for (let i = 0; i < 16; i++)\r\n        {\r\n            data[i] = src[ index + i ];\r\n        }\r\n\r\n        this.onChange(this);\r\n\r\n        return this;\r\n    }\r\n\r\n    toString (): string\r\n    {\r\n        return '[ mat4=' + this.data.join(', ') + ' ]';\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        this.onChange = NOOP;\r\n        this.data = null;\r\n    }\r\n}\r\n", "import { Matrix4 } from './Matrix4';\r\n\r\n// Generates a orthogonal projection matrix with the given bounds\r\n\r\nexport function Mat4Ortho (left: number, right: number, bottom: number, top: number, near: number, far: number, out: Matrix4 = new Matrix4()): Matrix4\r\n{\r\n    const lr = 1 / (left - right);\r\n    const bt = 1 / (bottom - top);\r\n    const nf = 1 / (near - far);\r\n\r\n    return out.set(\r\n        -2 * lr,\r\n        0,\r\n        0,\r\n        0,\r\n        0,\r\n        -2 * bt,\r\n        0,\r\n        0,\r\n        0,\r\n        0,\r\n        2 * nf,\r\n        0,\r\n        (left + right) * lr,\r\n        (top + bottom) * bt,\r\n        (far + near) * nf,\r\n        1\r\n    );\r\n}\r\n", "import { IVertexAttribPointer } from './IVertexAttribPointer';\r\nimport { gl } from '../GL';\r\n\r\nexport function CreateAttributes (program: WebGLProgram, config: Object): Map<string, IVertexAttribPointer>\r\n{\r\n    const attributes = new Map();\r\n\r\n    const defaultSettings =\r\n    {\r\n        size: 1,\r\n        type: gl.FLOAT,\r\n        normalized: false,\r\n        stride: 0,\r\n        offset: 0\r\n    };\r\n\r\n    const total = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\r\n\r\n    for (let i = 0; i < total; i++)\r\n    {\r\n        const attrib = gl.getActiveAttrib(program, i);\r\n\r\n        if (!attrib)\r\n        {\r\n            break;\r\n        }\r\n\r\n        const name = attrib.name;\r\n\r\n        const index = gl.getAttribLocation(program, name);\r\n\r\n        gl.enableVertexAttribArray(index);\r\n\r\n        const setting = config.hasOwnProperty(name) ? config[name] : {};\r\n\r\n        const {\r\n\r\n            size = defaultSettings.size,\r\n            type = defaultSettings.type,\r\n            normalized = defaultSettings.normalized,\r\n            stride = defaultSettings.stride,\r\n            offset = defaultSettings.offset\r\n\r\n        } = setting;\r\n\r\n        attributes.set(name, { index, size, type, normalized, stride, offset });\r\n    }\r\n\r\n    return attributes;\r\n}\r\n", "import { gl } from '../GL';\r\n\r\nexport function DeleteShaders (...shaders: WebGLShader[]): void\r\n{\r\n    shaders.forEach(shader =>\r\n    {\r\n        gl.deleteShader(shader);\r\n    });\r\n}\r\n", "import { DeleteShaders } from './DeleteShaders';\r\nimport { gl } from '../GL';\r\n\r\nexport function CreateProgram (...shaders: WebGLShader[]): WebGLProgram\r\n{\r\n    const program = gl.createProgram();\r\n\r\n    shaders.forEach(shader =>\r\n    {\r\n        gl.attachShader(program, shader);\r\n    });\r\n\r\n    gl.linkProgram(program);\r\n\r\n    const status = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n\r\n    if (!status)\r\n    {\r\n        const info = gl.getProgramInfoLog(program);\r\n\r\n        console.error(`Error linking program: ${info}`);\r\n\r\n        gl.deleteProgram(program);\r\n\r\n        DeleteShaders(...shaders);\r\n\r\n        return null;\r\n    }\r\n\r\n    return program;\r\n}\r\n", "import { gl } from '../GL';\r\n\r\nexport function CreateShader (source: string, type: GLenum): WebGLShader | null\r\n{\r\n    const shader = gl.createShader(type);\r\n\r\n    gl.shaderSource(shader, source);\r\n\r\n    gl.compileShader(shader);\r\n\r\n    const status = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n\r\n    if (!status)\r\n    {\r\n        const info = gl.getShaderInfoLog(shader);\r\n\r\n        //  Adding line numbers idea borrowed from Gregg Tavares!\r\n        const sourceLines = source.split('\\n').map((line, index) =>\r\n        {\r\n            return `${index}: ${line}`;\r\n        });\r\n\r\n        console.error(`Error compiling shader: ${info}`, sourceLines.join('\\n'));\r\n\r\n        gl.deleteShader(shader);\r\n\r\n        return null;\r\n    }\r\n\r\n    return shader;\r\n}\r\n", "import { gl } from '../GL';\r\n\r\nexport type FloatSetter = (v: number) => void;\r\nexport type F32Setter = (v: Float32List) => void;\r\nexport type I32Setter = (v: Int32List) => void;\r\n\r\nexport function CreateUniformSetter (uniform: WebGLActiveInfo, location: WebGLUniformLocation, isArray: boolean = false): FloatSetter | F32Setter | I32Setter\r\n{\r\n    switch (uniform.type)\r\n    {\r\n        case gl.INT:\r\n        case gl.BOOL:\r\n        {\r\n            if (isArray)\r\n            {\r\n                return (v: Int32List): void =>\r\n                {\r\n                    gl.uniform1iv(location, v);\r\n                };\r\n            }\r\n            else\r\n            {\r\n                return (v: number): void =>\r\n                {\r\n                    gl.uniform1i(location, v);\r\n                };\r\n            }\r\n        }\r\n\r\n        case gl.INT_VEC2:\r\n        case gl.BOOL_VEC2:\r\n        {\r\n            return (v: Int32List): void =>\r\n            {\r\n                gl.uniform2iv(location, v);\r\n            };\r\n        }\r\n\r\n        case gl.INT_VEC3:\r\n        case gl.BOOL_VEC3:\r\n        {\r\n            return (v: Int32List): void =>\r\n            {\r\n                gl.uniform3iv(location, v);\r\n            };\r\n        }\r\n\r\n        case gl.INT_VEC4:\r\n        case gl.BOOL_VEC4:\r\n        {\r\n            return (v: Int32List): void =>\r\n            {\r\n                gl.uniform4iv(location, v);\r\n            };\r\n        }\r\n\r\n        case gl.FLOAT:\r\n        {\r\n            if (isArray)\r\n            {\r\n                return (v: Float32List): void =>\r\n                {\r\n                    gl.uniform1fv(location, v);\r\n                };\r\n            }\r\n            else\r\n            {\r\n                return (v: number): void =>\r\n                {\r\n                    gl.uniform1f(location, v);\r\n                };\r\n            }\r\n        }\r\n\r\n        case gl.FLOAT_VEC2:\r\n        {\r\n            return (v: Float32List): void =>\r\n            {\r\n                gl.uniform2fv(location, v);\r\n            };\r\n        }\r\n\r\n        case gl.FLOAT_VEC3:\r\n        {\r\n            return (v: Float32List): void =>\r\n            {\r\n                gl.uniform3fv(location, v);\r\n            };\r\n        }\r\n\r\n        case gl.FLOAT_VEC4:\r\n        {\r\n            return (v: Float32List): void =>\r\n            {\r\n                gl.uniform4fv(location, v);\r\n            };\r\n        }\r\n\r\n        case gl.FLOAT_MAT2:\r\n        {\r\n            return (v: Float32List): void =>\r\n            {\r\n                gl.uniformMatrix2fv(location, false, v);\r\n            };\r\n        }\r\n\r\n        case gl.FLOAT_MAT3:\r\n        {\r\n            return (v: Float32List): void =>\r\n            {\r\n                gl.uniformMatrix3fv(location, false, v);\r\n            };\r\n        }\r\n\r\n        case gl.FLOAT_MAT4:\r\n        {\r\n            return (v: Float32List): void =>\r\n            {\r\n                gl.uniformMatrix4fv(location, false, v);\r\n            };\r\n        }\r\n\r\n        case gl.SAMPLER_2D:\r\n        case gl.SAMPLER_CUBE:\r\n        {\r\n            if (uniform.size > 1)\r\n            {\r\n                return (v: Int32List): void =>\r\n                {\r\n                    gl.uniform1iv(location, v);\r\n                };\r\n            }\r\n            else\r\n            {\r\n                return (v: number): void =>\r\n                {\r\n                    gl.uniform1i(location, v);\r\n                };\r\n            }\r\n        }\r\n    }\r\n}\r\n", "import { CreateUniformSetter } from './CreateUniformSetter';\r\nimport { gl } from '../GL';\r\n\r\nexport function CreateUniforms (program: WebGLProgram): Map<string, Function>\r\n{\r\n    const uniforms = new Map();\r\n\r\n    const total = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\r\n\r\n    for (let i = 0; i < total; i++)\r\n    {\r\n        const uniform = gl.getActiveUniform(program, i);\r\n\r\n        let name = uniform.name;\r\n\r\n        if (name.startsWith('gl_') || name.startsWith('webgl_'))\r\n        {\r\n            //  Skip built-in uniforms\r\n            continue;\r\n        }\r\n\r\n        const location = gl.getUniformLocation(program, uniform.name);\r\n\r\n        if (location)\r\n        {\r\n            let isArray = false;\r\n\r\n            //  If uniform name has [0] at the end, remove it\r\n            if (name.substr(-3) === '[0]')\r\n            {\r\n                name = name.substr(0, name.length - 3);\r\n\r\n                isArray = (uniform.size > 1);\r\n            }\r\n\r\n            uniforms.set(name, CreateUniformSetter(uniform, location, isArray));\r\n        }\r\n    }\r\n\r\n    return uniforms;\r\n}\r\n", "const BYTE                   = 0x1400;\r\nconst UNSIGNED_BYTE          = 0x1401;\r\nconst SHORT                  = 0x1402;\r\nconst UNSIGNED_SHORT         = 0x1403;\r\nconst INT                    = 0x1404;\r\nconst UNSIGNED_INT           = 0x1405;\r\nconst FLOAT                  = 0x1406;\r\nconst REPEAT                 = 0x2901;  // eslint-disable-line\r\nconst CLAMP_TO_EDGE          = 0x812F;\r\nconst MIRRORED_REPEAT        = 0x8370;  // eslint-disable-line\r\nconst NEAREST                = 0x2600;  // eslint-disable-line\r\nconst LINEAR                 = 0x2601;\r\nconst NEAREST_MIPMAP_NEAREST = 0x2700;  // eslint-disable-line\r\nconst LINEAR_MIPMAP_NEAREST  = 0x2701;  // eslint-disable-line\r\nconst NEAREST_MIPMAP_LINEAR  = 0x2702;  // eslint-disable-line\r\nconst LINEAR_MIPMAP_LINEAR   = 0x2703;  // eslint-disable-line\r\n\r\nexport {\r\n    BYTE,\r\n    UNSIGNED_BYTE,\r\n    SHORT,\r\n    UNSIGNED_SHORT,\r\n    INT,\r\n    UNSIGNED_INT,\r\n    FLOAT,\r\n    REPEAT,\r\n    CLAMP_TO_EDGE,\r\n    MIRRORED_REPEAT,\r\n    NEAREST,\r\n    LINEAR,\r\n    NEAREST_MIPMAP_NEAREST,\r\n    LINEAR_MIPMAP_NEAREST,\r\n    NEAREST_MIPMAP_LINEAR,\r\n    LINEAR_MIPMAP_LINEAR\r\n};\r\n", "import * as GL_CONST from '../GL_CONST';\r\n\r\n// size = 8\r\n// size = 8, offset = position\r\n// size = 4, offset = position + tex coord\r\n// size = 4, offset = position + tex coord + index\r\n\r\nexport const DefaultQuadAttributes =\r\n{\r\n    aVertexPosition: { size: 2, type: GL_CONST.FLOAT, normalized: false, offset: 0 },\r\n    aTextureCoord: { size: 2, type: GL_CONST.FLOAT, normalized: false, offset: 8 },\r\n    aTextureId: { size: 1, type: GL_CONST.FLOAT, normalized: false, offset: 16 },\r\n    aTintColor: { size: 4, type: GL_CONST.UNSIGNED_BYTE, normalized: true, offset: 20 }\r\n};\r\n", "export const DefaultQuadUniforms =\r\n{\r\n    uProjectionMatrix: new Float32Array(),\r\n    uCameraMatrix: new Float32Array(),\r\n    uTexture: 0\r\n};\r\n", "import { gl } from '../GL';\r\n\r\nexport function CreateDepthBuffer (framebuffer: WebGLFramebuffer, textureWidth: number, textureHeight: number): WebGLRenderbuffer\r\n{\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\r\n\r\n    const depthBuffer = gl.createRenderbuffer();\r\n\r\n    gl.bindRenderbuffer(gl.RENDERBUFFER, depthBuffer);\r\n\r\n    gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, textureWidth, textureHeight);\r\n\r\n    gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, depthBuffer);\r\n\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n\r\n    return depthBuffer;\r\n}\r\n", "import { gl } from '../GL';\r\n\r\nexport function CreateFramebuffer (texture: WebGLTexture, attachment?: GLenum): WebGLFramebuffer\r\n{\r\n    if (!attachment)\r\n    {\r\n        attachment = gl.COLOR_ATTACHMENT0;\r\n    }\r\n\r\n    const framebuffer = gl.createFramebuffer();\r\n\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\r\n\r\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_2D, texture, 0);\r\n\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n\r\n    return framebuffer;\r\n}\r\n", "export const SINGLE_QUAD_FRAG =\r\n`#define SHADER_NAME SINGLE_QUAD_FRAG\r\n\r\nprecision highp float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture;\r\n\r\nvoid main (void)\r\n{\r\n    vec4 color = texture2D(uTexture, vTextureCoord);\r\n\r\n    gl_FragColor = color * vec4(vTintColor.bgr * vTintColor.a, vTintColor.a);\r\n}`;\r\n", "export const SINGLE_QUAD_VERT =\r\n`#define SHADER_NAME SINGLE_QUAD_VERT\r\n\r\nprecision highp float;\r\n\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\nattribute float aTextureId;\r\nattribute vec4 aTintColor;\r\n\r\nuniform mat4 uProjectionMatrix;\r\nuniform mat4 uCameraMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nvoid main (void)\r\n{\r\n    vTextureCoord = aTextureCoord;\r\n    vTextureId = aTextureId;\r\n    vTintColor = aTintColor;\r\n\r\n    gl_Position = uProjectionMatrix * uCameraMatrix * vec4(aVertexPosition, 0.0, 1.0);\r\n}`;\r\n", "import { IFrame } from './IFrame';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\nimport { Texture } from './Texture';\r\nimport { Vertex } from '../components';\r\n\r\nexport class Frame implements IFrame\r\n{\r\n    texture: Texture;\r\n    key: string | number;\r\n\r\n    //  This is the actual area of the texture to draw to canvas / webgl, including any extruded data.\r\n    //  This is the same as the 'trimmed' + 'extruded' area from an atlas.\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n\r\n    trimmed: boolean = false;\r\n\r\n    //  Original size of the image before being trimmed or added to an atlas (which can add extrude data to it).\r\n    sourceSizeWidth: number;\r\n    sourceSizeHeight: number;\r\n\r\n    //  The size of the image having been trimmed, before being added to the atlas (i.e. doesn't have any extrusion values in it)\r\n    spriteSourceSizeX: number;\r\n    spriteSourceSizeY: number;\r\n    spriteSourceSizeWidth: number;\r\n    spriteSourceSizeHeight: number;\r\n\r\n    pivot: { x: number; y: number };\r\n\r\n    u0: number;\r\n    v0: number;\r\n    u1: number;\r\n    v1: number;\r\n\r\n    constructor (texture: Texture, key: string | number, x: number, y: number, width: number, height: number)\r\n    {\r\n        this.texture = texture;\r\n        this.key = key;\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        this.sourceSizeWidth = width;\r\n        this.sourceSizeHeight = height;\r\n\r\n        this.updateUVs();\r\n    }\r\n\r\n    setPivot (x: number, y: number): void\r\n    {\r\n        this.pivot = { x, y };\r\n    }\r\n\r\n    setSize (width: number, height: number): void\r\n    {\r\n        this.width = width;\r\n        this.height = height;\r\n        this.sourceSizeWidth = width;\r\n        this.sourceSizeHeight = height;\r\n\r\n        this.updateUVs();\r\n    }\r\n\r\n    setSourceSize (width: number, height: number): void\r\n    {\r\n        this.sourceSizeWidth = width;\r\n        this.sourceSizeHeight = height;\r\n    }\r\n\r\n    setTrim (width: number, height: number, x: number, y: number, w: number, h: number): void\r\n    {\r\n        this.trimmed = true;\r\n\r\n        this.sourceSizeWidth = width;\r\n        this.sourceSizeHeight = height;\r\n\r\n        this.spriteSourceSizeX = x;\r\n        this.spriteSourceSizeY = y;\r\n        this.spriteSourceSizeWidth = w;\r\n        this.spriteSourceSizeHeight = h;\r\n    }\r\n\r\n    getExtent (originX: number, originY: number): { left: number; right: number; top: number; bottom: number }\r\n    {\r\n        const sourceSizeWidth = this.sourceSizeWidth;\r\n        const sourceSizeHeight = this.sourceSizeHeight;\r\n\r\n        let left: number;\r\n        let right: number;\r\n        let top: number;\r\n        let bottom: number;\r\n\r\n        if (this.trimmed)\r\n        {\r\n            left = this.spriteSourceSizeX - (originX * sourceSizeWidth);\r\n            right = left + this.spriteSourceSizeWidth;\r\n\r\n            top = this.spriteSourceSizeY - (originY * sourceSizeHeight);\r\n            bottom = top + this.spriteSourceSizeHeight;\r\n        }\r\n        else\r\n        {\r\n            left = -originX * sourceSizeWidth;\r\n            right = left + sourceSizeWidth;\r\n\r\n            top = -originY * sourceSizeHeight;\r\n            bottom = top + sourceSizeHeight;\r\n        }\r\n\r\n        return { left, right, top, bottom };\r\n    }\r\n\r\n    copyToExtent (child: IGameObject): this\r\n    {\r\n        const originX = child.originX;\r\n        const originY = child.originY;\r\n\r\n        const sourceSizeWidth = this.sourceSizeWidth;\r\n        const sourceSizeHeight = this.sourceSizeHeight;\r\n\r\n        let x: number;\r\n        let y: number;\r\n        let width: number;\r\n        let height: number;\r\n\r\n        if (this.trimmed)\r\n        {\r\n            x = this.spriteSourceSizeX - (originX * sourceSizeWidth);\r\n            y = this.spriteSourceSizeY - (originY * sourceSizeHeight);\r\n\r\n            width = this.spriteSourceSizeWidth;\r\n            height = this.spriteSourceSizeHeight;\r\n        }\r\n        else\r\n        {\r\n            x = -originX * sourceSizeWidth;\r\n            y = -originY * sourceSizeHeight;\r\n\r\n            width = sourceSizeWidth;\r\n            height = sourceSizeHeight;\r\n        }\r\n\r\n        child.setExtent(x, y, width, height);\r\n\r\n        return this;\r\n    }\r\n\r\n    copyToVertices (vertices: Vertex[], offset: number = 0): this\r\n    {\r\n        const { u0, u1, v0, v1 } = this;\r\n\r\n        vertices[offset + 0].setUV(u0, v0);\r\n        vertices[offset + 1].setUV(u0, v1);\r\n        vertices[offset + 2].setUV(u1, v1);\r\n        vertices[offset + 3].setUV(u1, v0);\r\n\r\n        return this;\r\n    }\r\n\r\n    updateUVs (): void\r\n    {\r\n        const { x, y, width, height } = this;\r\n\r\n        const baseTextureWidth = this.texture.width;\r\n        const baseTextureHeight = this.texture.height;\r\n\r\n        this.u0 = x / baseTextureWidth;\r\n        this.v0 = y / baseTextureHeight;\r\n\r\n        this.u1 = (x + width) / baseTextureWidth;\r\n        this.v1 = (y + height) / baseTextureHeight;\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        this.texture = null;\r\n    }\r\n}\r\n", "import { BindingQueue } from '../renderer/BindingQueue';\r\nimport { Frame } from './Frame';\r\nimport { IGLTextureBinding } from '../renderer/webgl1/textures/IGLTextureBinding';\r\nimport { IGLTextureBindingConfig } from '../renderer/webgl1/textures/IGLTextureBindingConfig';\r\nimport { ITexture } from './ITexture';\r\n\r\nexport class Texture implements ITexture\r\n{\r\n    //  Unique identifier of this Texture, if stored in the Texture Manager\r\n    key: string = '';\r\n\r\n    width: number;\r\n    height: number;\r\n\r\n    image: TexImageSource;\r\n\r\n    binding: IGLTextureBinding;\r\n\r\n    firstFrame: Frame;\r\n\r\n    frames: Map<string | number, Frame>;\r\n\r\n    data: unknown;\r\n\r\n    constructor (image?: TexImageSource, width?: number, height?: number, glConfig?: IGLTextureBindingConfig)\r\n    {\r\n        if (image)\r\n        {\r\n            width = image.width;\r\n            height = image.height;\r\n        }\r\n\r\n        this.image = image;\r\n\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        this.frames = new Map();\r\n\r\n        this.data = {};\r\n\r\n        this.addFrame('__BASE', 0, 0, width, height);\r\n\r\n        BindingQueue.add(this, glConfig);\r\n    }\r\n\r\n    addFrame (key: string | number, x: number, y: number, width: number, height: number): Frame\r\n    {\r\n        if (this.frames.has(key))\r\n        {\r\n            return null;\r\n        }\r\n\r\n        const frame = new Frame(this, key, x, y, width, height);\r\n\r\n        this.frames.set(key, frame);\r\n\r\n        if (!this.firstFrame || this.firstFrame.key === '__BASE')\r\n        {\r\n            this.firstFrame = frame;\r\n        }\r\n\r\n        return frame;\r\n    }\r\n\r\n    getFrame (key?: string | number | Frame): Frame\r\n    {\r\n        //  null, undefined, empty string, zero\r\n        if (!key)\r\n        {\r\n            return this.firstFrame;\r\n        }\r\n\r\n        if (key instanceof Frame)\r\n        {\r\n            key = key.key;\r\n        }\r\n\r\n        let frame: Frame = this.frames.get(key);\r\n\r\n        if (!frame)\r\n        {\r\n            console.warn(`Frame missing: ${key}`);\r\n\r\n            frame = this.firstFrame;\r\n        }\r\n\r\n        return frame;\r\n    }\r\n\r\n    setSize (width: number, height: number): void\r\n    {\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        const frame = this.frames.get('__BASE');\r\n\r\n        frame.setSize(width, height);\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        if (this.binding)\r\n        {\r\n            this.binding.destroy();\r\n        }\r\n\r\n        this.frames.clear();\r\n\r\n        this.data = null;\r\n        this.image = null;\r\n        this.firstFrame = null;\r\n    }\r\n}\r\n", "import { GetHeight, GetResolution, GetWidth } from '../../../config/size/';\r\n\r\nimport { CreateAttributes } from './CreateAttributes';\r\nimport { CreateDepthBuffer } from '../fbo/CreateDepthBuffer';\r\nimport { CreateFramebuffer } from '../fbo/CreateFramebuffer';\r\nimport { CreateProgram } from './CreateProgram';\r\nimport { CreateShader } from './CreateShader';\r\nimport { CreateUniforms } from './CreateUniforms';\r\nimport { DefaultQuadAttributes } from './DefaultQuadAttributes';\r\nimport { DefaultQuadUniforms } from './DefaultQuadUniforms';\r\nimport { DeleteFramebuffer } from '../fbo/DeleteFramebuffer';\r\nimport { DeleteGLTexture } from '../textures/DeleteGLTexture';\r\nimport { DeleteShaders } from './DeleteShaders';\r\nimport { GLTextureBinding } from '../textures/GLTextureBinding';\r\nimport { IRenderPass } from '../renderpass/IRenderPass';\r\nimport { IShader } from './IShader';\r\nimport { IShaderConfig } from './IShaderConfig';\r\nimport { IVertexAttribPointer } from './IVertexAttribPointer';\r\nimport { SINGLE_QUAD_FRAG } from '../glsl/SINGLE_QUAD_FRAG';\r\nimport { SINGLE_QUAD_VERT } from '../glsl/SINGLE_QUAD_VERT';\r\nimport { Texture } from '../../../textures/Texture';\r\nimport { gl } from '../GL';\r\n\r\nexport class Shader implements IShader\r\n{\r\n    program: WebGLProgram;\r\n\r\n    attributes: Map<string, IVertexAttribPointer>;\r\n\r\n    uniforms: Map<string, unknown>;\r\n\r\n    uniformSetters: Map<string, Function>;\r\n\r\n    texture: Texture;\r\n\r\n    framebuffer: WebGLFramebuffer;\r\n\r\n    renderToFramebuffer: boolean = false;\r\n\r\n    renderToDepthbuffer: boolean = false;\r\n\r\n    constructor (config?: IShaderConfig)\r\n    {\r\n        if (config)\r\n        {\r\n            this.fromConfig(config);\r\n        }\r\n    }\r\n\r\n    fromConfig (config: IShaderConfig): void\r\n    {\r\n        const {\r\n            attributes = DefaultQuadAttributes,\r\n            fragmentShader = SINGLE_QUAD_FRAG,\r\n            height = GetHeight(),\r\n            renderToFramebuffer = false,\r\n            renderToDepthbuffer = false,\r\n            resolution = GetResolution(),\r\n            vertexShader = SINGLE_QUAD_VERT,\r\n            width = GetWidth(),\r\n            uniforms = DefaultQuadUniforms\r\n        } = config;\r\n\r\n        this.create(fragmentShader, vertexShader, uniforms, attributes);\r\n\r\n        if (renderToFramebuffer)\r\n        {\r\n            this.renderToFramebuffer = true;\r\n\r\n            const texture = new Texture(null, width * resolution, height * resolution);\r\n            const binding = new GLTextureBinding(texture);\r\n\r\n            texture.binding = binding;\r\n\r\n            binding.framebuffer = CreateFramebuffer(binding.texture);\r\n\r\n            if (renderToDepthbuffer)\r\n            {\r\n                this.renderToDepthbuffer = true;\r\n\r\n                binding.depthbuffer = CreateDepthBuffer(binding.framebuffer, texture.width, texture.height);\r\n            }\r\n\r\n            this.texture = texture;\r\n            this.framebuffer = binding.framebuffer;\r\n        }\r\n    }\r\n\r\n    create (fragmentShaderSource: string, vertexShaderSource: string, uniforms: {}, attribs: {}): void\r\n    {\r\n        const fragmentShader = CreateShader(fragmentShaderSource, gl.FRAGMENT_SHADER);\r\n        const vertexShader = CreateShader(vertexShaderSource, gl.VERTEX_SHADER);\r\n\r\n        if (!fragmentShader || !vertexShader)\r\n        {\r\n            return;\r\n        }\r\n\r\n        const program = CreateProgram(fragmentShader, vertexShader);\r\n\r\n        if (!program)\r\n        {\r\n            return;\r\n        }\r\n\r\n        const currentProgram = gl.getParameter(gl.CURRENT_PROGRAM);\r\n\r\n        gl.useProgram(program);\r\n\r\n        this.program = program;\r\n\r\n        this.uniformSetters = CreateUniforms(program);\r\n\r\n        this.uniforms = new Map();\r\n\r\n        //  Copy starting values from the config object to the uniforms map\r\n        for (const [ key, value ] of Object.entries(uniforms))\r\n        {\r\n            this.uniforms.set(key, value);\r\n        }\r\n\r\n        this.attributes = CreateAttributes(program, attribs);\r\n\r\n        gl.useProgram(currentProgram);\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    updateUniforms (renderPass: IRenderPass): void\r\n    {\r\n        //  Use this to set any extra uniform values prior to the bind\r\n    }\r\n\r\n    bind (renderPass: IRenderPass): boolean\r\n    {\r\n        const uniforms = this.uniforms;\r\n\r\n        uniforms.set('uProjectionMatrix', renderPass.projectionMatrix.data);\r\n        uniforms.set('uCameraMatrix', renderPass.cameraMatrix.data);\r\n\r\n        this.updateUniforms(renderPass);\r\n\r\n        return this.setUniforms(renderPass);\r\n    }\r\n\r\n    setUniform (key: string, value: unknown): void\r\n    {\r\n        const uniforms = this.uniforms;\r\n\r\n        if (uniforms.has(key))\r\n        {\r\n            uniforms.set(key, value);\r\n\r\n            const setter = this.uniformSetters.get(key);\r\n\r\n            setter(value);\r\n        }\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    setUniforms (renderPass: IRenderPass): boolean\r\n    {\r\n        if (!this.program)\r\n        {\r\n            return false;\r\n        }\r\n\r\n        gl.useProgram(this.program);\r\n\r\n        const uniforms = this.uniforms;\r\n\r\n        for (const [ name, setter ] of this.uniformSetters.entries())\r\n        {\r\n            setter(uniforms.get(name));\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    //  stride = vertexByteSize\r\n    setAttributes (renderPass: IRenderPass): void\r\n    {\r\n        if (this.program)\r\n        {\r\n            const stride = renderPass.currentVertexBuffer.vertexByteSize;\r\n\r\n            this.attributes.forEach(attrib =>\r\n            {\r\n                gl.vertexAttribPointer(attrib.index, attrib.size, attrib.type, attrib.normalized, stride, attrib.offset);\r\n            });\r\n        }\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        DeleteShaders(this.program);\r\n        DeleteGLTexture(this.texture);\r\n        DeleteFramebuffer(this.framebuffer);\r\n\r\n        this.uniforms.clear();\r\n        this.uniformSetters.clear();\r\n        this.attributes.clear();\r\n\r\n        this.program = null;\r\n        this.texture = null;\r\n        this.framebuffer = null;\r\n    }\r\n}\r\n", "import { DefaultQuadAttributes } from './DefaultQuadAttributes';\r\nimport { IRenderPass } from '../renderpass/IRenderPass';\r\nimport { IShader } from './IShader';\r\nimport { IShaderConfig } from './IShaderConfig';\r\nimport { Shader } from './Shader';\r\n\r\nexport class QuadShader extends Shader implements IShader\r\n{\r\n    constructor (config: IShaderConfig = {})\r\n    {\r\n        const shaderConfig = config;\r\n\r\n        shaderConfig.attributes = (!shaderConfig.attributes) ? DefaultQuadAttributes : shaderConfig.attributes;\r\n\r\n        super(shaderConfig);\r\n    }\r\n\r\n    bind (renderPass: IRenderPass): boolean\r\n    {\r\n        const uniforms = this.uniforms;\r\n\r\n        uniforms.set('uProjectionMatrix', renderPass.projectionMatrix.data);\r\n        uniforms.set('uCameraMatrix', renderPass.cameraMatrix.data);\r\n\r\n        return super.bind(renderPass);\r\n    }\r\n}\r\n", "export const MULTI_QUAD_FRAG =\r\n`#define SHADER_NAME MULTI_QUAD_FRAG\r\n\r\nprecision highp float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture[%count%];\r\n\r\nvoid main (void)\r\n{\r\n    vec4 color;\r\n\r\n    %forloop%\r\n\r\n    gl_FragColor = color * vec4(vTintColor.bgr * vTintColor.a, vTintColor.a);\r\n}`;\r\n", "import { GetMaxTextures } from '../../../config/maxtextures/GetMaxTextures';\r\nimport { IRenderPass } from '../renderpass/IRenderPass';\r\nimport { IShaderConfig } from './IShaderConfig';\r\nimport { MULTI_QUAD_FRAG } from '../glsl/MULTI_QUAD_FRAG';\r\nimport { QuadShader } from './QuadShader';\r\n\r\nexport class MultiTextureQuadShader extends QuadShader\r\n{\r\n    constructor (config: IShaderConfig = {})\r\n    {\r\n        if (!config.fragmentShader)\r\n        {\r\n            config.fragmentShader = MULTI_QUAD_FRAG;\r\n        }\r\n\r\n        super(config);\r\n    }\r\n\r\n    create (fragmentShaderSource: string, vertexShaderSource: string, uniforms: {}, attribs: {}): void\r\n    {\r\n        const maxTextures = GetMaxTextures();\r\n\r\n        let src = '';\r\n\r\n        for (let i = 1; i < maxTextures; i++)\r\n        {\r\n            if (i > 1)\r\n            {\r\n                src += '\\n\\telse ';\r\n            }\r\n\r\n            if (i < maxTextures - 1)\r\n            {\r\n                src += `if (vTextureId < ${i}.5)`;\r\n            }\r\n\r\n            src += '\\n\\t{';\r\n            src += `\\n\\t\\tcolor = texture2D(uTexture[${i}], vTextureCoord);`;\r\n            src += '\\n\\t}';\r\n        }\r\n\r\n        fragmentShaderSource = fragmentShaderSource.replace(/%count%/gi, `${maxTextures}`);\r\n        fragmentShaderSource = fragmentShaderSource.replace(/%forloop%/gi, src);\r\n\r\n        super.create(fragmentShaderSource, vertexShaderSource, uniforms, attribs);\r\n    }\r\n\r\n    bind (renderPass: IRenderPass): boolean\r\n    {\r\n        this.uniforms.set('uTexture', renderPass.textureIndex);\r\n\r\n        return super.bind(renderPass);\r\n    }\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\n\r\nexport function SetDefaultBlendMode (renderPass: IRenderPass, enable: boolean, sfactor?: number, dfactor?: number): void\r\n{\r\n    const entry = { enable, sfactor, dfactor };\r\n\r\n    //  The default entry always goes into index zero\r\n    renderPass.blendModeStack[0] = entry;\r\n\r\n    renderPass.currentBlendMode = entry;\r\n    renderPass.defaultBlendMode = entry;\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { Rectangle } from '../../../geom/rectangle/Rectangle';\r\n\r\nexport function SetDefaultFramebuffer (renderPass: IRenderPass, framebuffer: WebGLFramebuffer = null, viewport?: Rectangle): void\r\n{\r\n    const entry = { framebuffer, viewport };\r\n\r\n    //  The default entry always goes into index zero\r\n    renderPass.framebufferStack[0] = entry;\r\n\r\n    renderPass.currentFramebuffer = entry;\r\n    renderPass.defaultFramebuffer = entry;\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { IShader } from '../shaders/IShader';\r\n\r\nexport function SetDefaultShader (renderPass: IRenderPass, shader: IShader, textureID?: number): void\r\n{\r\n    const entry = { shader, textureID };\r\n\r\n    //  The default entry always goes into index zero\r\n    renderPass.shaderStack[0] = entry;\r\n\r\n    renderPass.currentShader = entry;\r\n    renderPass.defaultShader = entry;\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { IVertexBuffer } from '../buffers/IVertexBuffer';\r\n\r\nexport function SetDefaultVertexBuffer (renderPass: IRenderPass, buffer: IVertexBuffer): void\r\n{\r\n    //  The default entry always goes into index zero\r\n    renderPass.vertexBufferStack[0] = buffer;\r\n\r\n    renderPass.currentVertexBuffer = buffer;\r\n    renderPass.defaultVertexBuffer = buffer;\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { Rectangle } from '../../../geom/rectangle/Rectangle';\r\n\r\nexport function SetDefaultViewport (renderPass: IRenderPass, x: number = 0, y: number = 0, width: number = 0, height: number = 0): void\r\n{\r\n    const entry = new Rectangle(x, y, width, height);\r\n\r\n    //  The default entry always goes into index zero\r\n    renderPass.viewportStack[0] = entry;\r\n\r\n    renderPass.currentViewport = entry;\r\n    renderPass.defaultViewport = entry;\r\n}\r\n", "import { Game } from './Game';\r\n\r\nexport let instance: Game;\r\nexport let frame: number = 0;\r\nexport let elapsed: number = 0;\r\n\r\nexport const GameInstance =\r\n{\r\n    get: (): Game =>\r\n    {\r\n        return instance;\r\n    },\r\n\r\n    set: (game: Game | undefined): void =>\r\n    {\r\n        instance = game;\r\n    },\r\n\r\n    getFrame: (): number =>\r\n    {\r\n        return frame;\r\n    },\r\n\r\n    setFrame: (current: number): void =>\r\n    {\r\n        frame = current;\r\n    },\r\n\r\n    getElapsed: (): number =>\r\n    {\r\n        return elapsed;\r\n    },\r\n\r\n    setElapsed: (current: number): void =>\r\n    {\r\n        elapsed = current;\r\n    }\r\n\r\n};\r\n", "import { Matrix4 } from './Matrix4';\r\n\r\nexport function Mat4Identity (matrix: Matrix4 = new Matrix4()): Matrix4\r\n{\r\n    return matrix.set(\r\n        1, 0, 0, 0,\r\n        0, 1, 0, 0,\r\n        0, 0, 1, 0,\r\n        0, 0, 0, 1\r\n    );\r\n}\r\n", "//  A Matrix2D contains six elements in a short-form of the 3x3 Matrix, with the last column ignored.\r\n\r\n//  |----|----|----|\r\n//  | a  | b  | 0  |\r\n//  |----|----|----|\r\n//  | c  | d  | 0  |\r\n//  |----|----|----|\r\n//  | tx | ty | 1  |\r\n//  |----|----|----|\r\n\r\nexport class Matrix2D\r\n{\r\n    a: number; // element 0\r\n    b: number; // element 1\r\n    c: number; // element 2\r\n    d: number; // element 3\r\n    tx: number; // element 4\r\n    ty: number; // element 5\r\n\r\n    /**\r\n     * Creates an instance of Matrix2D.\r\n     *\r\n     * @param {number} [a=1] - X scale.\r\n     * @param {number} [b=0] - X skew.\r\n     * @param {number} [c=0] - Y skew.\r\n     * @param {number} [d=1] - Y scale.\r\n     * @param {number} [tx=0] - X translation\r\n     * @param {number} [ty=0] - Y translation\r\n     * @memberof Matrix2D\r\n     */\r\n    constructor (a: number = 1, b: number = 0, c: number = 0, d: number = 1, tx: number = 0, ty: number = 0)\r\n    {\r\n        this.set(a, b, c, d, tx, ty);\r\n    }\r\n\r\n    set (a: number = 1, b: number = 0, c: number = 0, d: number = 1, tx: number = 0, ty: number = 0): this\r\n    {\r\n        this.a = a;\r\n        this.b = b;\r\n        this.c = c;\r\n        this.d = d;\r\n        this.tx = tx;\r\n        this.ty = ty;\r\n\r\n        return this;\r\n    }\r\n\r\n    identity (): this\r\n    {\r\n        return this.set();\r\n    }\r\n\r\n    toArray (): number[]\r\n    {\r\n        const  { a, b, c, d, tx, ty } = this;\r\n\r\n        return [ a, b, c, d, tx, ty ];\r\n    }\r\n\r\n    fromArray (src: number[]): Matrix2D\r\n    {\r\n        return this.set(src[0], src[1], src[2], src[3], src[4], src[5]);\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Find the angle of a segment from (x1, y1) -> (x2, y2).\r\n *\r\n * @function Phaser.Math.Angle.Between\r\n * @since 3.0.0\r\n *\r\n * @param {number} x1 - The x coordinate of the first point.\r\n * @param {number} y1 - The y coordinate of the first point.\r\n * @param {number} x2 - The x coordinate of the second point.\r\n * @param {number} y2 - The y coordinate of the second point.\r\n *\r\n * @return {number} The angle in radians.\r\n */\r\nexport function AngleBetween (x1: number, y1: number, x2: number, y2: number): number\r\n{\r\n    return Math.atan2(y2 - y1, x2 - x1);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Find the angle of a segment from (x1, y1) -> (x2, y2).\r\n *\r\n * The difference between this method and {@link Phaser.Math.Angle.Between} is that this assumes the y coordinate\r\n * travels down the screen.\r\n *\r\n * @function Phaser.Math.Angle.BetweenY\r\n * @since 3.0.0\r\n *\r\n * @param {number} x1 - The x coordinate of the first point.\r\n * @param {number} y1 - The y coordinate of the first point.\r\n * @param {number} x2 - The x coordinate of the second point.\r\n * @param {number} y2 - The y coordinate of the second point.\r\n *\r\n * @return {number} The angle in radians.\r\n */\r\nexport function AngleBetweenY (x1: number, y1: number, x2: number, y2: number): number\r\n{\r\n    return Math.atan2(x2 - x1, y2 - y1);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nexport const MATH_CONST = {\r\n\r\n    /**\r\n     * The value of PI * 2.\r\n     *\r\n     * @name Phaser.Math.PI2\r\n     * @type {number}\r\n     * @since 3.0.0\r\n     */\r\n    PI2: Math.PI * 2,\r\n\r\n    /**\r\n     * The value of PI * 2.\r\n     *\r\n     * @name Phaser.Math.HALF_PI\r\n     * @type {number}\r\n     * @since 3.0.0\r\n     */\r\n    HALF_PI: Math.PI * 0.5,\r\n\r\n    /**\r\n     * An epsilon value (1.0e-6)\r\n     *\r\n     * @name Phaser.Math.EPSILON\r\n     * @type {number}\r\n     * @since 3.0.0\r\n     */\r\n    EPSILON: 1.0e-6,\r\n\r\n    /**\r\n     * For converting degrees to radians (PI / 180)\r\n     *\r\n     * @name Phaser.Math.DEG_TO_RAD\r\n     * @type {number}\r\n     * @since 3.0.0\r\n     */\r\n    DEG_TO_RAD: Math.PI / 180,\r\n\r\n    /**\r\n     * For converting radians to degrees (180 / PI)\r\n     *\r\n     * @name Phaser.Math.RAD_TO_DEG\r\n     * @type {number}\r\n     * @since 3.0.0\r\n     */\r\n    RAD_TO_DEG: 180 / Math.PI,\r\n\r\n    /**\r\n     * The minimum safe integer this browser supports.\r\n     * We use a const for backward compatibility with Internet Explorer.\r\n     *\r\n     * @name Phaser.Math.MIN_SAFE_INTEGER\r\n     * @type {number}\r\n     * @since 3.21.0\r\n     */\r\n    MIN_SAFE_INTEGER: Number.MIN_SAFE_INTEGER || -9007199254740991,\r\n\r\n    /**\r\n     * The maximum safe integer this browser supports.\r\n     * We use a const for backward compatibility with Internet Explorer.\r\n     *\r\n     * @name Phaser.Math.MAX_SAFE_INTEGER\r\n     * @type {number}\r\n     * @since 3.21.0\r\n     */\r\n    MAX_SAFE_INTEGER: Number.MAX_SAFE_INTEGER || 9007199254740991\r\n\r\n};\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { MATH_CONST as CONST } from '../const';\r\n\r\n/**\r\n * Takes an angle in Phasers default clockwise format and converts it so that\r\n * 0 is North, 90 is West, 180 is South and 270 is East,\r\n * therefore running counter-clockwise instead of clockwise.\r\n * \r\n * You can pass in the angle from a Game Object using:\r\n * \r\n * ```javascript\r\n * var converted = CounterClockwise(gameobject.rotation);\r\n * ```\r\n * \r\n * All values for this function are in radians.\r\n *\r\n * @function Phaser.Math.Angle.CounterClockwise\r\n * @since 3.16.0\r\n *\r\n * @param {number} angle - The angle to convert, in radians.\r\n *\r\n * @return {number} The converted angle, in radians.\r\n */\r\nexport function CounterClockwise (angle: number): number\r\n{\r\n    if (angle > Math.PI)\r\n    {\r\n        angle -= CONST.PI2;\r\n    }\r\n\r\n    return Math.abs((((angle + CONST.HALF_PI) % CONST.PI2) - CONST.PI2) % CONST.PI2);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { MATH_CONST } from '../const';\r\n\r\n/**\r\n * Normalize an angle to the [0, 2pi] range.\r\n *\r\n * @function Phaser.Math.Angle.Normalize\r\n * @since 3.0.0\r\n *\r\n * @param {number} angle - The angle to normalize, in radians.\r\n *\r\n * @return {number} The normalized angle, in radians.\r\n */\r\nexport function NormalizeAngle (angle: number): number\r\n{\r\n    angle = angle % MATH_CONST.PI2;\r\n\r\n    if (angle >= 0)\r\n    {\r\n        return angle;\r\n    }\r\n    else\r\n    {\r\n        return angle + MATH_CONST.PI2;\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { NormalizeAngle } from './NormalizeAngle';\r\n\r\n/**\r\n * Reverse the given angle.\r\n *\r\n * @function Phaser.Math.Angle.Reverse\r\n * @since 3.0.0\r\n *\r\n * @param {number} angle - The angle to reverse, in radians.\r\n *\r\n * @return {number} The reversed angle, in radians.\r\n */\r\nexport function ReverseAngle (angle: number): number\r\n{\r\n    return NormalizeAngle(angle + Math.PI);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { MATH_CONST } from '../const';\r\n\r\n/**\r\n * Rotates `currentAngle` towards `targetAngle`, taking the shortest rotation distance. The `lerp` argument is the amount to rotate by in this call.\r\n *\r\n * @function Phaser.Math.Angle.RotateTo\r\n * @since 3.0.0\r\n *\r\n * @param {number} currentAngle - The current angle, in radians.\r\n * @param {number} targetAngle - The target angle to rotate to, in radians.\r\n * @param {number} [lerp=0.05] - The lerp value to add to the current angle.\r\n *\r\n * @return {number} The adjusted angle.\r\n */\r\nexport function RotateAngleTo (currentAngle: number, targetAngle: number, lerp: number = 0.05): number\r\n{\r\n    if (currentAngle === targetAngle)\r\n    {\r\n        return currentAngle;\r\n    }\r\n\r\n    if (Math.abs(targetAngle - currentAngle) <= lerp || Math.abs(targetAngle - currentAngle) >= (MATH_CONST.PI2 - lerp))\r\n    {\r\n        currentAngle = targetAngle;\r\n    }\r\n    else\r\n    {\r\n        if (Math.abs(targetAngle - currentAngle) > Math.PI)\r\n        {\r\n            if (targetAngle < currentAngle)\r\n            {\r\n                targetAngle += MATH_CONST.PI2;\r\n            }\r\n            else\r\n            {\r\n                targetAngle -= MATH_CONST.PI2;\r\n            }\r\n        }\r\n\r\n        if (targetAngle > currentAngle)\r\n        {\r\n            currentAngle += lerp;\r\n        }\r\n        else if (targetAngle < currentAngle)\r\n        {\r\n            currentAngle -= lerp;\r\n        }\r\n    }\r\n\r\n    return currentAngle;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Gets the shortest angle between `angle1` and `angle2`.\r\n *\r\n * Both angles must be in the range -180 to 180, which is the same clamped\r\n * range that `sprite.angle` uses, so you can pass in two sprite angles to\r\n * this method and get the shortest angle back between the two of them.\r\n *\r\n * The angle returned will be in the same range. If the returned angle is\r\n * greater than 0 then it's a counter-clockwise rotation, if < 0 then it's\r\n * a clockwise rotation.\r\n *\r\n * TODO: Wrap the angles in this function?\r\n *\r\n * @function Phaser.Math.Angle.ShortestBetween\r\n * @since 3.0.0\r\n *\r\n * @param {number} angle1 - The first angle in the range -180 to 180.\r\n * @param {number} angle2 - The second angle in the range -180 to 180.\r\n *\r\n * @return {number} The shortest angle, in degrees. If greater than zero it's a counter-clockwise rotation.\r\n */\r\nexport function ShortestAngleBetween (angle1: number, angle2: number): number\r\n{\r\n    const difference = angle2 - angle1;\r\n\r\n    if (difference === 0)\r\n    {\r\n        return 0;\r\n    }\r\n\r\n    const times = Math.floor((difference - (-180)) / 360);\r\n\r\n    return difference - (times * 360);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Wrap the given `value` between `min` and `max.\r\n *\r\n * @function Phaser.Math.Wrap\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value to wrap.\r\n * @param {number} min - The minimum value.\r\n * @param {number} max - The maximum value.\r\n *\r\n * @return {number} The wrapped value.\r\n */\r\nexport function Wrap (value: number, min: number, max: number): number\r\n{\r\n    const range = max - min;\r\n\r\n    return (min + ((((value - min) % range) + range) % range));\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { Wrap } from '../Wrap';\r\n\r\n/**\r\n * Wrap an angle.\r\n *\r\n * Wraps the angle to a value in the range of -PI to PI.\r\n *\r\n * @function Phaser.Math.Angle.Wrap\r\n * @since 3.0.0\r\n *\r\n * @param {number} angle - The angle to wrap, in radians.\r\n *\r\n * @return {number} The wrapped angle, in radians.\r\n */\r\nexport function WrapAngle (angle: number): number\r\n{\r\n    return Wrap(angle, -Math.PI, Math.PI);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { Wrap } from '../Wrap';\r\n\r\n/**\r\n * Wrap an angle in degrees.\r\n *\r\n * Wraps the angle to a value in the range of -180 to 180.\r\n *\r\n * @function Phaser.Math.Angle.WrapDegrees\r\n * @since 3.0.0\r\n *\r\n * @param {number} angle - The angle to wrap, in degrees.\r\n *\r\n * @return {number} The wrapped angle, in degrees.\r\n */\r\nexport function WrapAngleDegrees (angle: number): number\r\n{\r\n    return Wrap(angle, -180, 180);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { AngleBetween } from './AngleBetween';\r\nimport { AngleBetweenY } from './AngleBetweenY';\r\nimport { CounterClockwise } from './CounterClockwise';\r\nimport { NormalizeAngle } from './NormalizeAngle';\r\nimport { ReverseAngle } from './ReverseAngle';\r\nimport { RotateAngleTo } from './RotateAngleTo';\r\nimport { ShortestAngleBetween } from './ShortestAngleBetween';\r\nimport { WrapAngle } from './WrapAngle';\r\nimport { WrapAngleDegrees } from './WrapAngleDegrees';\r\n\r\n/**\r\n * @namespace Phaser.Math.Angle\r\n */\r\n\r\nexport {\r\n    AngleBetween,\r\n    AngleBetweenY,\r\n    CounterClockwise,\r\n    NormalizeAngle,\r\n    ReverseAngle,\r\n    RotateAngleTo,\r\n    ShortestAngleBetween,\r\n    WrapAngle,\r\n    WrapAngleDegrees\r\n};\r\n", "import { GameInstance } from '../GameInstance';\r\nimport { IRenderer } from '../renderer/IRenderer';\r\nimport { IStaticCamera } from './IStaticCamera';\r\nimport { IStaticWorld } from '../world/IStaticWorld';\r\nimport { Mat4Identity } from '../math/mat4';\r\nimport { Matrix2D } from '../math/mat2d/Matrix2D';\r\nimport { Matrix4 } from '../math/mat4/Matrix4';\r\nimport { Rectangle } from '../geom/rectangle/Rectangle';\r\n\r\nexport class StaticCamera implements IStaticCamera\r\n{\r\n    world: IStaticWorld;\r\n    matrix: Matrix4;\r\n    renderer: IRenderer;\r\n    type: string;\r\n\r\n    width: number;\r\n    height: number;\r\n    bounds: Rectangle;\r\n\r\n    dirtyRender: boolean;\r\n    worldTransform: Matrix2D;\r\n\r\n    constructor ()\r\n    {\r\n        this.type = 'StaticCamera';\r\n\r\n        this.dirtyRender = true;\r\n\r\n        const game = GameInstance.get();\r\n\r\n        this.renderer = game.renderer;\r\n\r\n        this.matrix = Mat4Identity();\r\n\r\n        this.bounds = new Rectangle();\r\n\r\n        this.worldTransform = new Matrix2D();\r\n\r\n        this.reset();\r\n    }\r\n\r\n    reset (): void\r\n    {\r\n        const renderer = this.renderer;\r\n\r\n        if (renderer)\r\n        {\r\n            const width = renderer.width;\r\n            const height = renderer.height;\r\n\r\n            this.width = width;\r\n            this.height = height;\r\n        }\r\n\r\n        this.bounds.set(0, 0, this.width, this.height);\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        this.world = null;\r\n        this.worldTransform = null;\r\n        this.renderer = null;\r\n        this.matrix = null;\r\n        this.bounds = null;\r\n    }\r\n}\r\n", "import { CreateTempTextures } from './CreateTempTextures';\r\nimport { GetBatchSize } from '../../../config/batchsize/GetBatchSize';\r\nimport { IBaseCamera } from '../../../camera/IBaseCamera';\r\nimport { IRenderPass } from './IRenderPass';\r\nimport { IShader } from '../shaders/IShader';\r\nimport { IVertexBuffer } from '../buffers/IVertexBuffer';\r\nimport { IWebGLRenderer } from '../IWebGLRenderer';\r\nimport { IndexedVertexBuffer } from '../buffers/IndexedVertexBuffer';\r\nimport { Mat4Ortho } from '../../../math/mat4/Mat4Ortho';\r\nimport { Matrix4 } from '../../../math/mat4/Matrix4';\r\nimport { MultiTextureQuadShader } from '../shaders';\r\nimport { QuadShader } from '../shaders/QuadShader';\r\nimport { Rectangle } from '../../../geom/rectangle/Rectangle';\r\nimport { SetDefaultBlendMode } from './SetDefaultBlendMode';\r\nimport { SetDefaultFramebuffer } from './SetDefaultFramebuffer';\r\nimport { SetDefaultShader } from './SetDefaultShader';\r\nimport { SetDefaultVertexBuffer } from './SetDefaultVertexBuffer';\r\nimport { SetDefaultViewport } from './SetDefaultViewport';\r\nimport { StaticCamera } from '../../../camera';\r\n\r\nexport type FramebufferStackEntry = {\r\n    framebuffer: WebGLFramebuffer;\r\n    viewport?: Rectangle;\r\n};\r\n\r\nexport type ShaderStackEntry = {\r\n    shader: IShader;\r\n    textureID?: number;\r\n};\r\n\r\nexport type BlendModeStackEntry = {\r\n    enable: boolean;\r\n    sfactor?: number;\r\n    dfactor?: number;\r\n};\r\n\r\nexport class RenderPass implements IRenderPass\r\n{\r\n    renderer: IWebGLRenderer;\r\n\r\n    projectionMatrix: Matrix4;\r\n    cameraMatrix: Matrix4;\r\n\r\n    count: number = 0;\r\n    prevCount: number = 0;\r\n    flushTotal: number = 0;\r\n\r\n    //  The maximum number of combined image units the GPU supports\r\n    //  According to the WebGL spec the minimum is 8\r\n    maxTextures: number = 0;\r\n    currentActiveTexture: number = 0;\r\n    startActiveTexture: number = 0;\r\n    tempTextures: WebGLTexture[] = [];\r\n    textureIndex: number[] = [];\r\n\r\n    //  FBO\r\n    framebufferStack: FramebufferStackEntry[] = [];\r\n    currentFramebuffer: FramebufferStackEntry = null;\r\n    defaultFramebuffer: FramebufferStackEntry = null;\r\n\r\n    //  VBO\r\n    vertexBufferStack: IVertexBuffer[] = [];\r\n    currentVertexBuffer: IVertexBuffer = null;\r\n    defaultVertexBuffer: IVertexBuffer = null;\r\n\r\n    //  Shader\r\n    shaderStack: ShaderStackEntry[] = [];\r\n    currentShader: ShaderStackEntry = null;\r\n    defaultShader: ShaderStackEntry = null;\r\n\r\n    //  Viewport\r\n    viewportStack: Rectangle[] = [];\r\n    currentViewport: Rectangle = null;\r\n    defaultViewport: Rectangle = null;\r\n\r\n    //  Blend Mode\r\n    blendModeStack: BlendModeStackEntry[] = [];\r\n    currentBlendMode: BlendModeStackEntry = null;\r\n    defaultBlendMode: BlendModeStackEntry = null;\r\n\r\n    //  Single Texture Quad Shader + Camera\r\n    quadShader: IShader;\r\n    quadBuffer: IVertexBuffer;\r\n    quadCamera: IBaseCamera;\r\n\r\n    //  Current 2D Camera\r\n    current2DCamera: IBaseCamera;\r\n\r\n    constructor (renderer: IWebGLRenderer)\r\n    {\r\n        this.renderer = renderer;\r\n\r\n        this.projectionMatrix = new Matrix4();\r\n\r\n        this.reset();\r\n    }\r\n\r\n    //  TODO - Call when context is lost and restored\r\n    reset (): void\r\n    {\r\n        const gl = this.renderer.gl;\r\n\r\n        const indexLayout = [ 0, 1, 2, 2, 3, 0 ];\r\n\r\n        //  TODO - If already created, delete shaders / buffers first (i.e. during context loss)\r\n\r\n        //  Default QuadShader (for FBO drawing)\r\n\r\n        this.quadShader = new QuadShader();\r\n        this.quadBuffer = new IndexedVertexBuffer({ isDynamic: false, indexLayout });\r\n        this.quadCamera = new StaticCamera();\r\n\r\n        //  Default settings\r\n\r\n        CreateTempTextures(this);\r\n\r\n        SetDefaultFramebuffer(this);\r\n        SetDefaultBlendMode(this, true, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\r\n        SetDefaultVertexBuffer(this, new IndexedVertexBuffer({ batchSize: GetBatchSize(), indexLayout }));\r\n        SetDefaultShader(this, new MultiTextureQuadShader());\r\n    }\r\n\r\n    resize (width: number, height: number): void\r\n    {\r\n        //  TODO - -1 to 1?\r\n        Mat4Ortho(0, width, height, 0, -1000, 1000, this.projectionMatrix);\r\n\r\n        this.quadCamera.reset();\r\n\r\n        SetDefaultViewport(this, 0, 0, width, height);\r\n    }\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { IShader } from '../shaders/IShader';\r\nimport { ShaderStackEntry } from './RenderPass';\r\n\r\nexport function AddShader (renderPass: IRenderPass, shader: IShader, textureID?: number): ShaderStackEntry\r\n{\r\n    const stackEntry = { shader, textureID };\r\n\r\n    renderPass.shaderStack.push(stackEntry);\r\n\r\n    return stackEntry;\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { IVertexBuffer } from '../buffers/IVertexBuffer';\r\n\r\nexport function AddVertexBuffer (renderPass: IRenderPass, buffer: IVertexBuffer): IVertexBuffer\r\n{\r\n    renderPass.vertexBufferStack.push(buffer);\r\n\r\n    return buffer;\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { ShaderStackEntry } from '../shaders/ShaderStackEntry';\r\n\r\nexport function BindShader (renderPass: IRenderPass, entry?: ShaderStackEntry): void\r\n{\r\n    if (!entry)\r\n    {\r\n        entry = renderPass.currentShader;\r\n    }\r\n\r\n    const success = entry.shader.bind(renderPass, entry.textureID);\r\n\r\n    if (success)\r\n    {\r\n        entry.shader.setAttributes(renderPass);\r\n    }\r\n}\r\n", "import { BindShader } from './BindShader';\r\nimport { IBaseCamera } from '../../../camera/IBaseCamera';\r\nimport { IRenderPass } from './IRenderPass';\r\n\r\nexport function Begin (renderPass: IRenderPass, camera2D: IBaseCamera): void\r\n{\r\n    renderPass.current2DCamera = camera2D;\r\n    renderPass.cameraMatrix = camera2D.matrix;\r\n\r\n    BindShader(renderPass);\r\n}\r\n", "import { BlendModeStackEntry } from './RenderPass';\r\nimport { IRenderPass } from './IRenderPass';\r\nimport { gl } from '../GL';\r\n\r\nexport function BindBlendMode (renderPass: IRenderPass, entry?: BlendModeStackEntry): void\r\n{\r\n    if (!entry)\r\n    {\r\n        entry = renderPass.currentBlendMode;\r\n    }\r\n\r\n    //  TODO - Only set if different\r\n    if (entry.enable)\r\n    {\r\n        gl.enable(gl.BLEND);\r\n        gl.blendFunc(entry.sfactor, entry.dfactor);\r\n    }\r\n    else\r\n    {\r\n        gl.disable(gl.BLEND);\r\n    }\r\n}\r\n", "import { Texture } from '../../../textures';\r\nimport { gl } from '../GL';\r\n\r\n//  directly bind a texture to an index slot\r\nexport function BindTexture (texture: Texture, index: number = 0): void\r\n{\r\n    const binding = texture.binding;\r\n\r\n    binding.setIndex(index);\r\n\r\n    gl.activeTexture(gl.TEXTURE0 + index);\r\n    gl.bindTexture(gl.TEXTURE_2D, binding.texture);\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { IVertexBuffer } from '../buffers/IVertexBuffer';\r\nimport { gl } from '../GL';\r\n\r\nexport function BindVertexBuffer (renderPass: IRenderPass, buffer?: IVertexBuffer): void\r\n{\r\n    if (!buffer)\r\n    {\r\n        buffer = renderPass.currentVertexBuffer;\r\n    }\r\n\r\n    //  TODO - Only bind if different\r\n    const indexBuffer = (buffer.indexed) ? buffer.indexBuffer : null;\r\n\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\r\n\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer.vertexBuffer);\r\n}\r\n", "import { BindVertexBuffer } from './BindVertexBuffer';\r\nimport { IRenderPass } from './IRenderPass';\r\n\r\nexport function PopVertexBuffer (renderPass: IRenderPass): void\r\n{\r\n    const stack = renderPass.vertexBufferStack;\r\n\r\n    //  > 1 because index 0 contains the default, which we don't want to remove\r\n    if (stack.length > 1)\r\n    {\r\n        stack.pop();\r\n    }\r\n\r\n    renderPass.currentVertexBuffer = stack[ stack.length - 1 ];\r\n\r\n    BindVertexBuffer(renderPass);\r\n}\r\n", "import { AddVertexBuffer } from './AddVertexBuffer';\r\nimport { BindVertexBuffer } from './BindVertexBuffer';\r\nimport { IRenderPass } from './IRenderPass';\r\nimport { IVertexBuffer } from '../buffers/IVertexBuffer';\r\n\r\nexport function SetVertexBuffer (renderPass: IRenderPass, buffer: IVertexBuffer): void\r\n{\r\n    const entry = AddVertexBuffer(renderPass, buffer);\r\n\r\n    BindVertexBuffer(renderPass, entry);\r\n\r\n    renderPass.currentVertexBuffer = entry;\r\n}\r\n", "import { BufferEntry } from '../draw/BufferEntry';\r\nimport { Flush } from './Flush';\r\nimport { IRenderPass } from './IRenderPass';\r\n\r\nexport function GetVertexBufferEntry (renderPass: IRenderPass, addToCount: number = 0): BufferEntry\r\n{\r\n    const buffer = renderPass.currentVertexBuffer;\r\n\r\n    //  If batch cannot take the size of this entry, flush it first\r\n    if (renderPass.count + addToCount >= buffer.batchSize)\r\n    {\r\n        Flush(renderPass);\r\n    }\r\n\r\n    const offset = (buffer.indexed) ? renderPass.count * buffer.entryElementSize : renderPass.count * buffer.vertexElementSize;\r\n\r\n    renderPass.count += addToCount;\r\n\r\n    return {\r\n        buffer,\r\n        F32: buffer.vertexViewF32,\r\n        U32: buffer.vertexViewU32,\r\n        offset\r\n    };\r\n}\r\n", "import { BindShader } from './BindShader';\r\nimport { IRenderPass } from './IRenderPass';\r\n\r\nexport function PopShader (renderPass: IRenderPass): void\r\n{\r\n    const stack = renderPass.shaderStack;\r\n\r\n    //  > 1 because index 0 contains the default, which we don't want to remove\r\n    if (stack.length > 1)\r\n    {\r\n        stack.pop();\r\n    }\r\n\r\n    renderPass.currentShader = stack[ stack.length - 1 ];\r\n\r\n    BindShader(renderPass);\r\n}\r\n", "import { AddShader } from './AddShader';\r\nimport { BindShader } from './BindShader';\r\nimport { IRenderPass } from './IRenderPass';\r\nimport { IShader } from '../shaders/IShader';\r\n\r\nexport function SetShader (renderPass: IRenderPass, shader: IShader, textureID?: number): void\r\n{\r\n    const entry = AddShader(renderPass, shader, textureID);\r\n\r\n    BindShader(renderPass, entry);\r\n\r\n    renderPass.currentShader = entry;\r\n}\r\n", "import { Flush } from './Flush';\r\nimport { IRenderPass } from './IRenderPass';\r\nimport { ITexture } from '../../../textures/ITexture';\r\nimport { gl } from '../GL';\r\n\r\n//  request the next available texture and bind it\r\n//  returns the new ID\r\nexport function SetTexture (renderPass: IRenderPass, texture: ITexture): number\r\n{\r\n    const binding = texture.binding;\r\n    const currentActiveTexture = renderPass.currentActiveTexture;\r\n\r\n    if (binding.indexCounter < renderPass.startActiveTexture)\r\n    {\r\n        binding.indexCounter = renderPass.startActiveTexture;\r\n\r\n        if (currentActiveTexture < renderPass.maxTextures)\r\n        {\r\n            binding.setIndex(currentActiveTexture);\r\n\r\n            gl.activeTexture(gl.TEXTURE0 + currentActiveTexture);\r\n            gl.bindTexture(gl.TEXTURE_2D, binding.texture);\r\n\r\n            renderPass.currentActiveTexture++;\r\n        }\r\n        else\r\n        {\r\n            //  We're out of textures, so flush the batch and reset back to 1\r\n            Flush(renderPass);\r\n\r\n            renderPass.startActiveTexture++;\r\n\r\n            binding.indexCounter = renderPass.startActiveTexture;\r\n\r\n            binding.setIndex(1);\r\n\r\n            gl.activeTexture(gl.TEXTURE1);\r\n            gl.bindTexture(gl.TEXTURE_2D, binding.texture);\r\n\r\n            renderPass.currentActiveTexture = 2;\r\n        }\r\n    }\r\n\r\n    return binding.index;\r\n}\r\n", "import { BindBlendMode } from './BindBlendMode';\r\nimport { BindFramebuffer } from './BindFramebuffer';\r\nimport { BindVertexBuffer } from './BindVertexBuffer';\r\nimport { BindViewport } from './BindViewport';\r\nimport { IRenderPass } from './IRenderPass';\r\n\r\nexport function Start (renderPass: IRenderPass): void\r\n{\r\n    renderPass.current2DCamera = renderPass.quadCamera;\r\n    renderPass.cameraMatrix = renderPass.quadCamera.matrix;\r\n\r\n    renderPass.count = 0;\r\n    renderPass.flushTotal = 0;\r\n\r\n    BindFramebuffer(renderPass, false, renderPass.defaultFramebuffer);\r\n    BindBlendMode(renderPass, renderPass.defaultBlendMode);\r\n    BindViewport(renderPass, renderPass.defaultViewport);\r\n    BindVertexBuffer(renderPass, renderPass.defaultVertexBuffer);\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { gl } from '../GL';\r\n\r\nexport function UnbindTexture (renderPass: IRenderPass, index: number = 0): void\r\n{\r\n    gl.activeTexture(gl.TEXTURE0 + index);\r\n    gl.bindTexture(gl.TEXTURE_2D, renderPass.tempTextures[ index ]);\r\n\r\n    if (index > 0)\r\n    {\r\n        renderPass.startActiveTexture++;\r\n    }\r\n}\r\n", "import { WebGLRenderer } from './WebGLRenderer';\r\n\r\nexport let instance: WebGLRenderer;\r\n\r\nexport const WebGLRendererInstance =\r\n{\r\n    get: (): WebGLRenderer =>\r\n    {\r\n        return instance;\r\n    },\r\n\r\n    set: (renderer: WebGLRenderer | undefined): void =>\r\n    {\r\n        instance = renderer;\r\n    }\r\n};\r\n", "import { GetHeight, GetResolution, GetWidth } from '../../config/size/';\r\n\r\nimport { End } from './renderpass/End';\r\nimport { GL } from './GL';\r\nimport { GetBackgroundColor } from '../../config/backgroundcolor/GetBackgroundColor';\r\nimport { GetRGBArray } from './colors/GetRGBArray';\r\nimport { GetWebGLContext } from '../../config/webglcontext/GetWebGLContext';\r\nimport { IRenderPass } from './renderpass/IRenderPass';\r\nimport { ISceneRenderData } from '../../scenes/ISceneRenderData';\r\nimport { ProcessBindingQueue } from './renderpass/ProcessBindingQueue';\r\nimport { RenderPass } from './renderpass/RenderPass';\r\nimport { Start } from './renderpass';\r\nimport { WebGLRendererInstance } from './WebGLRendererInstance';\r\n\r\nexport class WebGLRenderer\r\n{\r\n    canvas: HTMLCanvasElement;\r\n    gl: WebGLRenderingContext;\r\n\r\n    renderPass: IRenderPass;\r\n\r\n    clearColor = [ 0, 0, 0, 1 ];\r\n\r\n    width: number;\r\n    height: number;\r\n    resolution: number;\r\n\r\n    clearBeforeRender: boolean = true;\r\n    optimizeRedraw: boolean = false;\r\n    autoResize: boolean = true;\r\n\r\n    contextLost: boolean = false;\r\n\r\n    constructor ()\r\n    {\r\n        this.width = GetWidth();\r\n        this.height = GetHeight();\r\n        this.resolution = GetResolution();\r\n\r\n        this.setBackgroundColor(GetBackgroundColor());\r\n\r\n        const canvas = document.createElement('canvas');\r\n\r\n        canvas.addEventListener('webglcontextlost', (event) => this.onContextLost(event), false);\r\n        canvas.addEventListener('webglcontextrestored', () => this.onContextRestored(), false);\r\n\r\n        this.canvas = canvas;\r\n\r\n        this.initContext();\r\n\r\n        //  By this stage the context is available\r\n        WebGLRendererInstance.set(this);\r\n\r\n        this.renderPass = new RenderPass(this);\r\n\r\n        this.resize(this.width, this.height, this.resolution);\r\n    }\r\n\r\n    initContext (): void\r\n    {\r\n        const gl = this.canvas.getContext('webgl', GetWebGLContext());\r\n\r\n        GL.set(gl);\r\n\r\n        this.gl = gl;\r\n\r\n        gl.disable(gl.DEPTH_TEST);\r\n        gl.disable(gl.CULL_FACE);\r\n    }\r\n\r\n    resize (width: number, height: number, resolution: number = 1): void\r\n    {\r\n        const calcWidth = width * resolution;\r\n        const calcHeight = height * resolution;\r\n\r\n        this.width = calcWidth;\r\n        this.height = calcHeight;\r\n        this.resolution = resolution;\r\n\r\n        const canvas = this.canvas;\r\n\r\n        canvas.width = calcWidth;\r\n        canvas.height = calcHeight;\r\n\r\n        if (this.autoResize)\r\n        {\r\n            canvas.style.width = width.toString() + 'px';\r\n            canvas.style.height = height.toString() + 'px';\r\n        }\r\n\r\n        this.renderPass.resize(calcWidth, calcHeight);\r\n    }\r\n\r\n    onContextLost (event: Event): void\r\n    {\r\n        event.preventDefault();\r\n\r\n        this.contextLost = true;\r\n    }\r\n\r\n    onContextRestored (): void\r\n    {\r\n        this.contextLost = false;\r\n\r\n        this.initContext();\r\n    }\r\n\r\n    setBackgroundColor (color: number): this\r\n    {\r\n        GetRGBArray(color, this.clearColor);\r\n\r\n        return this;\r\n    }\r\n\r\n    //  TODO - Remove?\r\n    reset (): void\r\n    {\r\n        // this.renderPass.reset();\r\n    }\r\n\r\n    render (renderData: ISceneRenderData): void\r\n    {\r\n        if (this.contextLost)\r\n        {\r\n            return;\r\n        }\r\n\r\n        const gl = this.gl;\r\n        const renderPass = this.renderPass;\r\n\r\n        //  This is only here because if we don't do _something_ with the context, GL Spector can't see it.\r\n        //  Technically, we could move it below the dirty bail-out below.\r\n        // this.reset();\r\n\r\n        ProcessBindingQueue();\r\n\r\n        //  Cache 1 - Nothing dirty? Display the previous frame\r\n        if (this.optimizeRedraw && renderData.numDirtyFrames === 0 && renderData.numDirtyCameras === 0)\r\n        {\r\n            return;\r\n        }\r\n\r\n        if (this.clearBeforeRender)\r\n        {\r\n            const cls = this.clearColor;\r\n\r\n            gl.clearColor(cls[0], cls[1], cls[2], cls[3]);\r\n            gl.clear(gl.COLOR_BUFFER_BIT);\r\n        }\r\n\r\n        const worlds = renderData.worldData;\r\n\r\n        Start(renderPass);\r\n\r\n        for (let i: number = 0; i < worlds.length; i++)\r\n        {\r\n            const { world } = worlds[i];\r\n\r\n            world.renderGL(renderPass);\r\n\r\n            //  Stats sweep\r\n\r\n            world.postRenderGL(renderPass);\r\n        }\r\n\r\n        End(renderPass);\r\n\r\n        // eslint-disable-next-line no-debugger\r\n        // debugger;\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        WebGLRendererInstance.set(undefined);\r\n    }\r\n}\r\n", "import { SetRenderer } from '../renderer/SetRenderer';\r\nimport { WebGLRenderer } from '../../renderer/webgl1/WebGLRenderer';\r\n\r\nexport function WebGL (): () => void\r\n{\r\n    return (): void =>\r\n    {\r\n        SetRenderer(WebGLRenderer);\r\n    };\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetWebGLContext (contextAttributes: WebGLContextAttributes): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.WEBGL_CONTEXT, contextAttributes);\r\n}\r\n", "export const DIRTY_CONST = {\r\n\r\n    CLEAR: 0,\r\n    TRANSFORM: 1,\r\n    UPDATE: 2,\r\n    CHILD_CACHE: 4,\r\n    POST_RENDER: 8,\r\n    COLORS: 16,\r\n    BOUNDS: 32,\r\n    TEXTURE: 64,\r\n    FRAME: 128,\r\n    ALPHA: 256,\r\n    CHILD: 512,\r\n\r\n    //  Special combinations\r\n    DEFAULT: 1 + 2 + 16 + 32,\r\n\r\n    //  Reserved for future use:\r\n    //  1024\r\n    //  2048\r\n    //  4096\r\n    //  8192\r\n    //  16384\r\n    //  32768\r\n    //  65536\r\n    //  131072\r\n    //  262144\r\n    //  524288\r\n    //  1048576\r\n    //  2097152\r\n    //  4194304\r\n    //  8388608\r\n    //  16777216\r\n    //  33554432\r\n    //  67108864\r\n    //  134217728\r\n    //  268435456\r\n\r\n    //  Reserved for user use\r\n    USER1: 536870912,\r\n    USER2: 1073741824,\r\n    USER3: 2147483648,\r\n    USER4: 4294967296\r\n\r\n};\r\n", "import { Matrix2D } from '../../math/mat2d';\r\nimport { Rectangle } from '../../geom/rectangle';\r\nimport { Vertices } from './Vertices';\r\n\r\nexport function GetVertices (worldTransform: Matrix2D, transformExtent: Rectangle): Vertices\r\n{\r\n    const { a, b, c, d, tx, ty } = worldTransform;\r\n    const { x, y, right, bottom } = transformExtent;\r\n\r\n    const x0 = (x * a) + (y * c) + tx;\r\n    const y0 = (x * b) + (y * d) + ty;\r\n\r\n    const x1 = (x * a) + (bottom * c) + tx;\r\n    const y1 = (x * b) + (bottom * d) + ty;\r\n\r\n    const x2 = (right * a) + (bottom * c) + tx;\r\n    const y2 = (right * b) + (bottom * d) + ty;\r\n\r\n    const x3 = (right * a) + (y * c) + tx;\r\n    const y3 = (right * b) + (y * d) + ty;\r\n\r\n    return { x0, y0, x1, y1, x2, y2, x3, y3 };\r\n}\r\n", "import { DIRTY_CONST } from '../../gameobjects/DIRTY_CONST';\r\nimport { GetVertices } from '../transform/GetVertices';\r\nimport { IBoundsComponent } from './IBoundsComponent';\r\nimport { IGameObject } from '../../gameobjects/IGameObject';\r\nimport { Rectangle } from '../../geom/rectangle/Rectangle';\r\n\r\nexport class BoundsComponent implements IBoundsComponent\r\n{\r\n    entity: IGameObject;\r\n\r\n    //  The bounds of the entity calculated in world space\r\n    private area: Rectangle;\r\n\r\n    fixed: boolean = false;\r\n\r\n    includeChildren: boolean = true;\r\n\r\n    visibleOnly: boolean = true;\r\n\r\n    constructor (entity: IGameObject)\r\n    {\r\n        this.entity = entity;\r\n\r\n        this.area = new Rectangle();\r\n    }\r\n\r\n    set (x: number, y: number, width: number, height: number): void\r\n    {\r\n        this.area.set(x, y, width, height);\r\n    }\r\n\r\n    get (): Rectangle\r\n    {\r\n        if (this.entity.isDirty(DIRTY_CONST.BOUNDS) && !this.fixed)\r\n        {\r\n            this.update();\r\n        }\r\n\r\n        return this.area;\r\n    }\r\n\r\n    updateLocal (): Rectangle\r\n    {\r\n        const { x0, y0, x1, y1, x2, y2, x3, y3 } = GetVertices(this.entity.worldTransform, this.entity.transformExtent);\r\n\r\n        const x = Math.min(x0, x1, x2, x3);\r\n        const y = Math.min(y0, y1, y2, y3);\r\n        const right = Math.max(x0, x1, x2, x3);\r\n        const bottom = Math.max(y0, y1, y2, y3);\r\n\r\n        return this.area.set(\r\n            x,\r\n            y,\r\n            right - x,\r\n            bottom - y\r\n        );\r\n    }\r\n\r\n    update (): Rectangle\r\n    {\r\n        //  First we get the bounds for this Game Object\r\n        const bounds = this.updateLocal();\r\n\r\n        this.entity.clearDirty(DIRTY_CONST.BOUNDS);\r\n\r\n        if (!this.includeChildren || !this.entity.numChildren)\r\n        {\r\n            return bounds;\r\n        }\r\n\r\n        const visibleOnly = this.visibleOnly;\r\n        const children = this.entity.children;\r\n\r\n        let x = bounds.x;\r\n        let y = bounds.y;\r\n        let right = bounds.right;\r\n        let bottom = bounds.bottom;\r\n\r\n        for (let i = 0; i < children.length; i++)\r\n        {\r\n            const child = children[i];\r\n\r\n            if (!child || (visibleOnly && !child.visible))\r\n            {\r\n                continue;\r\n            }\r\n\r\n            const childBounds = child.bounds.get();\r\n\r\n            if (childBounds.x < x)\r\n            {\r\n                x = childBounds.x;\r\n            }\r\n\r\n            if (childBounds.y < y)\r\n            {\r\n                y = childBounds.y;\r\n            }\r\n\r\n            if (childBounds.right > right)\r\n            {\r\n                right = childBounds.right;\r\n            }\r\n\r\n            if (childBounds.bottom > bottom)\r\n            {\r\n                bottom = childBounds.bottom;\r\n            }\r\n        }\r\n\r\n        return bounds.set(\r\n            x,\r\n            y,\r\n            right - x,\r\n            bottom - y\r\n        );\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        this.entity = null;\r\n        this.area = null;\r\n    }\r\n}\r\n", "import { IGameObject } from '../../gameobjects/IGameObject';\r\nimport { IInputComponent } from './IInputComponent';\r\nimport { IInteractiveArea } from '../../input/IInteractiveArea';\r\n\r\nexport class InputComponent implements IInputComponent\r\n{\r\n    entity: IGameObject;\r\n    enabled: boolean = false;\r\n    enabledChildren: boolean = true;\r\n    hitArea: IInteractiveArea;\r\n\r\n    constructor (entity: IGameObject)\r\n    {\r\n        this.entity = entity;\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        this.entity = null;\r\n        this.hitArea = null;\r\n    }\r\n}\r\n", "export class Vec2\r\n{\r\n    x: number;\r\n    y: number;\r\n\r\n    constructor (x: number = 0, y: number = 0)\r\n    {\r\n        this.set(x, y);\r\n    }\r\n\r\n    set (x: number = 0, y: number = 0): this\r\n    {\r\n        this.x = x;\r\n        this.y = y;\r\n\r\n        return this;\r\n    }\r\n\r\n    toArray (dst: Float32List = [], index: number = 0): Float32List\r\n    {\r\n        const { x, y } = this;\r\n\r\n        dst[ index ] = x;\r\n        dst[ index + 1 ] = y;\r\n\r\n        return dst;\r\n    }\r\n\r\n    fromArray (src: Float32List, index: number = 0): this\r\n    {\r\n        return this.set(\r\n            src[ index ],\r\n            src[ index + 1 ]\r\n        );\r\n    }\r\n\r\n    toString (): string\r\n    {\r\n        const { x, y } = this;\r\n\r\n        return `{ x=${x}, y=${y} }`;\r\n    }\r\n}\r\n", "import { Vertex } from '../../../components/Vertex';\r\n\r\nexport function PackColors (vertices: Vertex[]): void\r\n{\r\n    vertices.forEach(vertex =>\r\n    {\r\n        vertex.packColor();\r\n    });\r\n}\r\n", "import { GetVertices } from './GetVertices';\r\nimport { Matrix2D } from '../../math/mat2d/Matrix2D';\r\nimport { Rectangle } from '../../geom/rectangle/Rectangle';\r\nimport { Vertex } from '../Vertex';\r\n\r\nexport function UpdateVertices (vertices: Vertex[], worldTransform: Matrix2D, transformExtent: Rectangle): void\r\n{\r\n    const { x0, y0, x1, y1, x2, y2, x3, y3 } = GetVertices(worldTransform, transformExtent);\r\n\r\n    vertices[0].setPosition(x0, y0);\r\n    vertices[1].setPosition(x1, y1);\r\n    vertices[2].setPosition(x2, y2);\r\n    vertices[3].setPosition(x3, y3);\r\n}\r\n", "import { DIRTY_CONST } from '../../gameobjects/DIRTY_CONST';\r\nimport { IGameObject } from '../../gameobjects/IGameObject';\r\nimport { PackColors } from '../../renderer/webgl1/colors/PackColors';\r\nimport { UpdateVertices } from './UpdateVertices';\r\n\r\nexport function PreRenderVertices <T extends IGameObject> (gameObject: T): T\r\n{\r\n    const vertices = gameObject.vertices;\r\n\r\n    if (gameObject.isDirty(DIRTY_CONST.COLORS))\r\n    {\r\n        PackColors(vertices);\r\n\r\n        gameObject.clearDirty(DIRTY_CONST.COLORS);\r\n    }\r\n\r\n    if (gameObject.isDirty(DIRTY_CONST.TRANSFORM))\r\n    {\r\n        UpdateVertices(vertices, gameObject.worldTransform, gameObject.transformExtent);\r\n\r\n        gameObject.clearDirty(DIRTY_CONST.TRANSFORM);\r\n    }\r\n\r\n    return gameObject;\r\n}\r\n", "import { Matrix2D } from '../../math/mat2d';\r\n\r\nexport function UpdateLocalTransform (localTransform: Matrix2D, transformData: Float32Array): void\r\n{\r\n    const [ x, y, rotation, scaleX, scaleY, skewX, skewY ] = transformData;\r\n\r\n    localTransform.set(\r\n        Math.cos(rotation + skewY) * scaleX,\r\n        Math.sin(rotation + skewY) * scaleX,\r\n        -Math.sin(rotation - skewX) * scaleY,\r\n        Math.cos(rotation - skewX) * scaleY,\r\n        x,\r\n        y\r\n    );\r\n}\r\n", "import { IMatrix2D } from './IMatrix2D';\r\nimport { Matrix2D } from './Matrix2D';\r\n\r\n//  Copy the values from the src Matrix to the target Matrix and return the target Matrix.\r\n\r\nexport function Mat2dCopyFrom (src: IMatrix2D, target: Matrix2D): Matrix2D\r\n{\r\n    const { a, b, c, d, tx, ty } = src;\r\n\r\n    return target.set(a, b, c, d, tx, ty);\r\n}\r\n", "import { Mat2dCopyFrom } from '../../math/mat2d/Mat2dCopyFrom';\r\nimport { Matrix2D } from '../../math/mat2d';\r\n\r\nexport function UpdateWorldTransform (localTransform: Matrix2D, worldTransform: Matrix2D, passthru: boolean, parentWorldTransform?: Matrix2D): void\r\n{\r\n    if (!parentWorldTransform)\r\n    {\r\n        Mat2dCopyFrom(localTransform, worldTransform);\r\n    }\r\n    else if (passthru)\r\n    {\r\n        Mat2dCopyFrom(parentWorldTransform, worldTransform);\r\n    }\r\n    else\r\n    {\r\n        const { a, b, c, d, tx, ty } = localTransform;\r\n        const { a: pa, b: pb, c: pc, d: pd, tx: ptx, ty: pty } = parentWorldTransform;\r\n\r\n        worldTransform.set(\r\n            a  * pa + b  * pc,\r\n            a  * pb + b  * pd,\r\n            c  * pa + d  * pc,\r\n            c  * pb + d  * pd,\r\n            tx * pa + ty * pc + ptx,\r\n            tx * pb + ty * pd + pty\r\n        );\r\n    }\r\n}\r\n", "export function PackColor (rgb: number, alpha: number): number\r\n{\r\n    const ua = ((alpha * 255) | 0) & 0xFF;\r\n\r\n    return ((ua << 24) | rgb) >>> 0;\r\n}\r\n", "import { PackColor } from '../renderer/webgl1/colors/PackColor';\r\n\r\nexport class Vertex\r\n{\r\n    x: number = 0;\r\n    y: number = 0;\r\n    z: number = 0;\r\n\r\n    u: number = 0;\r\n    v: number = 0;\r\n\r\n    texture: number = 0;\r\n\r\n    tint: number = 0xffffff;\r\n    alpha: number = 1;\r\n    color: number = 4294967295;\r\n\r\n    constructor (x: number = 0, y: number = 0, z: number = 0)\r\n    {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n\r\n    setPosition (x: number, y: number, z: number = 0): this\r\n    {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n\r\n        return this;\r\n    }\r\n\r\n    setUV (u: number, v: number): this\r\n    {\r\n        this.u = u;\r\n        this.v = v;\r\n\r\n        return this;\r\n    }\r\n\r\n    setColor (color: number, alpha: number = 1): this\r\n    {\r\n        this.tint = color;\r\n        this.alpha = alpha;\r\n\r\n        this.packColor();\r\n\r\n        return this;\r\n    }\r\n\r\n    setAlpha (value: number): this\r\n    {\r\n        this.alpha = value;\r\n\r\n        return this;\r\n    }\r\n\r\n    setTint (value: number): this\r\n    {\r\n        this.tint = value;\r\n\r\n        return this;\r\n    }\r\n\r\n    packColor (): void\r\n    {\r\n        this.color = PackColor(this.tint, this.alpha);\r\n    }\r\n}\r\n", "import { GetVertexBufferEntry } from '../renderpass/GetVertexBufferEntry';\r\nimport { IRenderPass } from '../renderpass/IRenderPass';\r\nimport { ITexture } from '../../../textures/ITexture';\r\nimport { SetTexture } from '../renderpass/SetTexture';\r\nimport { Vertex } from '../../../components';\r\n\r\nexport function BatchTexturedQuad <T extends ITexture> (texture: T, vertices: Vertex[], renderPass: IRenderPass): void\r\n{\r\n    const { F32, U32, offset } = GetVertexBufferEntry(renderPass, 1);\r\n\r\n    const textureIndex = SetTexture(renderPass, texture);\r\n\r\n    let vertOffset = offset;\r\n\r\n    vertices.forEach(vertex =>\r\n    {\r\n        F32[vertOffset + 0] = vertex.x;\r\n        F32[vertOffset + 1] = vertex.y;\r\n        F32[vertOffset + 2] = vertex.u;\r\n        F32[vertOffset + 3] = vertex.v;\r\n        F32[vertOffset + 4] = textureIndex;\r\n        U32[vertOffset + 5] = vertex.color;\r\n\r\n        vertOffset += 6;\r\n    });\r\n}\r\n\r\n/*\r\n    vertexData array structure:\r\n\r\n    0 = topLeft.x\r\n    1 = topLeft.y\r\n    2 = frame.u0\r\n    3 = frame.v0\r\n    4 = textureIndex\r\n    5 = topLeft.packedColor\r\n\r\n    6 = bottomLeft.x\r\n    7 = bottomLeft.y\r\n    8 = frame.u0\r\n    9 = frame.v1\r\n    10 = textureIndex\r\n    11 = bottomLeft.packedColor\r\n\r\n    12 = bottomRight.x\r\n    13 = bottomRight.y\r\n    14 = frame.u1\r\n    15 = frame.v1\r\n    16 = textureIndex\r\n    17 = bottomRight.packedColor\r\n\r\n    18 = topRight.x\r\n    19 = topRight.y\r\n    20 = frame.u1\r\n    21 = frame.v0\r\n    22 = textureIndex\r\n    23 = topRight.packedColor\r\n*/\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetDefaultOriginX (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.DEFAULT_ORIGIN).x;\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetDefaultOriginY (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.DEFAULT_ORIGIN).y;\r\n}\r\n", "import { IGameObject } from '../gameobjects/IGameObject';\r\n\r\nexport function RemoveChildrenBetween (parent: IGameObject, beginIndex: number = 0, endIndex?: number): IGameObject[]\r\n{\r\n    const children = parent.children;\r\n\r\n    if (endIndex === undefined)\r\n    {\r\n        endIndex = children.length;\r\n    }\r\n\r\n    const range = endIndex - beginIndex;\r\n\r\n    if (range > 0 && range <= endIndex)\r\n    {\r\n        const removed = children.splice(beginIndex, range);\r\n\r\n        removed.forEach(child =>\r\n        {\r\n            child.parent = null;\r\n        });\r\n\r\n        return removed;\r\n    }\r\n    else\r\n    {\r\n        return [];\r\n    }\r\n}\r\n", "import { IGameObject } from '../gameobjects/IGameObject';\r\nimport { RemoveChildrenBetween } from './RemoveChildrenBetween';\r\n\r\nexport function DestroyChildren (parent: IGameObject, beginIndex: number = 0, endIndex?: number): void\r\n{\r\n    const removed = RemoveChildrenBetween(parent, beginIndex, endIndex);\r\n\r\n    removed.forEach(child =>\r\n    {\r\n        child.destroy();\r\n    });\r\n}\r\n", "import { IGameObject } from '../IGameObject';\r\n\r\nexport const DestroyEvent: string = 'destroy';\r\n\r\nexport type DestroyEventHandler = <T extends IGameObject> (child: T) => void;\r\n", "import { IEventEmitter } from './IEventEmitter';\r\n\r\nexport function Emit (emitter: IEventEmitter, event: string, ...args: unknown[]): boolean\r\n{\r\n    if (emitter.events.size === 0 || !emitter.events.has(event))\r\n    {\r\n        return false;\r\n    }\r\n\r\n    const listeners = emitter.events.get(event);\r\n\r\n    for (const ee of listeners)\r\n    {\r\n        ee.callback.apply(ee.context, args);\r\n\r\n        if (ee.once)\r\n        {\r\n            listeners.delete(ee);\r\n        }\r\n    }\r\n\r\n    if (listeners.size === 0)\r\n    {\r\n        emitter.events.delete(event);\r\n    }\r\n\r\n    return true;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { IRectangle } from './IRectangle';\r\nimport { Vec2 } from '../../math/vec2/Vec2';\r\n\r\n/**\r\n * Returns the size of the Rectangle, expressed as a Point object.\r\n * With the value of the `width` as the `x` property and the `height` as the `y` property.\r\n */\r\nexport function GetRectangleSize (rect: IRectangle, out: Vec2 = new Vec2()): Vec2\r\n{\r\n    return out.set(rect.width, rect.height);\r\n}\r\n", "import { IGameObject } from '../gameobjects/IGameObject';\r\n\r\n//  Returns all children of the parent, no matter what depth they go to, using an iterative search.\r\n//  Does NOT include the parent in the results.\r\n\r\nexport function DepthFirstSearch (parent: IGameObject): IGameObject[]\r\n{\r\n    const stack: IGameObject[] = [ parent ];\r\n    const output: IGameObject[] = [];\r\n\r\n    while (stack.length > 0)\r\n    {\r\n        const node = stack.shift();\r\n\r\n        output.push(node);\r\n\r\n        const numChildren = node.numChildren;\r\n\r\n        if (numChildren > 0)\r\n        {\r\n            for (let i = numChildren - 1; i >= 0; i--)\r\n            {\r\n                stack.unshift(node.children[i]);\r\n            }\r\n        }\r\n    }\r\n\r\n    //  Remove the parent from the results\r\n    output.shift();\r\n\r\n    return output;\r\n}\r\n", "import { IGameObject } from '../gameobjects/IGameObject';\r\n\r\nexport function GetChildIndex (parent: IGameObject, child: IGameObject): number\r\n{\r\n    return parent.children.indexOf(child);\r\n}\r\n", "import { IGameObject } from '../gameobjects/IGameObject';\r\n\r\nexport function RemoveChildAt (parent: IGameObject, index: number): IGameObject | undefined\r\n{\r\n    const children = parent.children;\r\n    let child: IGameObject;\r\n\r\n    if (index >= 0 && index < children.length)\r\n    {\r\n        const removed = children.splice(index, 1);\r\n\r\n        if (removed[0])\r\n        {\r\n            child = removed[0];\r\n            child.parent = null;\r\n        }\r\n    }\r\n\r\n    return child;\r\n}\r\n", "import { GetChildIndex } from './GetChildIndex';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\nimport { RemoveChildAt } from './RemoveChildAt';\r\n\r\nexport function RemoveChild <T extends IGameObject> (parent: IGameObject, child: T): T\r\n{\r\n    const currentIndex = GetChildIndex(parent, child);\r\n\r\n    if (currentIndex > -1)\r\n    {\r\n        RemoveChildAt(parent, currentIndex);\r\n    }\r\n\r\n    return child;\r\n}\r\n", "import { IBaseWorld } from '../../world/IBaseWorld';\r\nimport { IGameObject } from '../IGameObject';\r\n\r\nexport const AddedToWorldEvent: string = 'addedtoworld';\r\n\r\nexport type AddedToWorldEventHandler = <T extends IGameObject, U extends IBaseWorld> (child: T, world: U) => void;\r\n", "import { IGameObject } from '../IGameObject';\r\n\r\nexport const PostUpdateEvent: string = 'postupdate';\r\n\r\nexport type PostUpdateEventHandler = <T extends IGameObject> (delta: number, time: number, child: T) => void;\r\n", "import { IBaseWorld } from '../../world/IBaseWorld';\r\nimport { IGameObject } from '../IGameObject';\r\n\r\nexport const RemovedFromWorldEvent: string = 'removedfromworld';\r\n\r\nexport type RemovedFromWorldEventHandler = <T extends IGameObject, U extends IBaseWorld> (child: T, world: U) => void;\r\n", "import { IGameObject } from '../IGameObject';\r\n\r\nexport const UpdateEvent: string = 'update';\r\n\r\nexport type UpdateEventHandler = <T extends IGameObject> (delta: number, time: number, child: T) => void;\r\n", "import { AddedToWorldEvent, RemovedFromWorldEvent } from '../gameobjects/events';\r\n\r\nimport { Emit } from '../events/Emit';\r\nimport { IBaseWorld } from '../world/IBaseWorld';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\n\r\nexport function SetWorld (world: IBaseWorld, ...children: IGameObject[]): IGameObject[]\r\n{\r\n    children.forEach(child =>\r\n    {\r\n        if (child.world)\r\n        {\r\n            Emit(child.world, RemovedFromWorldEvent, child, child.world);\r\n            Emit(child, RemovedFromWorldEvent, child, child.world);\r\n        }\r\n\r\n        child.world = world;\r\n\r\n        Emit(world, AddedToWorldEvent, child, world);\r\n        Emit(child, AddedToWorldEvent, child, world);\r\n    });\r\n\r\n    return children;\r\n}\r\n", "import { DepthFirstSearch } from './DepthFirstSearch';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\nimport { RemoveChild } from './RemoveChild';\r\nimport { SetWorld } from './SetWorld';\r\n\r\nexport function SetParent (parent: IGameObject, ...children: IGameObject[]): IGameObject[]\r\n{\r\n    children.forEach(child =>\r\n    {\r\n        if (child.parent)\r\n        {\r\n            RemoveChild(child.parent, child);\r\n        }\r\n\r\n        child.parent = parent;\r\n    });\r\n\r\n    const parentWorld = parent.world;\r\n\r\n    if (parentWorld)\r\n    {\r\n        //  Full list of all children, including sub-children\r\n        SetWorld(parentWorld, ...DepthFirstSearch(parent));\r\n    }\r\n\r\n    return children;\r\n}\r\n", "import { IGameObject } from '../gameobjects/IGameObject';\r\nimport { RemoveChildrenBetween } from './RemoveChildrenBetween';\r\nimport { SetParent } from './SetParent';\r\n\r\nexport function ReparentChildren (parent: IGameObject, newParent: IGameObject, beginIndex: number = 0, endIndex?: number): IGameObject[]\r\n{\r\n    const moved = RemoveChildrenBetween(parent, beginIndex, endIndex);\r\n\r\n    SetParent(newParent, ...moved);\r\n\r\n    moved.forEach(child =>\r\n    {\r\n        child.updateWorldTransform();\r\n    });\r\n\r\n    return moved;\r\n}\r\n", "export const TRANSFORM_CONST = {\r\n\r\n    X: 0,\r\n    Y: 1,\r\n    ROTATION: 2,\r\n    SCALE_X: 3,\r\n    SCALE_Y: 4,\r\n    SKEW_X: 5,\r\n    SKEW_Y: 6,\r\n    ORIGIN_X: 7,\r\n    ORIGIN_Y: 8,\r\n    PASSTHRU: 9\r\n\r\n};\r\n", "import { GetDefaultOriginX, GetDefaultOriginY } from '../config/defaultorigin';\r\nimport { UpdateLocalTransform, UpdateWorldTransform } from '../components/transform';\r\n\r\nimport { BoundsComponent } from '../components/bounds/BoundsComponent';\r\nimport { DIRTY_CONST } from './DIRTY_CONST';\r\nimport { DestroyChildren } from '../display/DestroyChildren';\r\nimport { DestroyEvent } from './events/DestroyEvent';\r\nimport { Emit } from '../events/Emit';\r\nimport { GameInstance } from '../GameInstance';\r\nimport { GetRectangleSize } from '../geom/rectangle/GetRectangleSize';\r\nimport { IBaseWorld } from '../world/IBaseWorld';\r\nimport { IBoundsComponent } from '../components/bounds/IBoundsComponent';\r\nimport { ICanvasRenderer } from '../renderer/canvas/ICanvasRenderer';\r\nimport { IEventInstance } from '../events/IEventInstance';\r\nimport { IGameObject } from './IGameObject';\r\nimport { IInputComponent } from '../components/input/IInputComponent';\r\nimport { IRenderPass } from '../renderer/webgl1/renderpass/IRenderPass';\r\nimport { InputComponent } from '../components/input/InputComponent';\r\nimport { Matrix2D } from '../math/mat2d/Matrix2D';\r\nimport { Rectangle } from '../geom/rectangle/Rectangle';\r\nimport { ReparentChildren } from '../display/ReparentChildren';\r\nimport { TRANSFORM_CONST } from '../components/transform/TRANSFORM_CONST';\r\nimport { Vec2 } from '../math/vec2/Vec2';\r\nimport { Vertex } from '../components/Vertex';\r\n\r\nexport class GameObject implements IGameObject\r\n{\r\n    type: string = 'GameObject';\r\n    name: string = '';\r\n\r\n    //  The World this Game Object belongs to. A Game Object can only belong to one World instance at any one time.\r\n    world: IBaseWorld;\r\n\r\n    //  The direct parent of this Game Object in the scene graph (if any)\r\n    parent: IGameObject;\r\n\r\n    children: IGameObject[];\r\n\r\n    events: Map<string, Set<IEventInstance>>;\r\n\r\n    willUpdate: boolean = true;\r\n    willUpdateChildren: boolean = true;\r\n\r\n    willRender: boolean = true;\r\n    willRenderChildren: boolean = true;\r\n    willCacheChildren: boolean = false;\r\n\r\n    dirty: number = 0;\r\n    dirtyFrame: number = 0;\r\n\r\n    localTransform: Matrix2D;\r\n    worldTransform: Matrix2D;\r\n    transformData: Float32Array;\r\n    transformExtent: Rectangle;\r\n\r\n    bounds: IBoundsComponent;\r\n    input: IInputComponent;\r\n\r\n    vertices: Vertex[];\r\n\r\n    visible: boolean = true;\r\n\r\n    constructor (x: number = 0, y: number = 0)\r\n    {\r\n        this.children = [];\r\n        this.vertices = [];\r\n\r\n        this.events = new Map();\r\n\r\n        this.localTransform = new Matrix2D();\r\n        this.worldTransform = new Matrix2D();\r\n\r\n        //  See TRANSFORM_CONST for array layout\r\n        this.transformData = new Float32Array([ x, y, 0, 1, 1, 0, 0, GetDefaultOriginX(), GetDefaultOriginY(), 0 ]);\r\n        this.transformExtent = new Rectangle();\r\n\r\n        this.bounds = new BoundsComponent(this);\r\n        this.input = new InputComponent(this);\r\n\r\n        this.dirty = DIRTY_CONST.DEFAULT;\r\n\r\n        this.updateLocalTransform();\r\n        this.updateWorldTransform();\r\n    }\r\n\r\n    isRenderable (): boolean\r\n    {\r\n        return (this.visible && this.willRender);\r\n    }\r\n\r\n    isDirty (flag: number): boolean\r\n    {\r\n        return (this.dirty & flag) !== 0;\r\n    }\r\n\r\n    clearDirty (flag: number): this\r\n    {\r\n        if (this.isDirty(flag))\r\n        {\r\n            this.dirty ^= flag;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    setDirty (flag: number, flag2?: number): this\r\n    {\r\n        if (!this.isDirty(flag))\r\n        {\r\n            this.dirty ^= flag;\r\n            this.dirtyFrame = GameInstance.getFrame();\r\n        }\r\n\r\n        if (!this.isDirty(flag2))\r\n        {\r\n            this.dirty ^= flag2;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    update (delta: number, time: number): void\r\n    {\r\n        if (this.willUpdateChildren)\r\n        {\r\n            const children = this.children;\r\n\r\n            for (let i = 0; i < children.length; i++)\r\n            {\r\n                const child = children[i];\r\n\r\n                if (child && child.willUpdate)\r\n                {\r\n                    child.update(delta, time);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.postUpdate(delta, time);\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    postUpdate (delta: number, time: number): void\r\n    {\r\n        //  Empty for parent classes to use.\r\n        //  Called after this GameObject and all of its children have been updated.\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    renderGL <T extends IRenderPass> (renderPass: T): void\r\n    {\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    renderCanvas <T extends ICanvasRenderer> (renderer: T): void\r\n    {\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    postRenderGL <T extends IRenderPass> (renderPass: T): void\r\n    {\r\n        //  Called after this GameObject and all of its children have been rendered.\r\n        //  If it doesn't have any children, this method is never called.\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    postRenderCanvas <T extends ICanvasRenderer> (renderer: T): void\r\n    {\r\n        //  Called after this GameObject and all of its children have been rendered.\r\n        //  If it doesn't have any children, this method is never called.\r\n    }\r\n\r\n    get numChildren (): number\r\n    {\r\n        return this.children.length;\r\n    }\r\n\r\n    getBounds (): Rectangle\r\n    {\r\n        return this.bounds.get();\r\n    }\r\n\r\n    updateTransform (flag: number, value: number): void\r\n    {\r\n        if (this.transformData[flag] !== value)\r\n        {\r\n            this.transformData[flag] = value;\r\n\r\n            this.updateLocalTransform();\r\n            this.updateWorldTransform();\r\n        }\r\n    }\r\n\r\n    updateLocalTransform (): void\r\n    {\r\n        this.setDirty(DIRTY_CONST.TRANSFORM, DIRTY_CONST.BOUNDS);\r\n\r\n        UpdateLocalTransform(this.localTransform, this.transformData);\r\n    }\r\n\r\n    updateWorldTransform (): void\r\n    {\r\n        this.setDirty(DIRTY_CONST.TRANSFORM, DIRTY_CONST.BOUNDS);\r\n\r\n        const parentWorldTransform = (this.parent) ? this.parent.worldTransform : undefined;\r\n\r\n        UpdateWorldTransform(this.localTransform, this.worldTransform, this.passthru, parentWorldTransform);\r\n\r\n        if (this.numChildren)\r\n        {\r\n            //  Sweep all children - by this point our local and world transforms are correct\r\n            const children = this.children;\r\n\r\n            for (let i = 0; i < children.length; i++)\r\n            {\r\n                const child = children[i];\r\n\r\n                child.updateWorldTransform();\r\n            }\r\n        }\r\n    }\r\n\r\n    //  The area covered by this transform component + origin + size (usually from a Frame)\r\n    setExtent (x: number, y: number, width: number, height: number): void\r\n    {\r\n        this.transformExtent.set(x, y, width, height);\r\n\r\n        this.setDirty(DIRTY_CONST.TRANSFORM, DIRTY_CONST.BOUNDS);\r\n    }\r\n\r\n    updateExtent (width?: number, height?: number): void\r\n    {\r\n        const extent = this.transformExtent;\r\n\r\n        if (width !== undefined)\r\n        {\r\n            extent.width = width;\r\n        }\r\n\r\n        if (height !== undefined)\r\n        {\r\n            extent.height = height;\r\n        }\r\n\r\n        extent.x = -(this.originX) * extent.width;\r\n        extent.y = -(this.originY) * extent.height;\r\n\r\n        this.setDirty(DIRTY_CONST.TRANSFORM, DIRTY_CONST.BOUNDS);\r\n    }\r\n\r\n    setSize (width: number, height: number = width): this\r\n    {\r\n        this.updateExtent(width, height);\r\n\r\n        return this;\r\n    }\r\n\r\n    setPosition (x: number, y: number): this\r\n    {\r\n        this.x = x;\r\n        this.y = y;\r\n\r\n        return this;\r\n    }\r\n\r\n    setSkew (x: number, y: number = x): this\r\n    {\r\n        this.skewX = x;\r\n        this.skewY = y;\r\n\r\n        return this;\r\n    }\r\n\r\n    setScale (x: number, y: number = x): this\r\n    {\r\n        this.scaleX = x;\r\n        this.scaleY = y;\r\n\r\n        return this;\r\n    }\r\n\r\n    setRotation (value: number): this\r\n    {\r\n        this.rotation = value;\r\n\r\n        return this;\r\n    }\r\n\r\n    setOrigin (x: number, y: number = x): this\r\n    {\r\n        const transformData = this.transformData;\r\n\r\n        transformData[TRANSFORM_CONST.ORIGIN_X] = x;\r\n        transformData[TRANSFORM_CONST.ORIGIN_Y] = y;\r\n\r\n        this.updateExtent();\r\n\r\n        return this;\r\n    }\r\n\r\n    getSize (out: Vec2 = new Vec2()): Vec2\r\n    {\r\n        return GetRectangleSize(this.transformExtent, out);\r\n    }\r\n\r\n    getPosition (out: Vec2 = new Vec2()): Vec2\r\n    {\r\n        return out.set(this.x, this.y);\r\n    }\r\n\r\n    getOrigin (out: Vec2 = new Vec2()): Vec2\r\n    {\r\n        return out.set(this.originX, this.originY);\r\n    }\r\n\r\n    getSkew (out: Vec2 = new Vec2()): Vec2\r\n    {\r\n        return out.set(this.skewX, this.skewY);\r\n    }\r\n\r\n    getScale (out: Vec2 = new Vec2()): Vec2\r\n    {\r\n        return out.set(this.scaleX, this.scaleY);\r\n    }\r\n\r\n    getRotation (): number\r\n    {\r\n        return this.rotation;\r\n    }\r\n\r\n    set width (value: number)\r\n    {\r\n        this.updateExtent(value);\r\n    }\r\n\r\n    get width (): number\r\n    {\r\n        return this.transformExtent.width;\r\n    }\r\n\r\n    set height (value: number)\r\n    {\r\n        this.updateExtent(undefined, value);\r\n    }\r\n\r\n    get height (): number\r\n    {\r\n        return this.transformExtent.height;\r\n    }\r\n\r\n    set x (value: number)\r\n    {\r\n        this.updateTransform(TRANSFORM_CONST.X, value);\r\n    }\r\n\r\n    get x (): number\r\n    {\r\n        return this.transformData[TRANSFORM_CONST.X];\r\n    }\r\n\r\n    set y (value: number)\r\n    {\r\n        this.updateTransform(TRANSFORM_CONST.Y, value);\r\n    }\r\n\r\n    get y (): number\r\n    {\r\n        return this.transformData[TRANSFORM_CONST.Y];\r\n    }\r\n\r\n    set originX (value: number)\r\n    {\r\n        const transformData = this.transformData;\r\n\r\n        if (value !== transformData[TRANSFORM_CONST.ORIGIN_X])\r\n        {\r\n            transformData[TRANSFORM_CONST.ORIGIN_X] = value;\r\n\r\n            this.updateExtent();\r\n        }\r\n    }\r\n\r\n    get originX (): number\r\n    {\r\n        return this.transformData[TRANSFORM_CONST.ORIGIN_X];\r\n    }\r\n\r\n    set originY (value: number)\r\n    {\r\n        const transformData = this.transformData;\r\n\r\n        if (value !== transformData[TRANSFORM_CONST.ORIGIN_Y])\r\n        {\r\n            transformData[TRANSFORM_CONST.ORIGIN_Y] = value;\r\n\r\n            this.updateExtent();\r\n        }\r\n    }\r\n\r\n    get originY (): number\r\n    {\r\n        return this.transformData[TRANSFORM_CONST.ORIGIN_Y];\r\n    }\r\n\r\n    set skewX (value: number)\r\n    {\r\n        this.updateTransform(TRANSFORM_CONST.SKEW_X, value);\r\n    }\r\n\r\n    get skewX (): number\r\n    {\r\n        return this.transformData[TRANSFORM_CONST.SKEW_X];\r\n    }\r\n\r\n    set skewY (value: number)\r\n    {\r\n        this.updateTransform(TRANSFORM_CONST.SKEW_Y, value);\r\n    }\r\n\r\n    get skewY (): number\r\n    {\r\n        return this.transformData[TRANSFORM_CONST.SKEW_Y];\r\n    }\r\n\r\n    set scaleX (value: number)\r\n    {\r\n        this.updateTransform(TRANSFORM_CONST.SCALE_X, value);\r\n    }\r\n\r\n    get scaleX (): number\r\n    {\r\n        return this.transformData[TRANSFORM_CONST.SCALE_X];\r\n    }\r\n\r\n    set scaleY (value: number)\r\n    {\r\n        this.updateTransform(TRANSFORM_CONST.SCALE_Y, value);\r\n    }\r\n\r\n    get scaleY (): number\r\n    {\r\n        return this.transformData[TRANSFORM_CONST.SCALE_Y];\r\n    }\r\n\r\n    set rotation (value: number)\r\n    {\r\n        this.updateTransform(TRANSFORM_CONST.ROTATION, value);\r\n    }\r\n\r\n    get rotation (): number\r\n    {\r\n        return this.transformData[TRANSFORM_CONST.ROTATION];\r\n    }\r\n\r\n    set passthru (value: boolean)\r\n    {\r\n        this.updateTransform(TRANSFORM_CONST.PASSTHRU, Number(value));\r\n    }\r\n\r\n    get passthru (): boolean\r\n    {\r\n        return Boolean(this.transformData[TRANSFORM_CONST.PASSTHRU]);\r\n    }\r\n\r\n    destroy (reparentChildren?: IGameObject): void\r\n    {\r\n        if (reparentChildren)\r\n        {\r\n            ReparentChildren(this, reparentChildren);\r\n        }\r\n        else\r\n        {\r\n            DestroyChildren(this);\r\n        }\r\n\r\n        Emit(this, DestroyEvent, this);\r\n\r\n        this.bounds.destroy();\r\n        this.input.destroy();\r\n\r\n        this.events.clear();\r\n\r\n        this.world = null;\r\n        this.parent = null;\r\n        this.children = null;\r\n\r\n        this.vertices = [];\r\n    }\r\n}\r\n", "import { DIRTY_CONST } from '../DIRTY_CONST';\r\nimport { GameObject } from '../GameObject';\r\nimport { IContainer } from './IContainer';\r\n\r\nexport class Container extends GameObject implements IContainer\r\n{\r\n    protected _alpha: number = 1;\r\n\r\n    constructor (x: number = 0, y: number = 0)\r\n    {\r\n        super(x, y);\r\n\r\n        this.type = 'Container';\r\n    }\r\n\r\n    get alpha (): number\r\n    {\r\n        return this._alpha;\r\n    }\r\n\r\n    set alpha (value: number)\r\n    {\r\n        if (value !== this._alpha)\r\n        {\r\n            this._alpha = value;\r\n\r\n            this.vertices.forEach(vertex =>\r\n            {\r\n                vertex.setAlpha(value);\r\n            });\r\n\r\n            this.setDirty(DIRTY_CONST.COLORS);\r\n        }\r\n    }\r\n}\r\n", "import { Frame } from '../../../textures';\r\nimport { ICanvasRenderer } from '../ICanvasRenderer';\r\nimport { Matrix2D } from '../../../math/mat2d';\r\nimport { Rectangle } from '../../../geom/rectangle';\r\n\r\nexport function DrawTexturedQuad (frame: Frame, alpha: number, worldTransform: Matrix2D, transformExtent: Rectangle, renderer: ICanvasRenderer): void\r\n{\r\n    if (!frame)\r\n    {\r\n        return;\r\n    }\r\n\r\n    const ctx = renderer.ctx;\r\n\r\n    const { a, b, c, d, tx, ty } = worldTransform;\r\n    const { x, y } = transformExtent;\r\n\r\n    ctx.save();\r\n\r\n    ctx.setTransform(a, b, c, d, tx, ty);\r\n\r\n    ctx.globalAlpha = alpha;\r\n\r\n    ctx.drawImage(frame.texture.image as HTMLImageElement, frame.x, frame.y, frame.width, frame.height, x, y, frame.width, frame.height);\r\n\r\n    ctx.restore();\r\n}\r\n", "import { Frame } from '../../textures/Frame';\r\nimport { ISprite } from './ISprite';\r\nimport { Texture } from '../../textures';\r\n\r\nexport function SetFrame <T extends ISprite> (texture: Texture, key?: string | number | Frame, ...children: T[]): T[]\r\n{\r\n    const frame = texture.getFrame(key);\r\n\r\n    const pivot = frame.pivot;\r\n\r\n    children.forEach(child =>\r\n    {\r\n        //  TODO - If frame is dirty, reset it anyway\r\n        if (!child || frame === child.frame)\r\n        {\r\n            return;\r\n        }\r\n\r\n        child.frame = frame;\r\n        child.hasTexture = true;\r\n\r\n        if (pivot)\r\n        {\r\n            child.setOrigin(pivot.x, pivot.y);\r\n        }\r\n\r\n        frame.copyToExtent(child);\r\n\r\n        //  This rarely changes, so we'll set it here, rather than every game step:\r\n        frame.copyToVertices(child.vertices);\r\n    });\r\n\r\n    return children;\r\n}\r\n", "import { TextureManager } from './TextureManager';\r\n\r\nlet instance: TextureManager;\r\n\r\nexport const TextureManagerInstance =\r\n{\r\n    get: (): TextureManager =>\r\n    {\r\n        return instance;\r\n    },\r\n\r\n    set: (manager: TextureManager | null): void =>\r\n    {\r\n        instance = manager;\r\n    }\r\n};\r\n", "import { Texture } from './Texture';\r\nimport { TextureManagerInstance } from './TextureManagerInstance';\r\n\r\nexport function GetTexture (key: string): Texture\r\n{\r\n    return TextureManagerInstance.get().get(key);\r\n}\r\n", "import { Frame } from '../../textures/Frame';\r\nimport { GetTexture } from '../../textures/GetTexture';\r\nimport { IFrame } from '../../textures/IFrame';\r\nimport { ISprite } from './ISprite';\r\nimport { ITexture } from '../../textures/ITexture';\r\nimport { SetFrame } from './SetFrame';\r\nimport { Texture } from '../../textures/Texture';\r\n\r\nexport function SetTexture <T extends ISprite> (key: string | ITexture | IFrame, frame: string | number | IFrame, ...children: T[]): T[]\r\n{\r\n    if (!key)\r\n    {\r\n        //  Remove texture from all children\r\n        children.forEach(child =>\r\n        {\r\n            child.texture = null;\r\n            child.frame = null;\r\n            child.hasTexture = false;\r\n        });\r\n    }\r\n    else\r\n    {\r\n        let texture: Texture;\r\n\r\n        if (key instanceof Frame)\r\n        {\r\n            frame = key;\r\n            texture = key.texture;\r\n        }\r\n        else if (key instanceof Texture)\r\n        {\r\n            texture = key;\r\n        }\r\n        else\r\n        {\r\n            texture = GetTexture(key as string);\r\n        }\r\n\r\n        if (!texture)\r\n        {\r\n            console.warn(`Invalid Texture key: ${key as string}`);\r\n        }\r\n        else\r\n        {\r\n            children.forEach(child =>\r\n            {\r\n                child.texture = texture;\r\n            });\r\n\r\n            SetFrame(texture, frame, ...children);\r\n        }\r\n    }\r\n\r\n    return children;\r\n}\r\n", "import { BatchTexturedQuad } from '../../renderer/webgl1/draw/BatchTexturedQuad';\r\nimport { Container } from '../container/Container';\r\nimport { DIRTY_CONST } from '../DIRTY_CONST';\r\nimport { DrawTexturedQuad } from '../../renderer/canvas/draw/DrawTexturedQuad';\r\nimport { Frame } from '../../textures/Frame';\r\nimport { ICanvasRenderer } from '../../renderer/canvas/ICanvasRenderer';\r\nimport { IFrame } from '../../textures/IFrame';\r\nimport { IGameObject } from '../IGameObject';\r\nimport { IRenderPass } from '../../renderer/webgl1/renderpass/IRenderPass';\r\nimport { ISprite } from './ISprite';\r\nimport { ITexture } from '../../textures/ITexture';\r\nimport { PreRenderVertices } from '../../components/transform/PreRenderVertices';\r\nimport { SetFrame } from './SetFrame';\r\nimport { SetTexture } from './SetTexture';\r\nimport { Texture } from '../../textures/Texture';\r\nimport { Vertex } from '../../components/Vertex';\r\n\r\nexport class Sprite extends Container implements ISprite\r\n{\r\n    texture: Texture;\r\n    frame: Frame;\r\n    hasTexture: boolean = false;\r\n\r\n    protected _tint: number = 0xffffff;\r\n\r\n    constructor (x: number, y: number, texture: string | Texture | Frame, frame?: string | number | Frame)\r\n    {\r\n        super(x, y);\r\n\r\n        this.type = 'Sprite';\r\n\r\n        this.vertices = [ new Vertex(), new Vertex(), new Vertex(), new Vertex() ];\r\n\r\n        this.setTexture(texture, frame);\r\n    }\r\n\r\n    setTexture (key: string | ITexture | IFrame, frame?: string | number | IFrame): this\r\n    {\r\n        SetTexture(key, frame, this);\r\n\r\n        return this;\r\n    }\r\n\r\n    setFrame (key?: string | number | IFrame): this\r\n    {\r\n        SetFrame(this.texture, key, this);\r\n\r\n        return this;\r\n    }\r\n\r\n    isRenderable (): boolean\r\n    {\r\n        return (this.visible && this.willRender && this.hasTexture && this.alpha > 0);\r\n    }\r\n\r\n    renderGL <T extends IRenderPass> (renderPass: T): void\r\n    {\r\n        PreRenderVertices(this);\r\n\r\n        BatchTexturedQuad(this.texture, this.vertices, renderPass);\r\n    }\r\n\r\n    renderCanvas <T extends ICanvasRenderer> (renderer: T): void\r\n    {\r\n        PreRenderVertices(this);\r\n\r\n        DrawTexturedQuad(this.frame, this.alpha, this.worldTransform, this.transformExtent, renderer);\r\n    }\r\n\r\n    get tint (): number\r\n    {\r\n        return this._tint;\r\n    }\r\n\r\n    set tint (value: number)\r\n    {\r\n        if (value !== this._tint)\r\n        {\r\n            this._tint = value;\r\n\r\n            this.vertices.forEach(vertex =>\r\n            {\r\n                vertex.setTint(value);\r\n            });\r\n\r\n            this.setDirty(DIRTY_CONST.COLORS);\r\n        }\r\n    }\r\n\r\n    destroy (reparentChildren?: IGameObject): void\r\n    {\r\n        super.destroy(reparentChildren);\r\n\r\n        this.texture = null;\r\n        this.frame = null;\r\n        this.hasTexture = false;\r\n    }\r\n}\r\n", "import { GetVertexBufferEntry } from '../renderpass/GetVertexBufferEntry';\r\nimport { IRenderPass } from '../renderpass/IRenderPass';\r\n\r\nexport function BatchSingleQuad (renderPass: IRenderPass, x: number, y: number, width: number, height: number, u0: number, v0: number, u1: number, v1: number, textureIndex: number = 0, packedColor: number = 4294967295): void\r\n{\r\n    const { F32, U32, offset } = GetVertexBufferEntry(renderPass, 1);\r\n\r\n    //  top left\r\n    F32[offset + 0] = x;\r\n    F32[offset + 1] = y;\r\n    F32[offset + 2] = u0;\r\n    F32[offset + 3] = v1;\r\n    F32[offset + 4] = textureIndex;\r\n    U32[offset + 5] = packedColor;\r\n\r\n    //  bottom left\r\n    F32[offset + 6] = x;\r\n    F32[offset + 7] = y + height;\r\n    F32[offset + 8] = u0;\r\n    F32[offset + 9] = v0;\r\n    F32[offset + 10] = textureIndex;\r\n    U32[offset + 11] = packedColor;\r\n\r\n    //  bottom right\r\n    F32[offset + 12] = x + width;\r\n    F32[offset + 13] = y + height;\r\n    F32[offset + 14] = u1;\r\n    F32[offset + 15] = v0;\r\n    F32[offset + 16] = textureIndex;\r\n    U32[offset + 17] = packedColor;\r\n\r\n    //  top right\r\n    F32[offset + 18] = x + width;\r\n    F32[offset + 19] = y;\r\n    F32[offset + 20] = u1;\r\n    F32[offset + 21] = v1;\r\n    F32[offset + 22] = textureIndex;\r\n    U32[offset + 23] = packedColor;\r\n}\r\n", "import { BindTexture, Flush, PopShader, PopVertexBuffer, SetShader, SetVertexBuffer, UnbindTexture } from '../renderpass';\r\n\r\nimport { BatchSingleQuad } from './BatchSingleQuad';\r\nimport { IRenderPass } from '../renderpass/IRenderPass';\r\nimport { IShader } from '../shaders/IShader';\r\nimport { Texture } from '../../../textures';\r\n\r\nexport function DrawTexturedQuad (renderPass: IRenderPass, texture: Texture, shader?: IShader): void\r\n{\r\n    if (!shader)\r\n    {\r\n        shader = renderPass.quadShader;\r\n    }\r\n\r\n    const { u0, v0, u1, v1 } = texture.firstFrame;\r\n\r\n    BindTexture(texture, 0);\r\n\r\n    SetVertexBuffer(renderPass, renderPass.quadBuffer);\r\n    SetShader(renderPass, shader, 0);\r\n\r\n    BatchSingleQuad(renderPass, 0, 0, texture.width, texture.height, u0, v0, u1, v1, 0);\r\n\r\n    Flush(renderPass);\r\n\r\n    //  Should always pop the vbo first, so when the shader is popped the attributes are set correctly\r\n    PopVertexBuffer(renderPass);\r\n    PopShader(renderPass);\r\n\r\n    UnbindTexture(renderPass);\r\n}\r\n", "import { GameObject } from '../GameObject';\r\n\r\n//  A Layer is a way of grouping Game Objects together, without impacting their\r\n//  transforms. Children of a Layer do not inherit the layers transform, however\r\n//  you are able to control the visibility of the layers children in a single pass.\r\n\r\nexport class Layer extends GameObject\r\n{\r\n    constructor ()\r\n    {\r\n        super();\r\n\r\n        this.type = 'Layer';\r\n        this.passthru = true;\r\n        this.willRender = false;\r\n    }\r\n}\r\n", "import { Flush, PopFramebuffer, SetFramebuffer } from '../../renderer/webgl1/renderpass';\r\nimport { GetHeight, GetResolution, GetWidth } from '../../config/size';\r\n\r\nimport { CreateFramebuffer } from '../../renderer/webgl1/fbo/CreateFramebuffer';\r\nimport { DIRTY_CONST } from '../DIRTY_CONST';\r\nimport { DrawTexturedQuad } from '../../renderer/webgl1/draw/DrawTexturedQuad';\r\nimport { GLTextureBinding } from '../../renderer/webgl1/textures/GLTextureBinding';\r\nimport { IRenderLayer } from './IRenderLayer';\r\nimport { IRenderPass } from '../../renderer/webgl1/renderpass/IRenderPass';\r\nimport { Layer } from '../layer/Layer';\r\nimport { Texture } from '../../textures/Texture';\r\n\r\n//  The RenderLayer works like a normal Layer, except it automatically caches\r\n//  all of its renderable children to its own texture. The children are drawn\r\n//  to the RenderLayers texture and then the RenderLayer texture is drawn to\r\n//  the WebGL Renderer. You should use a RenderLayer if you've got a complex or\r\n//  large set of Game Objects that don't update very often, where you would\r\n//  benefit from not having to re-render every single child, every frame.\r\n\r\nexport class RenderLayer extends Layer implements IRenderLayer\r\n{\r\n    texture: Texture;\r\n    framebuffer: WebGLFramebuffer;\r\n\r\n    constructor ()\r\n    {\r\n        super();\r\n\r\n        this.type = 'RenderLayer';\r\n\r\n        this.willRender = true;\r\n        this.willRenderChildren = true;\r\n        this.willCacheChildren = true;\r\n\r\n        this.setDirty(DIRTY_CONST.CHILD_CACHE);\r\n\r\n        const width = GetWidth();\r\n        const height = GetHeight();\r\n        const resolution = GetResolution();\r\n\r\n        //  TODO: Allow them to set this via a filterArea\r\n        //  TODO: This code is duplicate of Shader constructor, consolidate\r\n        const texture = new Texture(null, width * resolution, height * resolution);\r\n\r\n        const binding = new GLTextureBinding(texture);\r\n\r\n        texture.binding = binding;\r\n\r\n        binding.framebuffer = CreateFramebuffer(binding.texture);\r\n\r\n        this.texture = texture;\r\n        this.framebuffer = binding.framebuffer;\r\n    }\r\n\r\n    renderGL <T extends IRenderPass> (renderPass: T): void\r\n    {\r\n        if (this.numChildren > 0)\r\n        {\r\n            Flush(renderPass);\r\n\r\n            if (!this.willCacheChildren || this.isDirty(DIRTY_CONST.CHILD_CACHE))\r\n            {\r\n                //  This RenderLayer has dirty children\r\n                SetFramebuffer(renderPass, this.framebuffer, true);\r\n\r\n                this.clearDirty(DIRTY_CONST.CHILD_CACHE);\r\n            }\r\n            else\r\n            {\r\n                //  This RenderLayer doesn't have any dirty children, so we'll use the previous fbo contents\r\n                SetFramebuffer(renderPass, this.framebuffer, false);\r\n\r\n                this.postRenderGL(renderPass);\r\n            }\r\n        }\r\n    }\r\n\r\n    postRenderGL <T extends IRenderPass> (renderPass: T): void\r\n    {\r\n        Flush(renderPass);\r\n\r\n        PopFramebuffer(renderPass);\r\n\r\n        DrawTexturedQuad(renderPass, this.texture);\r\n\r\n        this.clearDirty(DIRTY_CONST.TRANSFORM);\r\n    }\r\n}\r\n", "import { DIRTY_CONST } from '../DIRTY_CONST';\r\nimport { DrawTexturedQuad } from '../../renderer/webgl1/draw/DrawTexturedQuad';\r\nimport { Flush } from '../../renderer/webgl1/renderpass/Flush';\r\nimport { IEffectLayer } from './IEffectLayer';\r\nimport { IRenderPass } from '../../renderer/webgl1/renderpass/IRenderPass';\r\nimport { IShader } from '../../renderer/webgl1/shaders/IShader';\r\nimport { PopFramebuffer } from '../../renderer/webgl1/renderpass/PopFramebuffer';\r\nimport { RenderLayer } from '../renderlayer/RenderLayer';\r\n\r\n//  A WebGL specific EffectLayer\r\n//  EffectLayerCanvas is a canvas alternative\r\n\r\nexport class EffectLayer extends RenderLayer implements IEffectLayer\r\n{\r\n    shaders: IShader[] = [];\r\n\r\n    constructor (...shaders: IShader[])\r\n    {\r\n        super();\r\n\r\n        this.type = 'EffectLayer';\r\n\r\n        if (Array.isArray(shaders))\r\n        {\r\n            this.shaders = shaders;\r\n        }\r\n    }\r\n\r\n    postRenderGL <T extends IRenderPass> (renderPass: T): void\r\n    {\r\n        const shaders = this.shaders;\r\n        const texture = this.texture;\r\n\r\n        Flush(renderPass);\r\n\r\n        PopFramebuffer(renderPass);\r\n\r\n        //  this.framebuffer contains a texture with all of this layers sprites drawn to it\r\n\r\n        if (shaders.length === 0)\r\n        {\r\n            DrawTexturedQuad(renderPass, texture);\r\n        }\r\n        else\r\n        {\r\n            let prevTexture = texture;\r\n\r\n            for (let i: number = 0; i < shaders.length; i++)\r\n            {\r\n                const shader = shaders[i];\r\n\r\n                DrawTexturedQuad(renderPass, prevTexture, shader);\r\n\r\n                prevTexture = shader.texture;\r\n            }\r\n\r\n            DrawTexturedQuad(renderPass, prevTexture);\r\n        }\r\n\r\n        this.clearDirty(DIRTY_CONST.TRANSFORM);\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Force a value within the boundaries by clamping it to the range `min`, `max`.\r\n *\r\n * @function Phaser.Math.Clamp\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value to be clamped.\r\n * @param {number} min - The minimum bounds.\r\n * @param {number} max - The maximum bounds.\r\n *\r\n * @return {number} The clamped value.\r\n */\r\nexport function Clamp (value: number, min: number, max: number): number\r\n{\r\n    return Math.max(min, Math.min(max, value));\r\n}\r\n", "export function CreateCanvas (width: number, height: number): CanvasRenderingContext2D\r\n{\r\n    const canvas = document.createElement('canvas');\r\n\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n\r\n    return canvas.getContext('2d');\r\n}\r\n", "import { IGameObject } from '../gameobjects/IGameObject';\r\nimport { SetParent } from './SetParent';\r\n\r\nexport function AddChild <T extends IGameObject> (parent: IGameObject, child: T): T\r\n{\r\n    parent.children.push(child);\r\n\r\n    SetParent(parent, child);\r\n\r\n    child.updateWorldTransform();\r\n\r\n    return child;\r\n}\r\n", "import { AddChild } from './AddChild';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\n\r\nexport function AddChildren (parent: IGameObject, ...children: IGameObject[]): IGameObject[]\r\n{\r\n    children.forEach(child =>\r\n    {\r\n        AddChild(parent, child);\r\n    });\r\n\r\n    return children;\r\n}\r\n", "import { IGameObject } from '../gameobjects/IGameObject';\r\nimport { RemoveChild } from './RemoveChild';\r\n\r\nexport function RemoveChildren (parent: IGameObject, ...children: IGameObject[]): IGameObject[]\r\n{\r\n    children.forEach(child =>\r\n    {\r\n        RemoveChild(parent, child);\r\n    });\r\n\r\n    return children;\r\n}\r\n", "import { GetElement } from './GetElement';\r\n\r\nexport function AddToDOM (element: HTMLElement, parent?: string | HTMLElement): HTMLElement\r\n{\r\n    const target: HTMLElement = GetElement(parent);\r\n\r\n    target.appendChild(element);\r\n\r\n    return element;\r\n}\r\n", "export function DOMContentLoaded (callback: () => void): void\r\n{\r\n    const readyState = document.readyState;\r\n\r\n    if (readyState === 'complete' || readyState === 'interactive')\r\n    {\r\n        callback();\r\n\r\n        return;\r\n    }\r\n\r\n    const check = (): void =>\r\n    {\r\n        document.removeEventListener('deviceready', check, true);\r\n        document.removeEventListener('DOMContentLoaded', check, true);\r\n        window.removeEventListener('load', check, true);\r\n\r\n        callback();\r\n    };\r\n\r\n    // TODO - Swap is IsCordova call\r\n\r\n    if (!document.body)\r\n    {\r\n        window.setTimeout(check, 20);\r\n    }\r\n    else if (window.hasOwnProperty('cordova'))\r\n    {\r\n        document.addEventListener('deviceready', check, true);\r\n    }\r\n    else\r\n    {\r\n        document.addEventListener('DOMContentLoaded', check, true);\r\n        window.addEventListener('load', check, true);\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Takes the given data string and parses it as XML using the native DOMParser interface.\r\n * The parsed XML object is returned, or `null` if there was an error while parsing the data.\r\n *\r\n * @function Phaser.DOM.ParseXML\r\n * @since 3.0.0\r\n *\r\n * @param {string} data - The XML source stored in a string.\r\n *\r\n * @return {?XMLDocument} The parsed XML data, or `null` if the data could not be parsed.\r\n */\r\nexport function ParseXML (data: string): XMLDocument | null\r\n{\r\n    let xml: XMLDocument;\r\n\r\n    try\r\n    {\r\n        const parser = new DOMParser();\r\n\r\n        xml = parser.parseFromString(data, 'text/xml');\r\n\r\n        if (!xml || !xml.documentElement || xml.getElementsByTagName('parsererror').length)\r\n        {\r\n            return null;\r\n        }\r\n        else\r\n        {\r\n            return xml;\r\n        }\r\n    }\r\n    catch (error)\r\n    {\r\n        return null;\r\n    }\r\n}\r\n", "import { IEventInstance } from './IEventInstance';\r\n\r\nexport class EventEmitter\r\n{\r\n    events: Map<string, Set<IEventInstance>>;\r\n\r\n    constructor ()\r\n    {\r\n        this.events = new Map();\r\n    }\r\n}\r\n", "export class EventInstance\r\n{\r\n    callback: Function;\r\n    context: unknown;\r\n    once: boolean;\r\n\r\n    constructor (callback: Function, context: unknown, once: boolean = false)\r\n    {\r\n        this.callback = callback;\r\n        this.context = context;\r\n        this.once = once;\r\n    }\r\n}\r\n", "import { EventInstance } from './EventInstance';\r\nimport { IEventEmitter } from './IEventEmitter';\r\nimport { IEventInstance } from './IEventInstance';\r\n\r\nexport function Off (emitter: IEventEmitter, event: string, callback?: Function | IEventInstance, context?: unknown, once?: boolean): IEventEmitter\r\n{\r\n    const events = emitter.events;\r\n    const listeners = events.get(event);\r\n\r\n    if (!callback)\r\n    {\r\n        //  Remove all events matching the given key\r\n        events.delete(event);\r\n    }\r\n    else if (callback instanceof EventInstance)\r\n    {\r\n        listeners.delete(callback as IEventInstance);\r\n    }\r\n    else\r\n    {\r\n        const hasContext: boolean = !context;\r\n        const hasOnce: boolean = (once !== undefined);\r\n\r\n        for (const listener of listeners)\r\n        {\r\n            if (\r\n                (listener.callback === callback) &&\r\n                (hasContext && listener.context === context) &&\r\n                (hasOnce && listener.once === once)\r\n            )\r\n            {\r\n                listeners.delete(listener);\r\n            }\r\n        }\r\n    }\r\n\r\n    if (listeners.size === 0)\r\n    {\r\n        events.delete(event);\r\n    }\r\n\r\n    return emitter;\r\n}\r\n", "import { EventInstance } from './EventInstance';\r\nimport { IEventEmitter } from './IEventEmitter';\r\nimport { IEventInstance } from './IEventInstance';\r\n\r\nexport function On (emitter: IEventEmitter, event: string, callback: Function, context: unknown = emitter, once: boolean = false): IEventInstance\r\n{\r\n    if (typeof callback !== 'function')\r\n    {\r\n        throw new TypeError('Listener not a function');\r\n    }\r\n\r\n    const listener = new EventInstance(callback, context, once);\r\n    const listeners = emitter.events.get(event);\r\n\r\n    if (!listeners)\r\n    {\r\n        emitter.events.set(event, new Set([ listener ]));\r\n    }\r\n    else\r\n    {\r\n        listeners.add(listener);\r\n    }\r\n\r\n    return listener;\r\n}\r\n", "import { IEventEmitter } from './IEventEmitter';\r\nimport { IEventInstance } from './IEventInstance';\r\nimport { On } from './On';\r\n\r\nexport function Once (emitter: IEventEmitter, event: string, callback: Function, context: unknown = emitter): IEventInstance\r\n{\r\n    return On(emitter, event, callback, context, true);\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetBanner (): void\r\n{\r\n    const { title, version, url, color, background } = ConfigStore.get(CONFIG_DEFAULTS.BANNER);\r\n\r\n    if (title !== '')\r\n    {\r\n        const str = (version !== '') ? title + ' ' + version : title;\r\n\r\n        console.log(\r\n            `%c${str}%c ${url}`,\r\n            `padding: 4px 16px; color: ${color}; background: ${background}`,\r\n            ''\r\n        );\r\n    }\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetGlobalVar (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.GLOBAL_VAR);\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetParent (): string | HTMLElement | undefined\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.PARENT);\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\nimport { IRendererConstructor } from '../../renderer/IRendererConstructor';\r\n\r\nexport function GetRenderer (): IRendererConstructor\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.RENDERER);\r\n}\r\n", "import { ISceneRenderData } from './ISceneRenderData';\r\n\r\nexport function CreateSceneRenderData (): ISceneRenderData\r\n{\r\n    return {\r\n        gameFrame: 0,\r\n        numTotalFrames: 0,\r\n        numDirtyFrames: 0,\r\n        numDirtyCameras: 0,\r\n        worldData: []\r\n    };\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\nimport { ISceneConstructor } from '../../scenes/ISceneConstructor';\r\n\r\nexport function GetScenes (): ISceneConstructor[]\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.SCENES);\r\n}\r\n", "import { ISceneRenderData } from './ISceneRenderData';\r\n\r\nexport function ResetSceneRenderData (renderData: ISceneRenderData, gameFrame: number = 0): void\r\n{\r\n    renderData.gameFrame = gameFrame;\r\n    renderData.numTotalFrames = 0;\r\n    renderData.numDirtyFrames = 0;\r\n    renderData.numDirtyCameras = 0;\r\n    renderData.worldData.length = 0;\r\n}\r\n", "import { SceneManager } from './SceneManager';\r\n\r\nlet instance: SceneManager;\r\n\r\nexport const SceneManagerInstance =\r\n{\r\n    get: (): SceneManager =>\r\n    {\r\n        return instance;\r\n    },\r\n\r\n    set: (manager: SceneManager | null): void =>\r\n    {\r\n        instance = manager;\r\n    }\r\n};\r\n", "import { Emit, Once } from '../events';\r\n\r\nimport { CreateSceneRenderData } from './CreateSceneRenderData';\r\nimport { Game } from '../Game';\r\nimport { GameInstance } from '../GameInstance';\r\nimport { GetScenes } from '../config/scenes';\r\nimport { IScene } from './IScene';\r\nimport { ISceneRenderData } from './ISceneRenderData';\r\nimport { ResetSceneRenderData } from './ResetSceneRenderData';\r\nimport { SceneManagerInstance } from './SceneManagerInstance';\r\n\r\nexport class SceneManager\r\n{\r\n    game: Game;\r\n\r\n    scenes: Map<string, IScene>  = new Map();\r\n\r\n    //  Used by Install to assign default scene keys when not specified\r\n    sceneIndex: number = 0;\r\n\r\n    //  Flush the cache\r\n    flush: boolean = false;\r\n\r\n    renderResult: ISceneRenderData = CreateSceneRenderData();\r\n\r\n    constructor ()\r\n    {\r\n        this.game = GameInstance.get();\r\n\r\n        SceneManagerInstance.set(this);\r\n\r\n        Once(this.game, 'boot', () => this.boot());\r\n    }\r\n\r\n    boot (): void\r\n    {\r\n        GetScenes().forEach(scene => new scene());\r\n    }\r\n\r\n    update (delta: number, time: number): void\r\n    {\r\n        for (const scene of this.scenes.values())\r\n        {\r\n            Emit(scene, 'update', delta, time);\r\n        }\r\n    }\r\n\r\n    render (gameFrame: number): ISceneRenderData\r\n    {\r\n        const results = this.renderResult;\r\n\r\n        ResetSceneRenderData(results, gameFrame);\r\n\r\n        for (const scene of this.scenes.values())\r\n        {\r\n            Emit(scene, 'render', results);\r\n        }\r\n\r\n        if (this.flush)\r\n        {\r\n            //  Invalidate the renderer cache\r\n            results.numDirtyFrames++;\r\n\r\n            //  And reset\r\n            this.flush = false;\r\n        }\r\n\r\n        return results;\r\n    }\r\n}\r\n", "import { SetBackgroundColor } from './backgroundcolor/SetBackgroundColor';\r\nimport { SetBanner } from './banner/SetBanner';\r\nimport { SetBatchSize } from './batchsize/SetBatchSize';\r\nimport { SetDefaultOrigin } from './defaultorigin/SetDefaultOrigin';\r\nimport { SetMaxTextures } from './maxtextures/SetMaxTextures';\r\nimport { SetSize } from './size/SetSize';\r\nimport { SetWebGLContext } from './webglcontext';\r\n\r\n//  Phaser 4 defaults\r\n\r\nexport function SetConfigDefaults (): void\r\n{\r\n    SetBackgroundColor(0);\r\n    SetBatchSize(4096);\r\n    SetBanner('Phaser', '4.0.0', 'https://phaser4.io');\r\n    SetMaxTextures(0);\r\n    SetDefaultOrigin(0.5, 0.5);\r\n    SetSize(800, 600, 1);\r\n    SetWebGLContext({\r\n        antialias: true,\r\n        desynchronized: true,\r\n        preserveDrawingBuffer: true\r\n    });\r\n}\r\n", "import { CreateCanvas } from './CreateCanvas';\r\nimport { IGLTextureBindingConfig } from '../renderer/webgl1/textures/IGLTextureBindingConfig';\r\nimport { Texture } from './Texture';\r\nimport { TextureManagerInstance } from './TextureManagerInstance';\r\n\r\nexport class TextureManager\r\n{\r\n    textures: Map<string, Texture>;\r\n\r\n    constructor ()\r\n    {\r\n        this.textures = new Map();\r\n\r\n        this.createDefaultTextures();\r\n\r\n        TextureManagerInstance.set(this);\r\n    }\r\n\r\n    private createDefaultTextures (): void\r\n    {\r\n        this.add('__BLANK', new Texture(CreateCanvas(32, 32).canvas));\r\n\r\n        const missing = CreateCanvas(32, 32);\r\n\r\n        missing.strokeStyle = '#0f0';\r\n        missing.moveTo(0, 0);\r\n        missing.lineTo(32, 32);\r\n        missing.stroke();\r\n        missing.strokeRect(0.5, 0.5, 31, 31);\r\n\r\n        this.add('__MISSING', new Texture(missing.canvas));\r\n\r\n        const white = CreateCanvas(32, 32);\r\n\r\n        white.fillStyle = '#fff';\r\n        white.fillRect(0, 0, 32, 32);\r\n\r\n        this.add('__WHITE', new Texture(white.canvas));\r\n    }\r\n\r\n    get (key: string): Texture\r\n    {\r\n        const textures = this.textures;\r\n\r\n        if (textures.has(key))\r\n        {\r\n            return textures.get(key);\r\n        }\r\n        else\r\n        {\r\n            return textures.get('__MISSING');\r\n        }\r\n    }\r\n\r\n    has (key: string): boolean\r\n    {\r\n        return this.textures.has(key);\r\n    }\r\n\r\n    add (key: string, source: Texture | HTMLImageElement, glConfig?: IGLTextureBindingConfig): Texture\r\n    {\r\n        let texture: Texture;\r\n        const textures = this.textures;\r\n\r\n        if (!textures.has(key))\r\n        {\r\n            if (source instanceof Texture)\r\n            {\r\n                texture = source;\r\n            }\r\n            else\r\n            {\r\n                texture = new Texture(source, 0, 0, glConfig);\r\n            }\r\n\r\n            texture.key = key;\r\n\r\n            textures.set(key, texture);\r\n        }\r\n\r\n        return texture;\r\n    }\r\n}\r\n", "import { AddToDOM, DOMContentLoaded } from './dom';\r\nimport { Emit, EventEmitter } from './events';\r\n\r\nimport { GameInstance } from './GameInstance';\r\nimport { GetBanner } from './config/banner';\r\nimport { GetGlobalVar } from './config/globalvar';\r\nimport { GetParent } from './config/parent';\r\nimport { GetRenderer } from './config/renderer';\r\nimport { IRenderer } from './renderer/IRenderer';\r\nimport { SceneManager } from './scenes/SceneManager';\r\nimport { SetConfigDefaults } from './config/SetConfigDefaults';\r\nimport { TextureManager } from './textures/TextureManager';\r\n\r\nexport class Game extends EventEmitter\r\n{\r\n    readonly VERSION: string = '4.0.0-beta1';\r\n\r\n    isBooted: boolean = false;\r\n    isPaused: boolean = false;\r\n\r\n    willUpdate: boolean = true;\r\n    willRender: boolean = true;\r\n\r\n    lastTick: number = 0;\r\n    elapsed: number = 0;\r\n\r\n    //  The current game frame\r\n    frame: number = 0;\r\n\r\n    renderer: IRenderer;\r\n    textureManager: TextureManager;\r\n    sceneManager: SceneManager;\r\n\r\n    constructor (...settings: { (): void }[])\r\n    {\r\n        super();\r\n\r\n        GameInstance.set(this);\r\n\r\n        SetConfigDefaults();\r\n\r\n        DOMContentLoaded(() => this.boot(settings));\r\n    }\r\n\r\n    boot (settings: { (): void }[]): void\r\n    {\r\n        //  Activate the settings post DOM Content Loaded\r\n        settings.forEach(setting => setting());\r\n\r\n        const renderer = GetRenderer();\r\n\r\n        this.renderer = new renderer();\r\n        this.textureManager = new TextureManager();\r\n        this.sceneManager = new SceneManager();\r\n\r\n        //  Only add to the DOM if they either didn't set a Parent, or expressly set it to be non-null\r\n        //  Otherwise we'll let them add the canvas to the DOM themselves\r\n        const parent = GetParent();\r\n\r\n        if (parent)\r\n        {\r\n            AddToDOM(this.renderer.canvas, parent);\r\n        }\r\n\r\n        const globalVar = GetGlobalVar();\r\n\r\n        if (globalVar && window)\r\n        {\r\n            (window as unknown)[globalVar] = this;\r\n        }\r\n\r\n        this.isBooted = true;\r\n\r\n        GetBanner();\r\n\r\n        Emit(this, 'boot');\r\n\r\n        this.lastTick = performance.now();\r\n\r\n        this.step(this.lastTick);\r\n    }\r\n\r\n    pause (): void\r\n    {\r\n        this.isPaused = true;\r\n    }\r\n\r\n    resume (): void\r\n    {\r\n        this.isPaused = false;\r\n\r\n        this.lastTick = performance.now();\r\n    }\r\n\r\n    step (time: number): void\r\n    {\r\n        //  Note that privacy.resistFingerprinting can round this value to 100ms or more!\r\n        const delta = time - this.lastTick;\r\n\r\n        this.lastTick = time;\r\n        this.elapsed += delta;\r\n\r\n        if (!this.isPaused)\r\n        {\r\n            if (this.willUpdate)\r\n            {\r\n                this.sceneManager.update(delta, time);\r\n\r\n                Emit(this, 'update', delta, time);\r\n            }\r\n\r\n            if (this.willRender)\r\n            {\r\n                this.renderer.render(this.sceneManager.render(this.frame));\r\n            }\r\n        }\r\n\r\n        //  The frame always advances by 1 each step (even when paused)\r\n        this.frame++;\r\n\r\n        GameInstance.setFrame(this.frame);\r\n        GameInstance.setElapsed(this.elapsed);\r\n\r\n        requestAnimationFrame(now => this.step(now));\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        //  TODO - Code destroy function\r\n    }\r\n}\r\n", "import { Loader } from './Loader';\r\n\r\nexport class File\r\n{\r\n    key: string;\r\n    url: string;\r\n    responseType: XMLHttpRequestResponseType = 'text';\r\n    crossOrigin: string | undefined = undefined;\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    data: any;\r\n\r\n    error: ErrorEvent | undefined;\r\n    config: unknown;\r\n    skipCache: boolean = false;\r\n    hasLoaded: boolean = false;\r\n    loader: Loader;\r\n    load: () => Promise<File>;\r\n\r\n    constructor (key: string, url: string, config?: unknown)\r\n    {\r\n        this.key = key;\r\n        this.url = url;\r\n        this.config = config;\r\n    }\r\n}\r\n", "import { Loader } from './Loader';\r\n\r\nexport function GetURL (key: string, url: string, extension: string, loader?: Loader): string\r\n{\r\n    if (!url)\r\n    {\r\n        url = key + extension;\r\n    }\r\n\r\n    if ((/^(?:blob:|data:|http:\\/\\/|https:\\/\\/|\\/\\/)/).exec(url))\r\n    {\r\n        return url;\r\n    }\r\n    else if (loader)\r\n    {\r\n        return loader.baseURL + loader.path + url;\r\n    }\r\n    else\r\n    {\r\n        return url;\r\n    }\r\n}\r\n", "import { File } from './File';\r\n\r\nexport function ImageTagLoader (file: File): Promise<File>\r\n{\r\n    file.data = new Image();\r\n\r\n    if (file.crossOrigin)\r\n    {\r\n        file.data.crossOrigin = file.crossOrigin;\r\n    }\r\n\r\n    return new Promise((resolve, reject) =>\r\n    {\r\n        file.data.onload = (): void =>\r\n        {\r\n            if (file.data.onload)\r\n            {\r\n                file.data.onload = null;\r\n                file.data.onerror = null;\r\n                resolve(file);\r\n            }\r\n        };\r\n\r\n        file.data.onerror = (event: ErrorEvent): void =>\r\n        {\r\n            if (file.data.onload)\r\n            {\r\n                file.data.onload = null;\r\n                file.data.onerror = null;\r\n                file.error = event;\r\n                reject(file);\r\n            }\r\n        };\r\n\r\n        file.data.src = file.url;\r\n\r\n        // Image is immediately-available or cached\r\n\r\n        if (file.data.complete && file.data.width && file.data.height)\r\n        {\r\n            file.data.onload = null;\r\n            file.data.onerror = null;\r\n            resolve(file);\r\n        }\r\n    });\r\n}\r\n", "import { File } from '../File';\r\nimport { GetURL } from '../GetURL';\r\nimport { IGLTextureBindingConfig } from '../../renderer/webgl1/textures/IGLTextureBindingConfig';\r\nimport { ImageTagLoader } from '../ImageTagLoader';\r\nimport { TextureManagerInstance } from '../../textures/TextureManagerInstance';\r\n\r\nexport function ImageFile (key: string, url?: string, glConfig?: IGLTextureBindingConfig): File\r\n{\r\n    const file = new File(key, url);\r\n\r\n    file.load = (): Promise<File> =>\r\n    {\r\n        file.url = GetURL(file.key, file.url, '.png', file.loader);\r\n\r\n        if (file.loader)\r\n        {\r\n            file.crossOrigin = file.loader.crossOrigin;\r\n        }\r\n\r\n        return new Promise((resolve, reject) =>\r\n        {\r\n            const textureManager = TextureManagerInstance.get();\r\n\r\n            if (textureManager.has(file.key))\r\n            {\r\n                resolve(file);\r\n            }\r\n            else\r\n            {\r\n                ImageTagLoader(file).then(file =>\r\n                {\r\n                    textureManager.add(file.key, file.data as HTMLImageElement, glConfig);\r\n\r\n                    resolve(file);\r\n\r\n                }).catch(file =>\r\n                {\r\n                    reject(file);\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    return file;\r\n}\r\n", "import { Emit, EventEmitter } from '../events';\r\n\r\nimport { File } from './File';\r\n\r\nexport class Loader extends EventEmitter\r\n{\r\n    baseURL: string = '';\r\n    path: string = '';\r\n    crossOrigin: string = 'anonymous';\r\n\r\n    //  -1 means load everything at once (only recommended on http/2 servers)\r\n    maxParallelDownloads: number = -1;\r\n\r\n    isLoading: boolean = false;\r\n    progress: number;\r\n\r\n    queue: Set<File>;\r\n    inflight: Set<File>;\r\n    completed: Set<File>;\r\n\r\n    onComplete: Function;\r\n    onError: Function;\r\n\r\n    constructor ()\r\n    {\r\n        super();\r\n\r\n        this.reset();\r\n    }\r\n\r\n    reset (): void\r\n    {\r\n        this.isLoading = false;\r\n\r\n        this.queue = new Set();\r\n        this.inflight = new Set();\r\n        this.completed = new Set();\r\n\r\n        this.progress = 0;\r\n    }\r\n\r\n    add (...file: File[]): this\r\n    {\r\n        file.forEach(entity =>\r\n        {\r\n            entity.loader = this;\r\n\r\n            this.queue.add(entity);\r\n        });\r\n\r\n        return this;\r\n    }\r\n\r\n    start (): Promise<Loader>\r\n    {\r\n        if (this.isLoading)\r\n        {\r\n            return null;\r\n        }\r\n\r\n        return new Promise((resolve, reject) =>\r\n        {\r\n            this.completed.clear();\r\n            this.progress = 0;\r\n\r\n            if (this.queue.size > 0)\r\n            {\r\n                this.isLoading = true;\r\n\r\n                this.onComplete = resolve;\r\n                this.onError = reject;\r\n\r\n                // console.log('Loader.start');\r\n\r\n                Emit(this, 'start');\r\n\r\n                this.nextFile();\r\n            }\r\n            else\r\n            {\r\n                this.progress = 1;\r\n\r\n                Emit(this, 'complete');\r\n\r\n                resolve(this);\r\n                // onComplete();\r\n            }\r\n        });\r\n\r\n        /*\r\n        if (this.isLoading)\r\n        {\r\n            return this;\r\n        }\r\n\r\n        this.completed.clear();\r\n        this.progress = 0;\r\n\r\n        if (this.queue.size > 0)\r\n        {\r\n            this.isLoading = true;\r\n\r\n            this.onComplete = onComplete;\r\n\r\n            // console.log('Loader.start');\r\n\r\n            Emit(this, 'start');\r\n\r\n            this.nextFile();\r\n        }\r\n        else\r\n        {\r\n            this.progress = 1;\r\n\r\n            Emit(this, 'complete');\r\n\r\n            onComplete();\r\n        }\r\n\r\n        return this;\r\n        */\r\n    }\r\n\r\n    nextFile (): void\r\n    {\r\n        let limit = this.queue.size;\r\n\r\n        if (this.maxParallelDownloads !== -1)\r\n        {\r\n            limit = Math.min(limit, this.maxParallelDownloads) - this.inflight.size;\r\n        }\r\n\r\n        // console.log('Loader.nextFile', limit);\r\n\r\n        if (limit)\r\n        {\r\n            // console.log('Batching', limit, 'files to download');\r\n\r\n            const iterator = this.queue.values();\r\n\r\n            while (limit > 0)\r\n            {\r\n                const file = iterator.next().value;\r\n\r\n                // console.log('Loader.nextFile', file.key, '=>', file.url);\r\n\r\n                this.inflight.add(file);\r\n\r\n                this.queue.delete(file);\r\n\r\n                file.load()\r\n                    .then(\r\n                        (file: File) => this.fileComplete(file)\r\n                    )\r\n                    .catch(\r\n                        (file: File) => this.fileError(file)\r\n                    );\r\n\r\n                limit--;\r\n            }\r\n        }\r\n        else if (this.inflight.size === 0)\r\n        {\r\n            // console.log('Loader inflight zero');\r\n\r\n            this.stop();\r\n\r\n            // window.setTimeout(() => this.stop(), 0);\r\n        }\r\n    }\r\n\r\n    stop (): void\r\n    {\r\n        if (!this.isLoading)\r\n        {\r\n            return;\r\n        }\r\n\r\n        this.isLoading = false;\r\n\r\n        Emit(this, 'complete', this.completed);\r\n\r\n        this.onComplete();\r\n\r\n        this.completed.clear();\r\n    }\r\n\r\n    private updateProgress (file: File): void\r\n    {\r\n        this.inflight.delete(file);\r\n        this.completed.add(file);\r\n\r\n        const totalCompleted = this.completed.size;\r\n        const totalQueued = this.queue.size + this.inflight.size;\r\n\r\n        if (totalCompleted > 0)\r\n        {\r\n            this.progress = totalCompleted / (totalCompleted + totalQueued);\r\n        }\r\n\r\n        Emit(this, 'progress', this.progress, totalCompleted, totalQueued);\r\n\r\n        this.nextFile();\r\n    }\r\n\r\n    private fileComplete (file: File): void\r\n    {\r\n        Emit(this, 'filecomplete', file);\r\n\r\n        this.updateProgress(file);\r\n    }\r\n\r\n    private fileError (file: File): void\r\n    {\r\n        Emit(this, 'fileerror', file);\r\n\r\n        this.updateProgress(file);\r\n    }\r\n\r\n    totalFilesToLoad (): number\r\n    {\r\n        return this.queue.size + this.inflight.size;\r\n    }\r\n\r\n    setBaseURL (url: string = ''): this\r\n    {\r\n        if (url !== '' && url.substr(-1) !== '/')\r\n        {\r\n            url = url.concat('/');\r\n        }\r\n\r\n        this.baseURL = url;\r\n\r\n        return this;\r\n    }\r\n\r\n    setPath (path: string = ''): this\r\n    {\r\n        if (path !== '' && path.substr(-1) !== '/')\r\n        {\r\n            path = path.concat('/');\r\n        }\r\n\r\n        this.path = path;\r\n\r\n        return this;\r\n    }\r\n\r\n    setCORS (crossOrigin: string): this\r\n    {\r\n        this.crossOrigin = crossOrigin;\r\n\r\n        return this;\r\n    }\r\n\r\n    setMaxParallelDownloads (max: number): this\r\n    {\r\n        this.maxParallelDownloads = max;\r\n\r\n        return this;\r\n    }\r\n}\r\n", "import { ISceneConfig } from './ISceneConfig';\r\n\r\nexport function GetConfigValue<Property extends keyof ISceneConfig> (config: ISceneConfig, property: Property, defaultValue: ISceneConfig[Property]): ISceneConfig[Property]\r\n{\r\n    if (Object.prototype.hasOwnProperty.call(config, property))\r\n    {\r\n        return config[property];\r\n    }\r\n    else\r\n    {\r\n        return defaultValue;\r\n    }\r\n}\r\n", "import { GetConfigValue } from './GetConfigValue';\r\nimport { IScene } from './IScene';\r\nimport { ISceneConfig } from './ISceneConfig';\r\nimport { SceneManagerInstance } from './SceneManagerInstance';\r\n\r\nexport function Install (scene: IScene, config: string | ISceneConfig = {}): void\r\n{\r\n    const sceneManager = SceneManagerInstance.get();\r\n\r\n    const size = sceneManager.scenes.size;\r\n    const sceneIndex = sceneManager.sceneIndex;\r\n    const firstScene = (size === 0);\r\n\r\n    if (typeof config === 'string')\r\n    {\r\n        scene.key = config;\r\n    }\r\n    else if (config || (!config && firstScene))\r\n    {\r\n        scene.key = GetConfigValue(config, 'key', 'scene' + sceneIndex.toString());\r\n    }\r\n\r\n    if (sceneManager.scenes.has(scene.key))\r\n    {\r\n        console.warn('Scene key already in use: ' + scene.key);\r\n    }\r\n    else\r\n    {\r\n        sceneManager.scenes.set(scene.key, scene);\r\n\r\n        sceneManager.flush = true;\r\n\r\n        sceneManager.sceneIndex++;\r\n    }\r\n}\r\n", "// import { Emit } from '../events/Emit';\r\n\r\nimport { Game } from '../Game';\r\nimport { GameInstance } from '../GameInstance';\r\nimport { IEventEmitter } from '../events/IEventEmitter';\r\nimport { IEventInstance } from '../events/IEventInstance';\r\nimport { IScene } from './IScene';\r\nimport { ISceneConfig } from './ISceneConfig';\r\nimport { Install } from './Install';\r\n\r\nexport class Scene implements IScene, IEventEmitter\r\n{\r\n    key: string;\r\n    game: Game;\r\n    events: Map<string, Set<IEventInstance>>;\r\n\r\n    constructor (config?: string | ISceneConfig)\r\n    {\r\n        this.game = GameInstance.get();\r\n        this.events = new Map();\r\n\r\n        Install(this, config);\r\n    }\r\n\r\n    // shutdown (): void\r\n    // {\r\n    //     Emit(this, 'shutdown');\r\n    // }\r\n\r\n    // destroy (): void\r\n    // {\r\n    //     Emit(this, 'destroy');\r\n\r\n    //     this.events.clear();\r\n\r\n    //     this.game = null;\r\n    //     this.events = null;\r\n    // }\r\n}\r\n", "import { IBaseWorld } from '../IBaseWorld';\r\nimport { IWorldRenderData } from '../IWorldRenderData';\r\n\r\nexport const WorldRenderEvent: string = 'worldrender';\r\n\r\nexport type WorldRenderEventHandler = (renderData: IWorldRenderData, world: IBaseWorld) => void;\r\n", "import { IBaseWorld } from '../IBaseWorld';\r\n\r\nexport const WorldShutdownEvent: string = 'worldshutdown';\r\n\r\nexport type WorldShutdownEventHandler = (world: IBaseWorld) => void;\r\n", "import { IWorldRenderData } from './IWorldRenderData';\r\nimport { SearchEntry } from '../display/SearchEntryType';\r\n\r\nexport function CalculateTotalRenderable (entry: SearchEntry, renderData: IWorldRenderData): void\r\n{\r\n    renderData.numRendered++;\r\n    renderData.numRenderable++;\r\n\r\n    if (entry.node.dirtyFrame >= renderData.gameFrame)\r\n    {\r\n        renderData.dirtyFrame++;\r\n    }\r\n\r\n    entry.children.forEach(child =>\r\n    {\r\n        if (child.children.length > 0)\r\n        {\r\n            CalculateTotalRenderable(child, renderData);\r\n        }\r\n    });\r\n}\r\n", "import { DIRTY_CONST } from '../gameobjects/DIRTY_CONST';\r\nimport { SearchEntry } from '../display/SearchEntryType';\r\n\r\nexport function HasDirtyChildren (parent: SearchEntry): boolean\r\n{\r\n    if (parent.node.isDirty(DIRTY_CONST.CHILD_CACHE))\r\n    {\r\n        return true;\r\n    }\r\n\r\n    const stack = [ parent ];\r\n\r\n    while (stack.length > 0)\r\n    {\r\n        const entry = stack.pop();\r\n\r\n        if (entry.node.isDirty(DIRTY_CONST.TRANSFORM))\r\n        {\r\n            return true;\r\n        }\r\n\r\n        const numChildren = entry.children.length;\r\n\r\n        if (numChildren > 0)\r\n        {\r\n            for (let i = 0; i < numChildren; i++)\r\n            {\r\n                stack.push(entry.children[i]);\r\n            }\r\n        }\r\n    }\r\n\r\n    stack.length = 0;\r\n\r\n    return false;\r\n}\r\n", "import { DIRTY_CONST } from '../gameobjects/DIRTY_CONST';\r\nimport { HasDirtyChildren } from './HasDirtyChildren';\r\nimport { SearchEntry } from '../display/SearchEntryType';\r\n\r\nexport function UpdateCachedLayers (cachedLayers: SearchEntry[], dirtyCamera: boolean): void\r\n{\r\n    cachedLayers.forEach(layer =>\r\n    {\r\n        if (dirtyCamera || HasDirtyChildren(layer))\r\n        {\r\n            //  Camera is dirty, or layer has at least one dirty child\r\n            layer.node.setDirty(DIRTY_CONST.CHILD_CACHE);\r\n        }\r\n        else\r\n        {\r\n            //  Camera is clean and no dirty children, so we can re-use layer cache\r\n            //  So let's remove the children for this layer\r\n            layer.children.length = 0;\r\n        }\r\n    });\r\n}\r\n", "import { IGameObject } from '../gameobjects/IGameObject';\r\nimport { SearchEntry } from '../display/SearchEntryType';\r\n\r\nexport function WorldDepthFirstSearch (cachedLayers: SearchEntry[], parent: IGameObject, output: SearchEntry[] = []): SearchEntry[]\r\n{\r\n    for (let i = 0; i < parent.numChildren; i++)\r\n    {\r\n        const node = parent.children[i];\r\n\r\n        if (node.isRenderable())\r\n        {\r\n            const children: SearchEntry[] = [];\r\n\r\n            const entry = { node, children };\r\n\r\n            output.push(entry);\r\n\r\n            if (node.willRenderChildren && node.numChildren > 0)\r\n            {\r\n                if (node.willCacheChildren)\r\n                {\r\n                    cachedLayers.push(entry);\r\n                }\r\n\r\n                WorldDepthFirstSearch(cachedLayers, node, children);\r\n            }\r\n        }\r\n    }\r\n\r\n    return output;\r\n}\r\n", "import { CalculateTotalRenderable } from './CalculateTotalRenderable';\r\nimport { IBaseWorld } from './IBaseWorld';\r\nimport { SearchEntry } from '../display/SearchEntryType';\r\nimport { UpdateCachedLayers } from './UpdateCachedLayers';\r\nimport { WorldDepthFirstSearch } from './WorldDepthFirstSearch';\r\n\r\nexport function BuildRenderList (world: IBaseWorld): void\r\n{\r\n    const cachedLayers: SearchEntry[] = [];\r\n    const stack: SearchEntry[] = [];\r\n\r\n    //  entries is now populated with the n-tree search results, only containing nodes that will actually render\r\n    const entries = WorldDepthFirstSearch(cachedLayers, world, stack);\r\n\r\n    const renderData = world.renderData;\r\n\r\n    //  We can now sweep through the entries and purge non-dirty children of cached layers,\r\n    //  before finally building the render list. We can only do this if the camera is clean.\r\n\r\n    if (cachedLayers.length > 0)\r\n    {\r\n        UpdateCachedLayers(cachedLayers, world.camera.dirtyRender);\r\n    }\r\n\r\n    //  TODO: numRenderable probably needs to move to the search function\r\n    entries.forEach(entry =>\r\n    {\r\n        if (entry.children.length > 0)\r\n        {\r\n            CalculateTotalRenderable(entry, renderData);\r\n        }\r\n        else\r\n        {\r\n            renderData.numRendered++;\r\n            renderData.numRenderable++;\r\n\r\n            if (entry.node.dirtyFrame >= renderData.gameFrame)\r\n            {\r\n                renderData.dirtyFrame++;\r\n            }\r\n        }\r\n    });\r\n\r\n    world.renderList = entries;\r\n\r\n    if (world.forceRefresh)\r\n    {\r\n        renderData.dirtyFrame++;\r\n\r\n        world.forceRefresh = false;\r\n    }\r\n\r\n    // console.log(entries);\r\n    // console.log(renderData);\r\n    // eslint-disable-next-line no-debugger\r\n    // debugger;\r\n}\r\n", "import { IMatrix2D } from './IMatrix2D';\r\n\r\n//  Compares the a and b matrix and returns if they are equal.\r\n\r\nexport function Mat2dEquals (a: IMatrix2D, b: IMatrix2D): boolean\r\n{\r\n    return (\r\n        a.a === b.a &&\r\n        a.b === b.b &&\r\n        a.c === b.c &&\r\n        a.d === b.d &&\r\n        a.tx === b.tx &&\r\n        a.ty === b.ty\r\n    );\r\n}\r\n", "import { ISceneRenderData } from '../scenes/ISceneRenderData';\r\nimport { IWorldRenderData } from './IWorldRenderData';\r\n\r\nexport function MergeRenderData (sceneRenderData: ISceneRenderData, worldRenderData: IWorldRenderData): void\r\n{\r\n    sceneRenderData.numDirtyFrames += worldRenderData.dirtyFrame;\r\n    sceneRenderData.numTotalFrames += worldRenderData.numRendered;\r\n\r\n    if (worldRenderData.camera.dirtyRender)\r\n    {\r\n        sceneRenderData.numDirtyCameras++;\r\n    }\r\n\r\n    sceneRenderData.worldData.push(worldRenderData);\r\n}\r\n", "import { IWorldRenderData } from './IWorldRenderData';\r\n\r\nexport function ResetWorldRenderData (renderData: IWorldRenderData, gameFrame: number): void\r\n{\r\n    renderData.gameFrame = gameFrame;\r\n    renderData.dirtyFrame = 0;\r\n    renderData.numRendered = 0;\r\n    renderData.numRenderable = 0;\r\n}\r\n", "import * as GameObjectEvents from '../gameobjects/events';\r\nimport * as WorldEvents from './events';\r\n\r\nimport { Begin, Flush } from '../renderer/webgl1/renderpass';\r\nimport { Emit, Off, On, Once } from '../events';\r\n\r\nimport { BuildRenderList } from './BuildRenderList';\r\nimport { GameObject } from '../gameobjects';\r\nimport { IBaseCamera } from '../camera/IBaseCamera';\r\nimport { IBaseWorld } from './IBaseWorld';\r\nimport { IEventInstance } from '../events/IEventInstance';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\nimport { IRenderPass } from '../renderer/webgl1/renderpass/IRenderPass';\r\nimport { IScene } from '../scenes/IScene';\r\nimport { ISceneRenderData } from '../scenes/ISceneRenderData';\r\nimport { IWorldRenderData } from './IWorldRenderData';\r\nimport { Mat2dEquals } from '../math/mat2d/Mat2dEquals';\r\nimport { MergeRenderData } from './MergeRenderData';\r\nimport { RemoveChildren } from '../display';\r\nimport { ResetWorldRenderData } from './ResetWorldRenderData';\r\nimport { SearchEntry } from '../display/SearchEntryType';\r\n\r\nexport class BaseWorld extends GameObject implements IBaseWorld\r\n{\r\n    scene: IScene;\r\n\r\n    camera: IBaseCamera;\r\n    renderData: IWorldRenderData;\r\n    forceRefresh: boolean = false;\r\n    events: Map<string, Set<IEventInstance>>;\r\n    is3D: boolean = false;\r\n\r\n    renderList: SearchEntry[];\r\n\r\n    private _updateListener: IEventInstance;\r\n    private _renderListener: IEventInstance;\r\n    private _shutdownListener: IEventInstance;\r\n\r\n    constructor (scene: IScene)\r\n    {\r\n        super();\r\n\r\n        this.type = 'BaseWorld';\r\n        this.scene = scene;\r\n        this.world = this;\r\n\r\n        this.events = new Map();\r\n\r\n        this.renderList = [];\r\n\r\n        this._updateListener = On(scene, 'update', (delta: number, time: number) => this.update(delta, time));\r\n        this._renderListener = On(scene, 'render', (renderData: ISceneRenderData) => this.render(renderData));\r\n        this._shutdownListener = On(scene, 'shutdown', () => this.shutdown());\r\n        Once(scene, 'destroy', () => this.destroy());\r\n    }\r\n\r\n    update (delta: number, time: number): void\r\n    {\r\n        if (!this.willUpdate)\r\n        {\r\n            return;\r\n        }\r\n\r\n        Emit(this, GameObjectEvents.UpdateEvent, delta, time, this);\r\n\r\n        super.update(delta, time);\r\n    }\r\n\r\n    postUpdate (delta: number, time: number): void\r\n    {\r\n        Emit(this, GameObjectEvents.PostUpdateEvent, delta, time, this);\r\n    }\r\n\r\n    render (sceneRenderData: ISceneRenderData): void\r\n    {\r\n        const renderData = this.renderData;\r\n\r\n        ResetWorldRenderData(renderData, sceneRenderData.gameFrame);\r\n\r\n        if (!this.willRender || !this.visible)\r\n        {\r\n            return;\r\n        }\r\n\r\n        BuildRenderList(this);\r\n\r\n        Emit(this, WorldEvents.WorldRenderEvent, renderData, this);\r\n\r\n        MergeRenderData(sceneRenderData, renderData);\r\n\r\n        this.camera.dirtyRender = false;\r\n    }\r\n\r\n    renderGL <T extends IRenderPass> (renderPass: T): void\r\n    {\r\n        const currentCamera = renderPass.current2DCamera;\r\n        const camera = this.camera;\r\n\r\n        if (!currentCamera || !Mat2dEquals(camera.worldTransform, currentCamera.worldTransform))\r\n        {\r\n            Flush(renderPass);\r\n        }\r\n\r\n        Begin(renderPass, camera);\r\n\r\n        this.renderList.forEach(entry =>\r\n        {\r\n            if (entry.children.length > 0)\r\n            {\r\n                this.renderNode(entry, renderPass);\r\n            }\r\n            else\r\n            {\r\n                entry.node.renderGL(renderPass);\r\n            }\r\n        });\r\n    }\r\n\r\n    renderNode (entry: SearchEntry, renderPass: IRenderPass): void\r\n    {\r\n        entry.node.renderGL(renderPass);\r\n\r\n        entry.children.forEach(child =>\r\n        {\r\n            if (child.children.length > 0)\r\n            {\r\n                this.renderNode(child, renderPass);\r\n            }\r\n            else\r\n            {\r\n                child.node.renderGL(renderPass);\r\n            }\r\n        });\r\n\r\n        entry.node.postRenderGL(renderPass);\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    postRenderGL <T extends IRenderPass> (renderPass: T): void\r\n    {\r\n        //  Emit event?\r\n    }\r\n\r\n    shutdown (): void\r\n    {\r\n        const scene = this.scene;\r\n\r\n        Off(scene, 'update', this._updateListener);\r\n        Off(scene, 'render', this._renderListener);\r\n        Off(scene, 'shutdown', this._shutdownListener);\r\n\r\n        //  Clear the display list and reset the camera, but leave\r\n        //  everything in place so we can return to this World again\r\n        //  at a later stage\r\n\r\n        RemoveChildren(this);\r\n\r\n        Emit(this, WorldEvents.WorldShutdownEvent, this);\r\n\r\n        ResetWorldRenderData(this.renderData, 0);\r\n\r\n        if (this.camera)\r\n        {\r\n            this.camera.reset();\r\n        }\r\n    }\r\n\r\n    destroy (reparentChildren?: IGameObject): void\r\n    {\r\n        super.destroy(reparentChildren);\r\n\r\n        Emit(this, GameObjectEvents.DestroyEvent, this);\r\n\r\n        ResetWorldRenderData(this.renderData, 0);\r\n\r\n        if (this.camera)\r\n        {\r\n            this.camera.destroy();\r\n        }\r\n\r\n        this.events.clear();\r\n\r\n        this.camera = null;\r\n        this.renderData = null;\r\n        this.events = null;\r\n    }\r\n}\r\n", "import { IBaseCamera } from '../camera/IBaseCamera';\r\nimport { IBaseWorld } from './IBaseWorld';\r\nimport { IWorldRenderData } from './IWorldRenderData';\r\n\r\nexport function CreateWorldRenderData (world: IBaseWorld, camera: IBaseCamera): IWorldRenderData\r\n{\r\n    return {\r\n        world,\r\n        camera,\r\n        gameFrame: 0,\r\n        dirtyFrame: 0,\r\n        numRendered: 0,\r\n        numRenderable: 0\r\n    };\r\n}\r\n", "import { BaseWorld } from './BaseWorld';\r\nimport { CreateWorldRenderData } from './CreateWorldRenderData';\r\nimport { IScene } from '../scenes/IScene';\r\nimport { IStaticCamera } from '../camera/IStaticCamera';\r\nimport { IStaticWorld } from './IStaticWorld';\r\nimport { StaticCamera } from '../camera/StaticCamera';\r\n\r\n//  A Static World is designed specifically to have a bounds of a fixed size\r\n//  and a camera that doesn't move at all (no scrolling, rotation, etc)\r\n//  Because it has a fixed size, there is no camera culling enabled.\r\n//  Games that use this kind of world include Pacman, Bejeweled and 2048.\r\n\r\nexport class StaticWorld extends BaseWorld implements IStaticWorld\r\n{\r\n    camera: IStaticCamera;\r\n\r\n    constructor (scene: IScene)\r\n    {\r\n        super(scene);\r\n\r\n        this.type = 'StaticWorld';\r\n\r\n        this.camera = new StaticCamera();\r\n\r\n        this.renderData = CreateWorldRenderData(this, this.camera);\r\n    }\r\n}\r\n", "import { BackgroundColor, GlobalVar, Parent, Scenes, WebGL } from '../../../../../phaser-genesis/src/config';\r\nimport { EffectLayer, Sprite } from '../../../../../phaser-genesis/src/gameobjects';\r\n\r\nimport { AddChildren } from '../../../../../phaser-genesis/src/display';\r\nimport { Game } from '../../../../../phaser-genesis/src/Game';\r\nimport { ImageFile } from '../../../../../phaser-genesis/src/loader/files/ImageFile';\r\nimport { Loader } from '../../../../../phaser-genesis/src/loader/Loader';\r\nimport { Scene } from '../../../../../phaser-genesis/src/scenes/Scene';\r\nimport { Shader } from '../../../../../phaser-genesis/src/renderer/webgl1/shaders/Shader';\r\nimport { StaticWorld } from '../../../../../phaser-genesis/src/world/StaticWorld';\r\n\r\nconst cloudsFragmentShader = `\r\n#define SHADER_NAME CLOUDS_FRAG\r\n\r\n/*\r\n * Original shader from: https://www.shadertoy.com/view/MtjGRK\r\n */\r\n\r\nprecision mediump float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture;\r\nuniform float uTime;\r\nuniform vec2 uResolution;\r\n\r\n#define PI 3.14159265358979323\r\n\r\n//Random\r\nfloat rand(vec2 uv)\r\n{\r\n    float dt = dot(uv, vec2(12.9898, 78.233));\r\n\treturn fract(sin(mod(dt, PI / 2.0)) * 43758.5453);\r\n}\r\n\r\n//Clouds from (https://www.shadertoy.com/view/MlS3z1)\r\nconst int iter = 8;\r\n\r\nfloat turbulence(vec2 fragCoord, float octave, int id)\r\n{\r\n    float col = 0.0;\r\n    vec2 xy;\r\n    vec2 frac;\r\n    vec2 tmp1;\r\n    vec2 tmp2;\r\n    float i2;\r\n    float amp;\r\n    float maxOct = octave;\r\n    float time = uTime / 1000.0;\r\n    for (int i = 0; i < iter; i++)\r\n    {\r\n        amp = maxOct / octave;\r\n        i2 = float(i);\r\n        xy = id == 1 || id == 4? (fragCoord + 50.0 * float(id) * time / (4.0 + i2)) / octave : fragCoord / octave;\r\n        frac = fract(xy);\r\n        tmp1 = mod(floor(xy) + uResolution.xy, uResolution.xy);\r\n        tmp2 = mod(tmp1 + uResolution.xy - 1.0, uResolution.xy);\r\n        col += frac.x * frac.y * rand(tmp1) / amp;\r\n        col += frac.x * (1.0 - frac.y) * rand(vec2(tmp1.x, tmp2.y)) / amp;\r\n        col += (1.0 - frac.x) * frac.y * rand(vec2(tmp2.x, tmp1.y)) / amp;\r\n        col += (1.0 - frac.x) * (1.0 - frac.y) * rand(tmp2) / amp;\r\n        octave /= 2.0;\r\n    }\r\n    return (col);\r\n}\r\n//____________________________________________________\r\n\r\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\r\n{\r\n\tvec2 uv = fragCoord.xy / uResolution.xy;\r\n\r\n    vec3 sky = clamp(vec3(0.2, sin(uv.y), 1.0) + 0.3, 0.0, 1.0);\r\n\r\n    vec4 color = texture2D(uTexture, vTextureCoord);\r\n\r\n    // vec4 skyandtexture = mix(sky, color);\r\n\r\n    float cloud1 = turbulence(fragCoord, 128.0, 1);\r\n    float cloud2 = turbulence(fragCoord + 2000.0, 128.0, 1);\r\n    float cloudss = clamp(pow(mix(cloud1, cloud2, 0.5), 30.0) / 9.0, 0.0, 1.0);\r\n\r\n\t// fragColor = sky + color + vec4(cloudss, 1.0);\r\n\r\n    fragColor = color * vec4(sky + cloudss, 1.0);\r\n}\r\n\r\nvoid main(void)\r\n{\r\n    mainImage(gl_FragColor, gl_FragCoord.xy);\r\n}\r\n`;\r\n\r\nconst verticalBarsFragmentShader = `\r\n#define SHADER_NAME BARS_FRAG\r\n\r\nprecision mediump float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture;\r\nuniform float uTime;\r\nuniform vec2 uResolution;\r\n\r\n#define PI 0.01\r\n\r\nvoid main (void)\r\n{\r\n    vec4 color = texture2D(uTexture, vTextureCoord);\r\n\r\n    vec2 p = (gl_FragCoord.xy / uResolution.xy) - 0.5;\r\n\r\n    float sx = 0.4 * sin(25.0 * p.y - (uTime * 0.001) * 2.0);\r\n\r\n    float dy = 2.0 / (5.0 * abs(p.y - sx));\r\n\r\n    gl_FragColor = color * vec4((p.x + 0.5) * dy, 0.5 * dy, dy - 1.65, 0.5);\r\n}`;\r\n\r\nconst vduNoiseFragmentShader = `\r\nprecision mediump float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture;\r\nuniform float uTime;\r\nuniform vec2 uResolution;\r\n\r\nfloat noise(vec2 pos) {\r\n    return fract(sin(dot(pos, vec2(12.9898 - (uTime * 0.001) ,78.233 + (uTime * 0.001)))) * 43758.5453);\r\n}\r\n\r\nvoid main (void)\r\n{\r\n    vec2 normalPos = gl_FragCoord.xy / uResolution.xy;\r\n    float pos = (gl_FragCoord.y / uResolution.y);\r\n    //float mouse_dist = length(vec2((mouse.x - normalPos.x) * (uResolution.x / uResolution.y) , mouse.y - normalPos.y));\r\n    float mouse_dist = 1.0;\r\n    float distortion = clamp(1.0 - (mouse_dist + 0.1) * 3.0, 0.0, 1.0);\r\n\r\n    pos -= (distortion * distortion) * 0.1;\r\n\r\n    float c = sin(pos * 400.0) * 0.4 + 0.4;\r\n    c = pow(c, 0.2);\r\n    c *= 0.2;\r\n\r\n    float band_pos = fract(uTime * 0.0001) * 3.0 - 1.0;\r\n    c += clamp( (1.0 - abs(band_pos - pos) * 10.0), 0.0, 1.0) * 0.1;\r\n\r\n    c += distortion * 0.08;\r\n    // noise\r\n    c += (noise(gl_FragCoord.xy) - 0.5) * (0.09);\r\n\r\n    vec4 color = texture2D(uTexture, vTextureCoord);\r\n\r\n    gl_FragColor = color + vec4( 0.0, c, 0.0, 1.0 );\r\n\r\n}`;\r\n\r\nconst underwaterFragmentShader = `\r\nprecision mediump float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture;\r\nuniform float uTime;\r\nuniform vec2 uResolution;\r\n\r\n#define MAX_ITER 4\r\n\r\nvoid main (void)\r\n{\r\n    vec2 v_texCoord = gl_FragCoord.xy / uResolution;\r\n\r\n    vec2 p =  v_texCoord * 8.0 - vec2(20.0);\r\n    vec2 i = p;\r\n    float c = 1.0;\r\n    float inten = .05;\r\n\r\n    for (int n = 0; n < MAX_ITER; n++)\r\n    {\r\n        float t = (uTime * 0.0001) * (1.0 - (3.0 / float(n+1)));\r\n\r\n        i = p + vec2(cos(t - i.x) + sin(t + i.y),\r\n        sin(t - i.y) + cos(t + i.x));\r\n\r\n        c += 1.0/length(vec2(p.x / (sin(i.x+t)/inten),\r\n        p.y / (cos(i.y+t)/inten)));\r\n    }\r\n\r\n    c /= float(MAX_ITER);\r\n    c = 1.5 - sqrt(c);\r\n\r\n    vec4 texColor = vec4(0.0, 0.01, 0.015, 1.0);\r\n\r\n    texColor.rgb *= (1.0 / (1.0 - (c + 0.05)));\r\n\r\n    gl_FragColor = texture2D(uTexture, vTextureCoord) * texColor;\r\n}`;\r\n\r\nconst sineWaveFragmentShader2 = `\r\nprecision mediump float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture;\r\nuniform float uTime;\r\nuniform vec2 uResolution;\r\n\r\nvoid main (void)\r\n{\r\n    vec2 uv = gl_FragCoord.xy / uResolution.xy;\r\n    uv.y += (sin((uv.x + (uTime * 0.0005)) * 10.0) * 0.1) + (sin((uv.x + (uTime * 0.0002)) * 32.0) * 0.01);\r\n    gl_FragColor = texture2D(uTexture, uv);\r\n}`;\r\n\r\nconst sineWaveFragmentShader = `\r\nprecision mediump float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture;\r\nuniform float uTime;\r\nuniform vec2 uResolution;\r\n\r\nvoid main (void)\r\n{\r\n    vec2 uv = gl_FragCoord.xy / uResolution.xy;\r\n\r\n    // Represents the v/y coord(0 to 1) that will not sway.\r\n    float fixedBasePosY = 0.0;\r\n\r\n    // Configs for you to get the sway just right.\r\n    float speed = 3.0;\r\n    float verticleDensity = 6.0;\r\n    float swayIntensity = 0.2;\r\n\r\n    // Putting it all together.\r\n    float offsetX = sin(uv.y * verticleDensity + (uTime * 0.001) * speed) * swayIntensity;\r\n\r\n    // Offsettin the u/x coord.\r\n    uv.x += offsetX * (uv.y - fixedBasePosY);\r\n\r\n    gl_FragColor = texture2D(uTexture, uv);\r\n}`;\r\n\r\nconst pixelateFragmentShader = `\r\nprecision mediump float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture;\r\nuniform float uTime;\r\nuniform vec2 uResolution;\r\n\r\nvoid main (void)\r\n{\r\n    vec2 pixelSize = vec2(4.0, 4.0);\r\n    vec2 size = uResolution.xy / pixelSize;\r\n    vec2 color = floor((vTextureCoord * size)) / size + pixelSize / uResolution.xy * 0.5;\r\n\r\n    gl_FragColor = texture2D(uTexture, color);\r\n}`;\r\n\r\nconst plasmaFragmentShader = `\r\nprecision mediump float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture;\r\nuniform float uTime;\r\nuniform vec2 uResolution;\r\n\r\nconst float PI = 3.14159265;\r\nfloat ptime = uTime * 0.0001;\r\nfloat alpha = 1.0;\r\nfloat size = 0.03;\r\nfloat redShift = 0.5;\r\nfloat greenShift = 0.5;\r\nfloat blueShift = 0.9;\r\n\r\nvoid main (void)\r\n{\r\n    vec4 tcolor = texture2D(uTexture, vTextureCoord);\r\n\r\n    float color1, color2, color;\r\n\r\n    color1 = (sin(dot(gl_FragCoord.xy, vec2(sin(ptime * 3.0), cos(ptime * 3.0))) * 0.02 + ptime * 3.0) + 1.0) / 2.0;\r\n    vec2 center = vec2(640.0 / 2.0, 360.0 / 2.0) + vec2(640.0 / 2.0 * sin(-ptime * 3.0), 360.0 / 2.0 * cos(-ptime * 3.0));\r\n    color2 = (cos(length(gl_FragCoord.xy - center) * size) + 1.0) / 2.0;\r\n    color = (color1 + color2) / 2.0;\r\n\r\n    float red = (cos(PI * color / redShift + ptime * 3.0) + 1.0) / 2.0;\r\n    float green = (sin(PI * color / greenShift + ptime * 3.0) + 1.0) / 2.0;\r\n    float blue = (sin(PI * color / blueShift + ptime * 3.0) + 1.0) / 2.0;\r\n\r\n    gl_FragColor = tcolor * vec4(red, green, blue, alpha);\r\n}`;\r\n\r\nconst lazerBeamFragmentShader = `\r\nprecision highp float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture;\r\nuniform float uTime;\r\nuniform vec2 uResolution;\r\n\r\nvoid main (void)\r\n{\r\n    vec4 color = texture2D(uTexture, vTextureCoord);\r\n\r\n    vec2 p = (gl_FragCoord.yx / uResolution.yx) - 0.5;\r\n\r\n    float sx = 0.3 * (p.x + 0.8) * sin(900.0 * p.x - 1.0 * pow(uTime / 1000.0, 0.55) * 5.0);\r\n    float dy = 4.0 / (500.0 * abs(p.y - sx));\r\n\r\n    dy += 1.0 / (25.0 * length(p - vec2(p.x, 0.0)));\r\n\r\n    gl_FragColor = color * vec4((p.x + 0.1) * dy, 0.3 * dy, dy, 1.1);\r\n}`;\r\n\r\nconst redFragmentShader = `\r\nprecision highp float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture;\r\n\r\nvoid main (void)\r\n{\r\n    vec4 color = texture2D(uTexture, vTextureCoord);\r\n\r\n    gl_FragColor = color * vec4(1.0, 0.0, 0.0, 1.0);\r\n}`;\r\n\r\nconst blurXFragmentShader = `\r\nprecision mediump float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture;\r\n\r\nvoid main (void)\r\n{\r\n    vec4 sum = vec4(0.0);\r\n    float blur = 0.001953125;\r\n\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x - 4.0 * blur, vTextureCoord.y)) * 0.05;\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x - 3.0 * blur, vTextureCoord.y)) * 0.09;\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x - 2.0 * blur, vTextureCoord.y)) * 0.12;\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x + 2.0 * blur, vTextureCoord.y)) * 0.12;\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x + 3.0 * blur, vTextureCoord.y)) * 0.09;\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x + 4.0 * blur, vTextureCoord.y)) * 0.05;\r\n\r\n    gl_FragColor = sum;\r\n}`;\r\n\r\nconst blurYFragmentShader = `\r\nprecision mediump float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture;\r\n\r\nvoid main (void)\r\n{\r\n    vec4 sum = vec4(0.0);\r\n    float blur = 0.001953125;\r\n\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y - 4.0 * blur)) * 0.05;\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y - 3.0 * blur)) * 0.09;\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y - 2.0 * blur)) * 0.12;\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y + 2.0 * blur)) * 0.12;\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y + 3.0 * blur)) * 0.09;\r\n    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y + 4.0 * blur)) * 0.05;\r\n\r\n    gl_FragColor = sum;\r\n}`;\r\n\r\nclass Demo extends Scene\r\n{\r\n    constructor ()\r\n    {\r\n        super();\r\n\r\n        const loader = new Loader();\r\n\r\n        loader.setPath('assets/');\r\n\r\n        loader.add(ImageFile('background', 'farm-background.png'));\r\n        loader.add(ImageFile('ayu', 'ayu.png'));\r\n        loader.add(ImageFile('logo', 'logo.png'));\r\n        loader.add(ImageFile('rocket', 'rocket.png'));\r\n        loader.add(ImageFile('farm', 'farm-logo.png'));\r\n        loader.add(ImageFile('star', 'star.png'));\r\n        loader.add(ImageFile('bubble', 'bubble256.png'));\r\n\r\n        loader.start().then(() => this.create()).catch();\r\n    }\r\n\r\n    create ()\r\n    {\r\n        const red = new Shader({ fragmentShader: redFragmentShader, renderToFramebuffer: true });\r\n        const blurX = new Shader({ fragmentShader: blurXFragmentShader, renderToFramebuffer: true });\r\n        const blurY = new Shader({ fragmentShader: blurYFragmentShader, renderToFramebuffer: true });\r\n        const lazer = new Shader({ fragmentShader: lazerBeamFragmentShader, renderToFramebuffer: true });\r\n        const plasma = new Shader({ fragmentShader: plasmaFragmentShader, renderToFramebuffer: true });\r\n        const pixel = new Shader({ fragmentShader: pixelateFragmentShader, renderToFramebuffer: true });\r\n        const sine = new Shader({ fragmentShader: sineWaveFragmentShader, renderToFramebuffer: true });\r\n        const sine2 = new Shader({ fragmentShader: sineWaveFragmentShader2, renderToFramebuffer: true });\r\n        const underwater = new Shader({ fragmentShader: underwaterFragmentShader, renderToFramebuffer: true });\r\n        const vdu = new Shader({ fragmentShader: vduNoiseFragmentShader, renderToFramebuffer: true });\r\n        const bars = new Shader({ fragmentShader: verticalBarsFragmentShader, renderToFramebuffer: true });\r\n        const clouds = new Shader({ fragmentShader: cloudsFragmentShader, renderToFramebuffer: true });\r\n        // const empty = new Shader();\r\n\r\n        const world = new StaticWorld(this);\r\n\r\n        const layer = new EffectLayer();\r\n        // const layer2 = new EffectLayer();\r\n\r\n        // layer.shaders.push(red);\r\n        // layer.shaders.push(blurX, red);\r\n        // layer.shaders.push(lazer);\r\n        // layer.shaders.push(plasma);\r\n        layer.shaders.push(pixel);\r\n        // layer.shaders.push(sine);\r\n        // layer.shaders.push(sine2);\r\n        // layer.shaders.push(underwater);\r\n        // layer.shaders.push(vdu);\r\n        // layer.shaders.push(bars);\r\n        // layer.shaders.push(empty);\r\n        // layer2.shaders.push(sine);\r\n        // layer.shaders.push(clouds);\r\n\r\n        const bg = new Sprite(400, 300, 'background');\r\n        const logo = new Sprite(200, 300, 'logo');\r\n        const ayu = new Sprite(600, 300, 'ayu');\r\n        const farm = new Sprite(200, 150, 'farm');\r\n        const rocket = new Sprite(150, 500, 'rocket');\r\n        const bubble = new Sprite(400, 450, 'bubble');\r\n        const star = new Sprite(650, 500, 'star');\r\n\r\n        // AddChildren(world, ayu, logo, farm, rocket, bubble, star);\r\n        // AddChildren(layer, ayu, logo);\r\n\r\n        AddChildren(layer, ayu, logo, farm, rocket, bubble);\r\n\r\n        // AddChildren(layer2, farm);\r\n\r\n        AddChildren(world, bg, layer, star);\r\n\r\n        // AddChild(world, bg);\r\n        // AddChild(world, layer);\r\n        // AddChild(world, layer2);\r\n        // AddChild(world, star);\r\n    }\r\n}\r\n\r\nnew Game(\r\n    WebGL(),\r\n    Parent('gameParent'),\r\n    GlobalVar('Phaser4'),\r\n    BackgroundColor(0x2d2d2d),\r\n    Scenes(Demo)\r\n);\r\n"],
  "mappings": "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",
  "names": []
}
